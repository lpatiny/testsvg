{"version":3,"sources":["webpack://testsvg/webpack/universalModuleDefinition","webpack://testsvg/webpack/bootstrap","webpack://testsvg/./src/index.js","webpack://testsvg/./src/getPaper.browser.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/utils/methods.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/utils/utils.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/namespaces.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/utils/window.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/Base.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/utils/adopter.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/arrange.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/regex.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/class.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/css.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/data.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/memory.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/event.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/Color.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/Point.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/Matrix.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/parser.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/Box.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/ArrayPolyfill.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/List.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/selector.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/EventTarget.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/defaults.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/SVGArray.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/SVGNumber.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/attr.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Dom.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Element.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/sugar.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/circled.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/optional/transform.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Shape.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Circle.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Container.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Defs.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Ellipse.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Stop.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/gradiented.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Gradient.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Pattern.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Image.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/PointArray.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/pointed.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Line.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Marker.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Controller.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/types/PathArray.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Morphable.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Path.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/poly.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Polygon.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Polyline.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Rect.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Queue.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Animator.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Timeline.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/animation/Runner.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Svg.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Symbol.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/modules/core/textable.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Text.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Tspan.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/ClipPath.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/ForeignObject.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/G.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/A.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Mask.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Style.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/TextPath.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/elements/Use.js","webpack://testsvg/./node_modules/@svgdotjs/svg.js/src/main.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getPaper","require","testSVG","paper","rect","fill","move","console","log","svg","SVG","methods","names","registerMethods","Array","isArray","_name","addMethodNames","getOwnPropertyNames","assign","getMethodsFor","_names","push","map","array","block","il","length","result","filter","radians","Math","PI","degrees","camelCase","toLowerCase","replace","g","toUpperCase","unCamelCase","capitalize","charAt","slice","proportionalSize","element","width","height","box","bbox","getOrigin","ox","oy","origin","string","trim","x","y","bx","includes","by","xmlns","xlink","svgjs","globals","window","document","registerWindow","win","doc","Base","elements","createElementNS","makeInstance","adopter","querySelector","node","innerHTML","firstChild","nodeOrNew","Node","adopt","instance","className","nodeName","mockAdopt","mock","register","asRoot","getClass","did","eid","assignNewId","children","id","extend","attrCheck","method","wrapWithAttrCheck","fn","args","constructor","apply","attr","invent","config","initializer","inherit","construct","parent","siblings","position","index","next","prev","forward","removeElement","add","isRoot","appendChild","defs","backward","front","back","before","remove","after","insertBefore","insertAfter","numberAndUnit","hex","rgb","reference","transforms","whitespace","isHex","isRgb","isCss","isBlank","isNumber","isPercent","isImage","delimiter","hyphen","pathLetters","isPathLetter","numbersWithDots","dots","classes","split","hasClass","indexOf","addClass","join","removeClass","toggleClass","css","style","val","ret","arguments","cssText","el","forEach","cased","test","show","hide","visible","data","a","v","JSON","parse","e","stringify","remember","k","memory","forget","_memory","listenerId","windowEvents","getEvents","getEventHolder","events","getEventTarget","on","listener","binding","options","bag","_svgjsListenerId","event","ev","addEventListener","off","namespace","removeEventListener","clearEvents","dispatch","Event","dispatchEvent","CustomEvent","detail","cancelable","componentHex","component","integer","round","max","min","toString","is","space","hueToRgb","q","Color","init","b","_a","_b","_c","_d","values","params","z","h","getParameters","noWhitespace","exec","parseInt","Error","hexParse","substring","sixDigitHex","components","dToR","cos","sin","yL","xL","zL","ct","mx","nm","rU","gU","bU","pow","bd","lab","xyz","r255","g255","b255","rL","gL","bL","xU","yU","zU","lch","sqrt","atan2","hsl","isGrey","delta","cmyk","_clamped","toHex","toRgb","rV","gV","bV","toArray","random","pi","grey","color","Point","source","base","clone","transform","transformO","Matrix","isMatrixLike","f","closeEnough","threshold","abs","fromArray","Element","matrixify","parseFloat","multiplyO","formatTransforms","transformer","translateO","rx","ry","lmultiplyO","scaleO","scaleX","scaleY","skewO","skewX","skewY","shearO","shear","rotateO","theta","isFinite","px","py","dx","dy","tx","ty","compose","originX","originY","sx","sy","lam","rotate","translateX","translateY","decompose","cx","cy","determinant","ccw","thetaRad","st","multiply","matrix","matrixMultiply","lmultiply","inverseO","det","na","nb","nc","nd","ne","nf","inverse","translate","scale","flip","axis","around","flipO","lx","skew","tan","ly","skewXO","skewYO","aroundO","equals","other","comp","valueOf","flipBoth","flipX","flipY","positionX","positionY","relative","relativeX","relativeY","parser","nodes","size","path","parentNode","body","documentElement","addTo","isNulledBox","Box","left","top","w","x2","y2","merge","xMin","Infinity","xMax","yMin","yMax","addOffset","pageXOffset","pageYOffset","isNulled","getBox","cb","retry","contains","viewbox","zoom","level","point","clientWidth","clientHeight","getComputedStyle","getPropertyValue","zoomX","zoomY","zoomAmount","Number","MIN_VALUE","subClassArray","Function","baseClass","_constructor","Arr","arr","List","each","fnOrMethodName","concat","reserved","baseFind","query","querySelectorAll","reduce","obj","attrs","EventTarget","super","type","j","defaultPrevented","fire","noop","timeline","duration","ease","delay","stroke","opacity","offset","SVGArray","toSet","Set","SVGNumber","unit","isNaN","match","toJSON","plus","number","minus","times","divide","convert","hooks","Dom","childNodes","put","clear","hasChildNodes","removeChild","lastChild","writeDataToDom","cloneNode","deep","first","has","last","matches","selector","matchesSelector","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","oMatchesSelector","putIn","replaceChild","precision","factor","keys","newAttrs","svgOrFn","outerHTML","well","len","fragment","current","_this","createDocumentFragment","firstElementChild","words","text","textContent","attributes","nodeValue","curr","removeAttribute","getAttribute","defaults","_val","hook","isColor","leading","setAttributeNS","setAttribute","rebuild","find","findOne","dom","hasAttribute","setData","center","dmove","inside","parents","until","getBBox","rbox","getBoundingClientRect","screenCTM","ctm","getCTM","getScreenCTM","sugar","prefix","extension","mat","angle","direction","directionString","radius","_element","getTotalLength","pointAt","getPointAtLength","font","ax","ay","amove","untransform","str","kv","reverse","toParent","pCtm","toRoot","decomposed","Shape","Circle","Container","circle","flatten","ungroup","Defs","Ellipse","circled","ellipse","Stop","update","from","fx","fy","x1","y1","to","Gradient","stop","url","targets","gradiented","gradient","Pattern","pattern","patternUnits","Image","load","callback","img","src","image","PointArray","toLine","at","pos","destination","points","pop","maxX","maxY","minX","minY","MorphArray","Line","plot","pointed","line","Marker","ref","makeSetterGetter","marker","easing","bezier","steps","stepPosition","jumps","beforeFlag","step","floor","jumping","Stepper","done","Ease","Controller","stepper","target","dt","recalculate","_duration","overshoot","_overshoot","os","zeta","wn","Spring","velocity","acceleration","newPosition","PID","windup","integral","error","P","I","D","PathArray","pathRegReplace","pathHandlers","M","p0","L","H","V","C","S","Q","T","Z","A","mlhvqtcsaz","jl","arrayToString","equalCommands","pathArray","morph","destinationArray","paramCnt","Morphable","_stepper","_from","_to","_type","_context","_morphObj","_set","NonMorphable","morphableTypes","ObjectBag","TransformBag","objOrArr","entries","sort","registerMorphableType","makeMorphable","Path","_array","Polygon","polygon","poly","Polyline","polyline","Rect","Queue","_first","_last","item","shift","Animator","nextDraw","frames","timeouts","immediates","timer","performance","Date","frame","run","requestAnimationFrame","_draw","timeout","time","now","immediate","cancelFrame","clearTimeout","cancelImmediate","nextTimeout","lastTimeout","nextFrame","lastFrame","nextImmediate","makeSchedule","runnerInfo","start","runner","end","defaultSource","Timeline","timeSource","_timeSource","_startTime","_speed","_persist","_nextFrame","_paused","_runners","_runnerIds","_lastRunnerId","_time","_lastSourceTime","_lastStepTime","_step","_stepFn","_stepImmediate","schedule","when","absoluteStartTime","endTime","getEndTime","unschedule","persist","info","updateTime","_continue","splice","lastRunnerInfo","lastDuration","getEndTimeOfTimeline","lastEndTime","active","play","pause","finish","speed","yes","currentSpeed","positive","seek","dtOrForever","immediateStep","dtSource","dtTime","reset","runnersLeft","dtToStart","_timeline","Runner","_queue","_isDeclarative","_history","enabled","_lastTime","_reseted","transformId","_haveReversed","_reverse","_loopsDone","_swing","_wait","_times","_frameId","_prepareRunner","animate","sanitise","loop","swing","wait","queue","initFn","runFn","retargetFn","isTransform","initialiser","retarget","initialised","finished","during","loops","loopDuration","loopsDone","partial","swinging","backwards","uncliped","swingForward","progress","running","_lastPosition","justStarted","justFinished","declarative","_initialise","converged","_run","_rememberMorpher","morpher","caller","_tryRetarget","extra","needsIt","positionOrDt","allfinished","addTransform","clearTransform","clearTransformsFromQueue","FakeRunner","mergeWith","getRunnerTransform","mergeTransforms","netTransform","_transformationRunners","runners","RunnerArray","ids","getByID","lastRunner","edit","newRunner","clearBefore","deleteCnt","_clearTransformRunnersBefore","currentRunner","_currentTransform","_addRunner","styleAttr","newLevel","newPoint","affine","isMatrix","currentAngle","startTransform","undefined","rTarget","rCurrent","possibilities","distances","shortest","affineParameters","newTransforms","_queueNumber","_queueNumberDelta","newTo","_queueObject","Svg","SVGElement","version","_defs","nested","plain","_build","createTextNode","getComputedTextLength","symbol","Text","_rebuild","firstLine","nodeType","newLined","build","tspan","newLine","blankLineOffset","fontSize","textable","Tspan","ClipPath","unclip","clip","clipWith","clipper","ForeignObject","foreignObject","G","child","group","link","linkTo","Mask","unmask","mask","maskWith","masker","Style","addText","rule","fontFamily","cssRule","fontface","TextPath","track","textPath","importNodes","Use","file","use"],"mappings":"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","file":"testsvg.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"testsvg\"] = factory();\n\telse\n\t\troot[\"testsvg\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\n\nconst getPaper = require('./getPaper');\n\nfunction testSVG() {\n  // registerWindow(window, window.document);\n\n  const paper = getPaper();\n\n  // use svg.js as normal\n  paper\n    .rect(100, 100)\n    .fill('yellow')\n    .move(50, 50);\n\n  console.log(paper.svg());\n}\n\ntestSVG();\n\nmodule.exports = testSVG;\n","'use strict';\n\nconst { SVG } = require('@svgdotjs/svg.js');\n\nfunction getPaper() {\n  return SVG();\n}\n\nmodule.exports = getPaper;\n","const methods = {}\r\nconst names = []\r\n\r\nexport function registerMethods (name, m) {\r\n  if (Array.isArray(name)) {\r\n    for (let _name of name) {\r\n      registerMethods(_name, m)\r\n    }\r\n    return\r\n  }\r\n\r\n  if (typeof name === 'object') {\r\n    for (let _name in name) {\r\n      registerMethods(_name, name[_name])\r\n    }\r\n    return\r\n  }\r\n\r\n  addMethodNames(Object.getOwnPropertyNames(m))\r\n  methods[name] = Object.assign(methods[name] || {}, m)\r\n}\r\n\r\nexport function getMethodsFor (name) {\r\n  return methods[name] || {}\r\n}\r\n\r\nexport function getMethodNames () {\r\n  return [ ...new Set(names) ]\r\n}\r\n\r\nexport function addMethodNames (_names) {\r\n  names.push(..._names)\r\n}\r\n","// Map function\r\nexport function map (array, block) {\r\n  var i\r\n  var il = array.length\r\n  var result = []\r\n\r\n  for (i = 0; i < il; i++) {\r\n    result.push(block(array[i]))\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n// Filter function\r\nexport function filter (array, block) {\r\n  var i\r\n  var il = array.length\r\n  var result = []\r\n\r\n  for (i = 0; i < il; i++) {\r\n    if (block(array[i])) {\r\n      result.push(array[i])\r\n    }\r\n  }\r\n\r\n  return result\r\n}\r\n\r\n// Degrees to radians\r\nexport function radians (d) {\r\n  return d % 360 * Math.PI / 180\r\n}\r\n\r\n// Radians to degrees\r\nexport function degrees (r) {\r\n  return r * 180 / Math.PI % 360\r\n}\r\n\r\n// Convert dash-separated-string to camelCase\r\nexport function camelCase (s) {\r\n  return s.toLowerCase().replace(/-(.)/g, function (m, g) {\r\n    return g.toUpperCase()\r\n  })\r\n}\r\n\r\n// Convert camel cased string to string seperated\r\nexport function unCamelCase (s) {\r\n  return s.replace(/([A-Z])/g, function (m, g) {\r\n    return '-' + g.toLowerCase()\r\n  })\r\n}\r\n\r\n// Capitalize first letter of a string\r\nexport function capitalize (s) {\r\n  return s.charAt(0).toUpperCase() + s.slice(1)\r\n}\r\n\r\n// Calculate proportional width and height values when necessary\r\nexport function proportionalSize (element, width, height, box) {\r\n  if (width == null || height == null) {\r\n    box = box || element.bbox()\r\n\r\n    if (width == null) {\r\n      width = box.width / box.height * height\r\n    } else if (height == null) {\r\n      height = box.height / box.width * width\r\n    }\r\n  }\r\n\r\n  return {\r\n    width: width,\r\n    height: height\r\n  }\r\n}\r\n\r\nexport function getOrigin (o, element) {\r\n  // Allow origin or around as the names\r\n  let origin = o.origin // o.around == null ? o.origin : o.around\r\n  let ox, oy\r\n\r\n  // Allow the user to pass a string to rotate around a given point\r\n  if (typeof origin === 'string' || origin == null) {\r\n    // Get the bounding box of the element with no transformations applied\r\n    const string = (origin || 'center').toLowerCase().trim()\r\n    const { height, width, x, y } = element.bbox()\r\n\r\n    // Calculate the transformed x and y coordinates\r\n    let bx = string.includes('left') ? x\r\n      : string.includes('right') ? x + width\r\n      : x + width / 2\r\n    let by = string.includes('top') ? y\r\n      : string.includes('bottom') ? y + height\r\n      : y + height / 2\r\n\r\n    // Set the bounds eg : \"bottom-left\", \"Top right\", \"middle\" etc...\r\n    ox = o.ox != null ? o.ox : bx\r\n    oy = o.oy != null ? o.oy : by\r\n  } else {\r\n    ox = origin[0]\r\n    oy = origin[1]\r\n  }\r\n\r\n  // Return the origin as it is if it wasn't a string\r\n  return [ ox, oy ]\r\n}\r\n","// Default namespaces\r\nexport let ns = 'http://www.w3.org/2000/svg'\r\nexport let xmlns = 'http://www.w3.org/2000/xmlns/'\r\nexport let xlink = 'http://www.w3.org/1999/xlink'\r\nexport let svgjs = 'http://svgjs.com/svgjs'\r\n","export const globals = {\r\n  window: typeof window === 'undefined' ? null : window,\r\n  document: typeof document === 'undefined' ? null : document\r\n}\r\n\r\nexport function registerWindow (win = null, doc = null) {\r\n  globals.window = win\r\n  globals.document = doc\r\n}\r\n\r\nconst save = {}\r\n\r\nexport function saveWindow () {\r\n  save.window = globals.window\r\n  save.document = globals.document\r\n}\r\n\r\nexport function restoreWindow () {\r\n  globals.window = save.window\r\n  globals.document = save.document\r\n}\r\n\r\nexport function withWindow (win, fn) {\r\n  saveWindow()\r\n  registerWindow(win, win.document)\r\n  fn(win, win.document)\r\n  restoreWindow()\r\n}\r\n\r\nexport function getWindow () {\r\n  return globals.window\r\n}\r\n","export default class Base {\r\n  // constructor (node/*, {extensions = []} */) {\r\n  //   // this.tags = []\r\n  //   //\r\n  //   // for (let extension of extensions) {\r\n  //   //   extension.setup.call(this, node)\r\n  //   //   this.tags.push(extension.name)\r\n  //   // }\r\n  // }\r\n}\r\n","import { addMethodNames } from './methods.js'\r\nimport { capitalize } from './utils.js'\r\nimport { ns } from '../modules/core/namespaces.js'\r\nimport { globals } from '../utils/window.js'\r\nimport Base from '../types/Base.js'\r\n\r\nconst elements = {}\r\nexport const root = '___SYMBOL___ROOT___'\r\n\r\n// Method for element creation\r\nexport function create (name) {\r\n  // create element\r\n  return globals.document.createElementNS(ns, name)\r\n}\r\n\r\nexport function makeInstance (element) {\r\n  if (element instanceof Base) return element\r\n\r\n  if (typeof element === 'object') {\r\n    return adopter(element)\r\n  }\r\n\r\n  if (element == null) {\r\n    return new elements[root]()\r\n  }\r\n\r\n  if (typeof element === 'string' && element.charAt(0) !== '<') {\r\n    return adopter(globals.document.querySelector(element))\r\n  }\r\n\r\n  var node = create('svg')\r\n  node.innerHTML = element\r\n\r\n  // We can use firstChild here because we know,\r\n  // that the first char is < and thus an element\r\n  element = adopter(node.firstChild)\r\n\r\n  return element\r\n}\r\n\r\nexport function nodeOrNew (name, node) {\r\n  return node instanceof globals.window.Node ? node : create(name)\r\n}\r\n\r\n// Adopt existing svg elements\r\nexport function adopt (node) {\r\n  // check for presence of node\r\n  if (!node) return null\r\n\r\n  // make sure a node isn't already adopted\r\n  if (node.instance instanceof Base) return node.instance\r\n\r\n  // initialize variables\r\n  var className = capitalize(node.nodeName || 'Dom')\r\n\r\n  // Make sure that gradients are adopted correctly\r\n  if (className === 'LinearGradient' || className === 'RadialGradient') {\r\n    className = 'Gradient'\r\n\r\n  // Fallback to Dom if element is not known\r\n  } else if (!elements[className]) {\r\n    className = 'Dom'\r\n  }\r\n\r\n  return new elements[className](node)\r\n}\r\n\r\nlet adopter = adopt\r\n\r\nexport function mockAdopt (mock = adopt) {\r\n  adopter = mock\r\n}\r\n\r\nexport function register (element, name = element.name, asRoot = false) {\r\n  elements[name] = element\r\n  if (asRoot) elements[root] = element\r\n\r\n  addMethodNames(Object.getOwnPropertyNames(element.prototype))\r\n\r\n  return element\r\n}\r\n\r\nexport function getClass (name) {\r\n  return elements[name]\r\n}\r\n\r\n// Element id sequence\r\nlet did = 1000\r\n\r\n// Get next named element id\r\nexport function eid (name) {\r\n  return 'Svgjs' + capitalize(name) + (did++)\r\n}\r\n\r\n// Deep new id assignment\r\nexport function assignNewId (node) {\r\n  // do the same for SVG child nodes as well\r\n  for (var i = node.children.length - 1; i >= 0; i--) {\r\n    assignNewId(node.children[i])\r\n  }\r\n\r\n  if (node.id) {\r\n    return adopt(node).id(eid(node.nodeName))\r\n  }\r\n\r\n  return adopt(node)\r\n}\r\n\r\n// Method for extending objects\r\nexport function extend (modules, methods, attrCheck) {\r\n  var key, i\r\n\r\n  modules = Array.isArray(modules) ? modules : [ modules ]\r\n\r\n  for (i = modules.length - 1; i >= 0; i--) {\r\n    for (key in methods) {\r\n      let method = methods[key]\r\n      if (attrCheck) {\r\n        method = wrapWithAttrCheck(methods[key])\r\n      }\r\n      modules[i].prototype[key] = method\r\n    }\r\n  }\r\n}\r\n\r\n// export function extendWithAttrCheck (...args) {\r\n//   extend(...args, true)\r\n// }\r\n\r\nexport function wrapWithAttrCheck (fn) {\r\n  return function (...args) {\r\n    let o = args[args.length - 1]\r\n\r\n    if (o && o.constructor === Object && !(o instanceof Array)) {\r\n      return fn.apply(this, args.slice(0, -1)).attr(o)\r\n    } else {\r\n      return fn.apply(this, args)\r\n    }\r\n  }\r\n}\r\n\r\nexport function invent (config) {\r\n  // Create element initializer\r\n  var initializer = typeof config.create === 'function'\r\n    ? config.create\r\n    : function (node) {\r\n      this.constructor(node || create(config.create))\r\n    }\r\n\r\n  // Inherit prototype\r\n  if (config.inherit) {\r\n    /* eslint new-cap: off */\r\n    initializer.prototype = new config.inherit()\r\n    initializer.prototype.constructor = initializer\r\n  }\r\n\r\n  // Extend with methods\r\n  if (config.extend) { extend(initializer, config.extend) }\r\n\r\n  // Attach construct method to parent\r\n  if (config.construct) { extend(config.parent || elements['Container'], config.construct) }\r\n\r\n  return initializer\r\n}\r\n","import { makeInstance } from '../../utils/adopter.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Get all siblings, including myself\r\nexport function siblings () {\r\n  return this.parent().children()\r\n}\r\n\r\n// Get the curent position siblings\r\nexport function position () {\r\n  return this.parent().index(this)\r\n}\r\n\r\n// Get the next element (will return null if there is none)\r\nexport function next () {\r\n  return this.siblings()[this.position() + 1]\r\n}\r\n\r\n// Get the next element (will return null if there is none)\r\nexport function prev () {\r\n  return this.siblings()[this.position() - 1]\r\n}\r\n\r\n// Send given element one step forward\r\nexport function forward () {\r\n  var i = this.position() + 1\r\n  var p = this.parent()\r\n\r\n  // move node one step forward\r\n  p.removeElement(this).add(this, i)\r\n\r\n  // make sure defs node is always at the top\r\n  if (typeof p.isRoot === 'function' && p.isRoot()) {\r\n    p.node.appendChild(p.defs().node)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Send given element one step backward\r\nexport function backward () {\r\n  var i = this.position()\r\n\r\n  if (i > 0) {\r\n    this.parent().removeElement(this).add(this, i - 1)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Send given element all the way to the front\r\nexport function front () {\r\n  var p = this.parent()\r\n\r\n  // Move node forward\r\n  p.node.appendChild(this.node)\r\n\r\n  // Make sure defs node is always at the top\r\n  if (typeof p.isRoot === 'function' && p.isRoot()) {\r\n    p.node.appendChild(p.defs().node)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Send given element all the way to the back\r\nexport function back () {\r\n  if (this.position() > 0) {\r\n    this.parent().removeElement(this).add(this, 0)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Inserts a given element before the targeted element\r\nexport function before (element) {\r\n  element = makeInstance(element)\r\n  element.remove()\r\n\r\n  var i = this.position()\r\n\r\n  this.parent().add(element, i)\r\n\r\n  return this\r\n}\r\n\r\n// Inserts a given element after the targeted element\r\nexport function after (element) {\r\n  element = makeInstance(element)\r\n  element.remove()\r\n\r\n  var i = this.position()\r\n\r\n  this.parent().add(element, i + 1)\r\n\r\n  return this\r\n}\r\n\r\nexport function insertBefore (element) {\r\n  element = makeInstance(element)\r\n  element.before(this)\r\n  return this\r\n}\r\n\r\nexport function insertAfter (element) {\r\n  element = makeInstance(element)\r\n  element.after(this)\r\n  return this\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  siblings,\r\n  position,\r\n  next,\r\n  prev,\r\n  forward,\r\n  backward,\r\n  front,\r\n  back,\r\n  before,\r\n  after,\r\n  insertBefore,\r\n  insertAfter\r\n})\r\n","// Parse unit value\r\nexport let numberAndUnit = /^([+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?)([a-z%]*)$/i\r\n\r\n// Parse hex value\r\nexport let hex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i\r\n\r\n// Parse rgb value\r\nexport let rgb = /rgb\\((\\d+),(\\d+),(\\d+)\\)/\r\n\r\n// Parse reference id\r\nexport let reference = /(#[a-z0-9\\-_]+)/i\r\n\r\n// splits a transformation chain\r\nexport let transforms = /\\)\\s*,?\\s*/\r\n\r\n// Whitespace\r\nexport let whitespace = /\\s/g\r\n\r\n// Test hex value\r\nexport let isHex = /^#[a-f0-9]{3,6}$/i\r\n\r\n// Test rgb value\r\nexport let isRgb = /^rgb\\(/\r\n\r\n// Test css declaration\r\nexport let isCss = /[^:]+:[^;]+;?/\r\n\r\n// Test for blank string\r\nexport let isBlank = /^(\\s+)?$/\r\n\r\n// Test for numeric string\r\nexport let isNumber = /^[+-]?(\\d+(\\.\\d*)?|\\.\\d+)(e[+-]?\\d+)?$/i\r\n\r\n// Test for percent value\r\nexport let isPercent = /^-?[\\d.]+%$/\r\n\r\n// Test for image url\r\nexport let isImage = /\\.(jpg|jpeg|png|gif|svg)(\\?[^=]+.*)?/i\r\n\r\n// split at whitespace and comma\r\nexport let delimiter = /[\\s,]+/\r\n\r\n// The following regex are used to parse the d attribute of a path\r\n\r\n// Matches all hyphens which are not after an exponent\r\nexport let hyphen = /([^e])-/gi\r\n\r\n// Replaces and tests for all path letters\r\nexport let pathLetters = /[MLHVCSQTAZ]/gi\r\n\r\n// yes we need this one, too\r\nexport let isPathLetter = /[MLHVCSQTAZ]/i\r\n\r\n// matches 0.154.23.45\r\nexport let numbersWithDots = /((\\d?\\.\\d+(?:e[+-]?\\d+)?)((?:\\.\\d+(?:e[+-]?\\d+)?)+))+/gi\r\n\r\n// matches .\r\nexport let dots = /\\./g\r\n","import { delimiter } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Return array of classes on the node\r\nexport function classes () {\r\n  var attr = this.attr('class')\r\n  return attr == null ? [] : attr.trim().split(delimiter)\r\n}\r\n\r\n// Return true if class exists on the node, false otherwise\r\nexport function hasClass (name) {\r\n  return this.classes().indexOf(name) !== -1\r\n}\r\n\r\n// Add class to the node\r\nexport function addClass (name) {\r\n  if (!this.hasClass(name)) {\r\n    var array = this.classes()\r\n    array.push(name)\r\n    this.attr('class', array.join(' '))\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Remove class from the node\r\nexport function removeClass (name) {\r\n  if (this.hasClass(name)) {\r\n    this.attr('class', this.classes().filter(function (c) {\r\n      return c !== name\r\n    }).join(' '))\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Toggle the presence of a class on the node\r\nexport function toggleClass (name) {\r\n  return this.hasClass(name) ? this.removeClass(name) : this.addClass(name)\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  classes, hasClass, addClass, removeClass, toggleClass\r\n})\r\n","import { camelCase } from '../../utils/utils.js'\r\nimport { isBlank } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\n\r\n// Dynamic style generator\r\nexport function css (style, val) {\r\n  let ret = {}\r\n  if (arguments.length === 0) {\r\n    // get full style as object\r\n    this.node.style.cssText.split(/\\s*;\\s*/)\r\n      .filter(function (el) {\r\n        return !!el.length\r\n      })\r\n      .forEach(function (el) {\r\n        let t = el.split(/\\s*:\\s*/)\r\n        ret[t[0]] = t[1]\r\n      })\r\n    return ret\r\n  }\r\n\r\n  if (arguments.length < 2) {\r\n    // get style properties in the array\r\n    if (Array.isArray(style)) {\r\n      for (let name of style) {\r\n        let cased = camelCase(name)\r\n        ret[cased] = this.node.style[cased]\r\n      }\r\n      return ret\r\n    }\r\n\r\n    // get style for property\r\n    if (typeof style === 'string') {\r\n      return this.node.style[camelCase(style)]\r\n    }\r\n\r\n    // set styles in object\r\n    if (typeof style === 'object') {\r\n      for (let name in style) {\r\n        // set empty string if null/undefined/'' was given\r\n        this.node.style[camelCase(name)]\r\n          = (style[name] == null || isBlank.test(style[name])) ? '' : style[name]\r\n      }\r\n    }\r\n  }\r\n\r\n  // set style for property\r\n  if (arguments.length === 2) {\r\n    this.node.style[camelCase(style)]\r\n      = (val == null || isBlank.test(val)) ? '' : val\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Show element\r\nexport function show () {\r\n  return this.css('display', '')\r\n}\r\n\r\n// Hide element\r\nexport function hide () {\r\n  return this.css('display', 'none')\r\n}\r\n\r\n// Is element visible?\r\nexport function visible () {\r\n  return this.css('display') !== 'none'\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  css, show, hide, visible\r\n})\r\n","import { registerMethods } from '../../utils/methods.js'\r\n\r\n// Store data values on svg nodes\r\nexport function data (a, v, r) {\r\n  if (typeof a === 'object') {\r\n    for (v in a) {\r\n      this.data(v, a[v])\r\n    }\r\n  } else if (arguments.length < 2) {\r\n    try {\r\n      return JSON.parse(this.attr('data-' + a))\r\n    } catch (e) {\r\n      return this.attr('data-' + a)\r\n    }\r\n  } else {\r\n    this.attr('data-' + a,\r\n      v === null ? null\r\n      : r === true || typeof v === 'string' || typeof v === 'number' ? v\r\n      : JSON.stringify(v)\r\n    )\r\n  }\r\n\r\n  return this\r\n}\r\n\r\nregisterMethods('Dom', { data })\r\n","import { registerMethods } from '../../utils/methods.js'\r\n\r\n// Remember arbitrary data\r\nexport function remember (k, v) {\r\n  // remember every item in an object individually\r\n  if (typeof arguments[0] === 'object') {\r\n    for (var key in k) {\r\n      this.remember(key, k[key])\r\n    }\r\n  } else if (arguments.length === 1) {\r\n    // retrieve memory\r\n    return this.memory()[k]\r\n  } else {\r\n    // store memory\r\n    this.memory()[k] = v\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n// Erase a given memory\r\nexport function forget () {\r\n  if (arguments.length === 0) {\r\n    this._memory = {}\r\n  } else {\r\n    for (var i = arguments.length - 1; i >= 0; i--) {\r\n      delete this.memory()[arguments[i]]\r\n    }\r\n  }\r\n  return this\r\n}\r\n\r\n// This triggers creation of a new hidden class which is not performant\r\n// However, this function is not rarely used so it will not happen frequently\r\n// Return local memory object\r\nexport function memory () {\r\n  return (this._memory = this._memory || {})\r\n}\r\n\r\nregisterMethods('Dom', { remember, forget, memory })\r\n","import { delimiter } from './regex.js'\r\nimport { makeInstance } from '../../utils/adopter.js'\r\nimport { globals } from '../../utils/window.js'\r\n\r\nlet listenerId = 0\r\nlet windowEvents = {}\r\n\r\nfunction getEvents (instance) {\r\n  let n = instance.getEventHolder()\r\n\r\n  // We dont want to save events in global space\r\n  if (n === globals.window) n = windowEvents\r\n  if (!n.events) n.events = {}\r\n  return n.events\r\n}\r\n\r\nfunction getEventTarget (instance) {\r\n  return instance.getEventTarget()\r\n}\r\n\r\nfunction clearEvents (instance) {\r\n  const n = instance.getEventHolder()\r\n  if (n.events) n.events = {}\r\n}\r\n\r\n// Add event binder in the SVG namespace\r\nexport function on (node, events, listener, binding, options) {\r\n  var l = listener.bind(binding || node)\r\n  var instance = makeInstance(node)\r\n  var bag = getEvents(instance)\r\n  var n = getEventTarget(instance)\r\n\r\n  // events can be an array of events or a string of events\r\n  events = Array.isArray(events) ? events : events.split(delimiter)\r\n\r\n  // add id to listener\r\n  if (!listener._svgjsListenerId) {\r\n    listener._svgjsListenerId = ++listenerId\r\n  }\r\n\r\n  events.forEach(function (event) {\r\n    var ev = event.split('.')[0]\r\n    var ns = event.split('.')[1] || '*'\r\n\r\n    // ensure valid object\r\n    bag[ev] = bag[ev] || {}\r\n    bag[ev][ns] = bag[ev][ns] || {}\r\n\r\n    // reference listener\r\n    bag[ev][ns][listener._svgjsListenerId] = l\r\n\r\n    // add listener\r\n    n.addEventListener(ev, l, options || false)\r\n  })\r\n}\r\n\r\n// Add event unbinder in the SVG namespace\r\nexport function off (node, events, listener, options) {\r\n  var instance = makeInstance(node)\r\n  var bag = getEvents(instance)\r\n  var n = getEventTarget(instance)\r\n\r\n  // listener can be a function or a number\r\n  if (typeof listener === 'function') {\r\n    listener = listener._svgjsListenerId\r\n    if (!listener) return\r\n  }\r\n\r\n  // events can be an array of events or a string or undefined\r\n  events = Array.isArray(events) ? events : (events || '').split(delimiter)\r\n\r\n  events.forEach(function (event) {\r\n    var ev = event && event.split('.')[0]\r\n    var ns = event && event.split('.')[1]\r\n    var namespace, l\r\n\r\n    if (listener) {\r\n      // remove listener reference\r\n      if (bag[ev] && bag[ev][ns || '*']) {\r\n        // removeListener\r\n        n.removeEventListener(ev, bag[ev][ns || '*'][listener], options || false)\r\n\r\n        delete bag[ev][ns || '*'][listener]\r\n      }\r\n    } else if (ev && ns) {\r\n      // remove all listeners for a namespaced event\r\n      if (bag[ev] && bag[ev][ns]) {\r\n        for (l in bag[ev][ns]) {\r\n          off(n, [ ev, ns ].join('.'), l)\r\n        }\r\n\r\n        delete bag[ev][ns]\r\n      }\r\n    } else if (ns) {\r\n      // remove all listeners for a specific namespace\r\n      for (event in bag) {\r\n        for (namespace in bag[event]) {\r\n          if (ns === namespace) {\r\n            off(n, [ event, ns ].join('.'))\r\n          }\r\n        }\r\n      }\r\n    } else if (ev) {\r\n      // remove all listeners for the event\r\n      if (bag[ev]) {\r\n        for (namespace in bag[ev]) {\r\n          off(n, [ ev, namespace ].join('.'))\r\n        }\r\n\r\n        delete bag[ev]\r\n      }\r\n    } else {\r\n      // remove all listeners on a given node\r\n      for (event in bag) {\r\n        off(n, event)\r\n      }\r\n\r\n      clearEvents(instance)\r\n    }\r\n  })\r\n}\r\n\r\nexport function dispatch (node, event, data) {\r\n  var n = getEventTarget(node)\r\n\r\n  // Dispatch event\r\n  if (event instanceof globals.window.Event) {\r\n    n.dispatchEvent(event)\r\n  } else {\r\n    event = new globals.window.CustomEvent(event, { detail: data, cancelable: true })\r\n    n.dispatchEvent(event)\r\n  }\r\n  return event\r\n}\r\n","\r\nimport { hex, isHex, isRgb, rgb, whitespace } from '../modules/core/regex.js'\r\n\r\nfunction sixDigitHex (hex) {\r\n  return hex.length === 4\r\n    ? [ '#',\r\n      hex.substring(1, 2), hex.substring(1, 2),\r\n      hex.substring(2, 3), hex.substring(2, 3),\r\n      hex.substring(3, 4), hex.substring(3, 4)\r\n    ].join('')\r\n    : hex\r\n}\r\n\r\nfunction componentHex (component) {\r\n  const integer = Math.round(component)\r\n  const bounded = Math.max(0, Math.min(255, integer))\r\n  const hex = bounded.toString(16)\r\n  return hex.length === 1 ? '0' + hex : hex\r\n}\r\n\r\nfunction is (object, space) {\r\n  for (let i = space.length; i--;) {\r\n    if (object[space[i]] == null) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nfunction getParameters (a, b) {\r\n  const params = is(a, 'rgb') ? { _a: a.r, _b: a.g, _c: a.b, space: 'rgb' }\r\n    : is(a, 'xyz') ? { _a: a.x, _b: a.y, _c: a.z, _d: 0, space: 'xyz' }\r\n    : is(a, 'hsl') ? { _a: a.h, _b: a.s, _c: a.l, _d: 0, space: 'hsl' }\r\n    : is(a, 'lab') ? { _a: a.l, _b: a.a, _c: a.b, _d: 0, space: 'lab' }\r\n    : is(a, 'lch') ? { _a: a.l, _b: a.c, _c: a.h, _d: 0, space: 'lch' }\r\n    : is(a, 'cmyk') ? { _a: a.c, _b: a.m, _c: a.y, _d: a.k, space: 'cmyk' }\r\n    : { _a: 0, _b: 0, _c: 0, space: 'rgb' }\r\n\r\n  params.space = b || params.space\r\n  return params\r\n}\r\n\r\nfunction cieSpace (space) {\r\n  if (space === 'lab' || space === 'xyz' || space === 'lch') {\r\n    return true\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nfunction hueToRgb (p, q, t) {\r\n  if (t < 0) t += 1\r\n  if (t > 1) t -= 1\r\n  if (t < 1 / 6) return p + (q - p) * 6 * t\r\n  if (t < 1 / 2) return q\r\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\r\n  return p\r\n}\r\n\r\nexport default class Color {\r\n  constructor (...inputs) {\r\n    this.init(...inputs)\r\n  }\r\n\r\n  init (a = 0, b = 0, c = 0, d = 0, space = 'rgb') {\r\n    // This catches the case when a falsy value is passed like ''\r\n    a = !a ? 0 : a\r\n\r\n    // Reset all values in case the init function is rerun with new color space\r\n    if (this.space) {\r\n      for (let component in this.space) {\r\n        delete this[this.space[component]]\r\n      }\r\n    }\r\n\r\n    if (typeof a === 'number') {\r\n      // Allow for the case that we don't need d...\r\n      space = typeof d === 'string' ? d : space\r\n      d = typeof d === 'string' ? 0 : d\r\n\r\n      // Assign the values straight to the color\r\n      Object.assign(this, { _a: a, _b: b, _c: c, _d: d, space })\r\n    // If the user gave us an array, make the color from it\r\n    } else if (a instanceof Array) {\r\n      this.space = b || (typeof a[3] === 'string' ? a[3] : a[4]) || 'rgb'\r\n      Object.assign(this, { _a: a[0], _b: a[1], _c: a[2], _d: a[3] || 0 })\r\n    } else if (a instanceof Object) {\r\n      // Set the object up and assign its values directly\r\n      const values = getParameters(a, b)\r\n      Object.assign(this, values)\r\n    } else if (typeof a === 'string') {\r\n      if (isRgb.test(a)) {\r\n        const noWhitespace = a.replace(whitespace, '')\r\n        const [ _a, _b, _c ] = rgb.exec(noWhitespace)\r\n          .slice(1, 4).map(v => parseInt(v))\r\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\r\n      } else if (isHex.test(a)) {\r\n        const hexParse = v => parseInt(v, 16)\r\n        const [ , _a, _b, _c ] = hex.exec(sixDigitHex(a)).map(hexParse)\r\n        Object.assign(this, { _a, _b, _c, _d: 0, space: 'rgb' })\r\n      } else throw Error(`Unsupported string format, can't construct Color`)\r\n    }\r\n\r\n    // Now add the components as a convenience\r\n    const { _a, _b, _c, _d } = this\r\n    const components = this.space === 'rgb' ? { r: _a, g: _b, b: _c }\r\n      : this.space === 'xyz' ? { x: _a, y: _b, z: _c }\r\n      : this.space === 'hsl' ? { h: _a, s: _b, l: _c }\r\n      : this.space === 'lab' ? { l: _a, a: _b, b: _c }\r\n      : this.space === 'lch' ? { l: _a, c: _b, h: _c }\r\n      : this.space === 'cmyk' ? { c: _a, m: _b, y: _c, k: _d }\r\n      : {}\r\n    Object.assign(this, components)\r\n  }\r\n\r\n  /*\r\n  Conversion Methods\r\n  */\r\n\r\n  rgb () {\r\n    if (this.space === 'rgb') {\r\n      return this\r\n    } else if (cieSpace(this.space)) {\r\n      // Convert to the xyz color space\r\n      let { x, y, z } = this\r\n      if (this.space === 'lab' || this.space === 'lch') {\r\n        // Get the values in the lab space\r\n        let { l, a, b } = this\r\n        if (this.space === 'lch') {\r\n          let { c, h } = this\r\n          const dToR = Math.PI / 180\r\n          a = c * Math.cos(dToR * h)\r\n          b = c * Math.sin(dToR * h)\r\n        }\r\n\r\n        // Undo the nonlinear function\r\n        const yL = (l + 16) / 116\r\n        const xL = a / 500 + yL\r\n        const zL = yL - b / 200\r\n\r\n        // Get the xyz values\r\n        const ct = 16 / 116\r\n        const mx = 0.008856\r\n        const nm = 7.787\r\n        x = 0.95047 * ((xL ** 3 > mx) ? xL ** 3 : (xL - ct) / nm)\r\n        y = 1.00000 * ((yL ** 3 > mx) ? yL ** 3 : (yL - ct) / nm)\r\n        z = 1.08883 * ((zL ** 3 > mx) ? zL ** 3 : (zL - ct) / nm)\r\n      }\r\n\r\n      // Convert xyz to unbounded rgb values\r\n      const rU = x * 3.2406 + y * -1.5372 + z * -0.4986\r\n      const gU = x * -0.9689 + y * 1.8758 + z * 0.0415\r\n      const bU = x * 0.0557 + y * -0.2040 + z * 1.0570\r\n\r\n      // Convert the values to true rgb values\r\n      let pow = Math.pow\r\n      let bd = 0.0031308\r\n      const r = (rU > bd) ? (1.055 * pow(rU, 1 / 2.4) - 0.055) : 12.92 * rU\r\n      const g = (gU > bd) ? (1.055 * pow(gU, 1 / 2.4) - 0.055) : 12.92 * gU\r\n      const b = (bU > bd) ? (1.055 * pow(bU, 1 / 2.4) - 0.055) : 12.92 * bU\r\n\r\n      // Make and return the color\r\n      const color = new Color(255 * r, 255 * g, 255 * b)\r\n      return color\r\n    } else if (this.space === 'hsl') {\r\n      // https://bgrins.github.io/TinyColor/docs/tinycolor.html\r\n      // Get the current hsl values\r\n      let { h, s, l } = this\r\n      h /= 360\r\n      s /= 100\r\n      l /= 100\r\n\r\n      // If we are grey, then just make the color directly\r\n      if (s === 0) {\r\n        l *= 255\r\n        let color = new Color(l, l, l)\r\n        return color\r\n      }\r\n\r\n      // TODO I have no idea what this does :D If you figure it out, tell me!\r\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s\r\n      const p = 2 * l - q\r\n\r\n      // Get the rgb values\r\n      const r = 255 * hueToRgb(p, q, h + 1 / 3)\r\n      const g = 255 * hueToRgb(p, q, h)\r\n      const b = 255 * hueToRgb(p, q, h - 1 / 3)\r\n\r\n      // Make a new color\r\n      const color = new Color(r, g, b)\r\n      return color\r\n    } else if (this.space === 'cmyk') {\r\n      // https://gist.github.com/felipesabino/5066336\r\n      // Get the normalised cmyk values\r\n      const { c, m, y, k } = this\r\n\r\n      // Get the rgb values\r\n      const r = 255 * (1 - Math.min(1, c * (1 - k) + k))\r\n      const g = 255 * (1 - Math.min(1, m * (1 - k) + k))\r\n      const b = 255 * (1 - Math.min(1, y * (1 - k) + k))\r\n\r\n      // Form the color and return it\r\n      const color = new Color(r, g, b)\r\n      return color\r\n    } else {\r\n      return this\r\n    }\r\n  }\r\n\r\n  lab () {\r\n    // Get the xyz color\r\n    const { x, y, z } = this.xyz()\r\n\r\n    // Get the lab components\r\n    const l = (116 * y) - 16\r\n    const a = 500 * (x - y)\r\n    const b = 200 * (y - z)\r\n\r\n    // Construct and return a new color\r\n    const color = new Color(l, a, b, 'lab')\r\n    return color\r\n  }\r\n\r\n  xyz () {\r\n\r\n    // Normalise the red, green and blue values\r\n    const { _a: r255, _b: g255, _c: b255 } = this.rgb()\r\n    const [ r, g, b ] = [ r255, g255, b255 ].map(v => v / 255)\r\n\r\n    // Convert to the lab rgb space\r\n    const rL = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92\r\n    const gL = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92\r\n    const bL = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92\r\n\r\n    // Convert to the xyz color space without bounding the values\r\n    const xU = (rL * 0.4124 + gL * 0.3576 + bL * 0.1805) / 0.95047\r\n    const yU = (rL * 0.2126 + gL * 0.7152 + bL * 0.0722) / 1.00000\r\n    const zU = (rL * 0.0193 + gL * 0.1192 + bL * 0.9505) / 1.08883\r\n\r\n    // Get the proper xyz values by applying the bounding\r\n    const x = (xU > 0.008856) ? Math.pow(xU, 1 / 3) : (7.787 * xU) + 16 / 116\r\n    const y = (yU > 0.008856) ? Math.pow(yU, 1 / 3) : (7.787 * yU) + 16 / 116\r\n    const z = (zU > 0.008856) ? Math.pow(zU, 1 / 3) : (7.787 * zU) + 16 / 116\r\n\r\n    // Make and return the color\r\n    const color = new Color(x, y, z, 'xyz')\r\n    return color\r\n  }\r\n\r\n  lch () {\r\n\r\n    // Get the lab color directly\r\n    const { l, a, b } = this.lab()\r\n\r\n    // Get the chromaticity and the hue using polar coordinates\r\n    const c = Math.sqrt(a ** 2 + b ** 2)\r\n    let h = 180 * Math.atan2(b, a) / Math.PI\r\n    if (h < 0) {\r\n      h *= -1\r\n      h = 360 - h\r\n    }\r\n\r\n    // Make a new color and return it\r\n    const color = new Color(l, c, h, 'lch')\r\n    return color\r\n  }\r\n\r\n  hsl () {\r\n\r\n    // Get the rgb values\r\n    const { _a, _b, _c } = this.rgb()\r\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\r\n\r\n    // Find the maximum and minimum values to get the lightness\r\n    const max = Math.max(r, g, b)\r\n    const min = Math.min(r, g, b)\r\n    const l = (max + min) / 2\r\n\r\n    // If the r, g, v values are identical then we are grey\r\n    const isGrey = max === min\r\n\r\n    // Calculate the hue and saturation\r\n    const delta = max - min\r\n    const s = isGrey ? 0\r\n      : l > 0.5 ? delta / (2 - max - min)\r\n      : delta / (max + min)\r\n    const h = isGrey ? 0\r\n      : max === r ? ((g - b) / delta + (g < b ? 6 : 0)) / 6\r\n      : max === g ? ((b - r) / delta + 2) / 6\r\n      : max === b ? ((r - g) / delta + 4) / 6\r\n      : 0\r\n\r\n    // Construct and return the new color\r\n    const color = new Color(360 * h, 100 * s, 100 * l, 'hsl')\r\n    return color\r\n  }\r\n\r\n  cmyk () {\r\n\r\n    // Get the rgb values for the current color\r\n    const { _a, _b, _c } = this.rgb()\r\n    const [ r, g, b ] = [ _a, _b, _c ].map(v => v / 255)\r\n\r\n    // Get the cmyk values in an unbounded format\r\n    const k = Math.min(1 - r, 1 - g, 1 - b)\r\n\r\n    if (k === 1) {\r\n      // Catch the black case\r\n      return new Color(0, 0, 0, 1, 'cmyk')\r\n    }\r\n\r\n    const c = (1 - r - k) / (1 - k)\r\n    const m = (1 - g - k) / (1 - k)\r\n    const y = (1 - b - k) / (1 - k)\r\n\r\n    // Construct the new color\r\n    const color = new Color(c, m, y, k, 'cmyk')\r\n    return color\r\n  }\r\n\r\n  /*\r\n  Input and Output methods\r\n  */\r\n\r\n  _clamped () {\r\n    let { _a, _b, _c } = this.rgb()\r\n    let { max, min, round } = Math\r\n    let format = v => max(0, min(round(v), 255))\r\n    return [ _a, _b, _c ].map(format)\r\n  }\r\n\r\n  toHex () {\r\n    let [ r, g, b ] = this._clamped().map(componentHex)\r\n    return `#${r}${g}${b}`\r\n  }\r\n\r\n  toString () {\r\n    return this.toHex()\r\n  }\r\n\r\n  toRgb () {\r\n    let [ rV, gV, bV ] = this._clamped()\r\n    let string = `rgb(${rV},${gV},${bV})`\r\n    return string\r\n  }\r\n\r\n  toArray () {\r\n    let { _a, _b, _c, _d, space } = this\r\n    return [ _a, _b, _c, _d, space ]\r\n  }\r\n\r\n  /*\r\n  Generating random colors\r\n  */\r\n\r\n  static random (mode = 'vibrant', t, u) {\r\n\r\n    // Get the math modules\r\n    const { random, round, sin, PI: pi } = Math\r\n\r\n    // Run the correct generator\r\n    if (mode === 'vibrant') {\r\n\r\n      const l = (81 - 57) * random() + 57\r\n      const c = (83 - 45) * random() + 45\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'sine') {\r\n\r\n      t = t == null ? random() : t\r\n      const r = round(80 * sin(2 * pi * t / 0.5 + 0.01) + 150)\r\n      const g = round(50 * sin(2 * pi * t / 0.5 + 4.6) + 200)\r\n      const b = round(100 * sin(2 * pi * t / 0.5 + 2.3) + 150)\r\n      const color = new Color(r, g, b)\r\n      return color\r\n\r\n    } else if (mode === 'pastel') {\r\n\r\n      const l = (94 - 86) * random() + 86\r\n      const c = (26 - 9) * random() + 9\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'dark') {\r\n\r\n      const l = 10 + 10 * random()\r\n      const c = (125 - 75) * random() + 86\r\n      const h = 360 * random()\r\n      const color = new Color(l, c, h, 'lch')\r\n      return color\r\n\r\n    } else if (mode === 'rgb') {\r\n\r\n      const r = 255 * random()\r\n      const g = 255 * random()\r\n      const b = 255 * random()\r\n      const color = new Color(r, g, b)\r\n      return color\r\n\r\n    } else if (mode === 'lab') {\r\n\r\n      const l = 100 * random()\r\n      const a = 256 * random() - 128\r\n      const b = 256 * random() - 128\r\n      const color = new Color(l, a, b, 'lab')\r\n      return color\r\n\r\n    } else if (mode === 'grey') {\r\n\r\n      const grey = 255 * random()\r\n      const color = new Color(grey, grey, grey)\r\n      return color\r\n\r\n    }\r\n  }\r\n\r\n  /*\r\n  Constructing colors\r\n  */\r\n\r\n  // Test if given value is a color string\r\n  static test (color) {\r\n    return (typeof color === 'string')\r\n      && (isHex.test(color) || isRgb.test(color))\r\n  }\r\n\r\n  // Test if given value is an rgb object\r\n  static isRgb (color) {\r\n    return color && typeof color.r === 'number'\r\n      && typeof color.g === 'number'\r\n      && typeof color.b === 'number'\r\n  }\r\n\r\n  // Test if given value is a color\r\n  static isColor (color) {\r\n    return color && (\r\n      color instanceof Color\r\n      || this.isRgb(color)\r\n      || this.test(color)\r\n    )\r\n  }\r\n}\r\n","import Matrix from './Matrix.js'\r\n\r\nexport default class Point {\r\n  // Initialize\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (x, y) {\r\n    let source\r\n    let base = { x: 0, y: 0 }\r\n\r\n    // ensure source as object\r\n    source = Array.isArray(x) ? { x: x[0], y: x[1] }\r\n      : typeof x === 'object' ? { x: x.x, y: x.y }\r\n      : { x: x, y: y }\r\n\r\n    // merge source\r\n    this.x = source.x == null ? base.x : source.x\r\n    this.y = source.y == null ? base.y : source.y\r\n\r\n    return this\r\n  }\r\n\r\n  // Clone point\r\n  clone () {\r\n    return new Point(this)\r\n  }\r\n\r\n  transform (m) {\r\n    return this.clone().transformO(m)\r\n  }\r\n\r\n  // Transform point with matrix\r\n  transformO (m) {\r\n    if (!Matrix.isMatrixLike(m)) {\r\n      m = new Matrix(m)\r\n    }\r\n\r\n    let { x, y } = this\r\n\r\n    // Perform the matrix multiplication\r\n    this.x = m.a * x + m.c * y + m.e\r\n    this.y = m.b * x + m.d * y + m.f\r\n\r\n    return this\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.x, this.y ]\r\n  }\r\n}\r\n\r\nexport function point (x, y) {\r\n  return new Point(x, y).transform(this.screenCTM().inverse())\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { radians } from '../utils/utils.js'\r\nimport { register } from '../utils/adopter.js'\r\nimport Element from '../elements/Element.js'\r\nimport Point from './Point.js'\r\n\r\nfunction closeEnough (a, b, threshold) {\r\n  return Math.abs(b - a) < (threshold || 1e-6)\r\n}\r\n\r\nexport default class Matrix {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  // Initialize\r\n  init (source) {\r\n    var base = Matrix.fromArray([ 1, 0, 0, 1, 0, 0 ])\r\n\r\n    // ensure source as object\r\n    source = source instanceof Element ? source.matrixify()\r\n      : typeof source === 'string' ? Matrix.fromArray(source.split(delimiter).map(parseFloat))\r\n      : Array.isArray(source) ? Matrix.fromArray(source)\r\n      : (typeof source === 'object' && Matrix.isMatrixLike(source)) ? source\r\n      : (typeof source === 'object') ? new Matrix().transform(source)\r\n      : arguments.length === 6 ? Matrix.fromArray([].slice.call(arguments))\r\n      : base\r\n\r\n    // Merge the source matrix with the base matrix\r\n    this.a = source.a != null ? source.a : base.a\r\n    this.b = source.b != null ? source.b : base.b\r\n    this.c = source.c != null ? source.c : base.c\r\n    this.d = source.d != null ? source.d : base.d\r\n    this.e = source.e != null ? source.e : base.e\r\n    this.f = source.f != null ? source.f : base.f\r\n\r\n    return this\r\n  }\r\n\r\n  // Clones this matrix\r\n  clone () {\r\n    return new Matrix(this)\r\n  }\r\n\r\n  // Transform a matrix into another matrix by manipulating the space\r\n  transform (o) {\r\n    // Check if o is a matrix and then left multiply it directly\r\n    if (Matrix.isMatrixLike(o)) {\r\n      var matrix = new Matrix(o)\r\n      return matrix.multiplyO(this)\r\n    }\r\n\r\n    // Get the proposed transformations and the current transformations\r\n    var t = Matrix.formatTransforms(o)\r\n    var current = this\r\n    let { x: ox, y: oy } = new Point(t.ox, t.oy).transform(current)\r\n\r\n    // Construct the resulting matrix\r\n    var transformer = new Matrix()\r\n      .translateO(t.rx, t.ry)\r\n      .lmultiplyO(current)\r\n      .translateO(-ox, -oy)\r\n      .scaleO(t.scaleX, t.scaleY)\r\n      .skewO(t.skewX, t.skewY)\r\n      .shearO(t.shear)\r\n      .rotateO(t.theta)\r\n      .translateO(ox, oy)\r\n\r\n    // If we want the origin at a particular place, we force it there\r\n    if (isFinite(t.px) || isFinite(t.py)) {\r\n      const origin = new Point(ox, oy).transform(transformer)\r\n      // TODO: Replace t.px with isFinite(t.px)\r\n      const dx = t.px ? t.px - origin.x : 0\r\n      const dy = t.py ? t.py - origin.y : 0\r\n      transformer.translateO(dx, dy)\r\n    }\r\n\r\n    // Translate now after positioning\r\n    transformer.translateO(t.tx, t.ty)\r\n    return transformer\r\n  }\r\n\r\n  // Applies a matrix defined by its affine parameters\r\n  compose (o) {\r\n    if (o.origin) {\r\n      o.originX = o.origin[0]\r\n      o.originY = o.origin[1]\r\n    }\r\n    // Get the parameters\r\n    var ox = o.originX || 0\r\n    var oy = o.originY || 0\r\n    var sx = o.scaleX || 1\r\n    var sy = o.scaleY || 1\r\n    var lam = o.shear || 0\r\n    var theta = o.rotate || 0\r\n    var tx = o.translateX || 0\r\n    var ty = o.translateY || 0\r\n\r\n    // Apply the standard matrix\r\n    var result = new Matrix()\r\n      .translateO(-ox, -oy)\r\n      .scaleO(sx, sy)\r\n      .shearO(lam)\r\n      .rotateO(theta)\r\n      .translateO(tx, ty)\r\n      .lmultiplyO(this)\r\n      .translateO(ox, oy)\r\n    return result\r\n  }\r\n\r\n  // Decomposes this matrix into its affine parameters\r\n  decompose (cx = 0, cy = 0) {\r\n    // Get the parameters from the matrix\r\n    var a = this.a\r\n    var b = this.b\r\n    var c = this.c\r\n    var d = this.d\r\n    var e = this.e\r\n    var f = this.f\r\n\r\n    // Figure out if the winding direction is clockwise or counterclockwise\r\n    var determinant = a * d - b * c\r\n    var ccw = determinant > 0 ? 1 : -1\r\n\r\n    // Since we only shear in x, we can use the x basis to get the x scale\r\n    // and the rotation of the resulting matrix\r\n    var sx = ccw * Math.sqrt(a * a + b * b)\r\n    var thetaRad = Math.atan2(ccw * b, ccw * a)\r\n    var theta = 180 / Math.PI * thetaRad\r\n    var ct = Math.cos(thetaRad)\r\n    var st = Math.sin(thetaRad)\r\n\r\n    // We can then solve the y basis vector simultaneously to get the other\r\n    // two affine parameters directly from these parameters\r\n    var lam = (a * c + b * d) / determinant\r\n    var sy = ((c * sx) / (lam * a - b)) || ((d * sx) / (lam * b + a))\r\n\r\n    // Use the translations\r\n    let tx = e - cx + cx * ct * sx + cy * (lam * ct * sx - st * sy)\r\n    let ty = f - cy + cx * st * sx + cy * (lam * st * sx + ct * sy)\r\n\r\n    // Construct the decomposition and return it\r\n    return {\r\n      // Return the affine parameters\r\n      scaleX: sx,\r\n      scaleY: sy,\r\n      shear: lam,\r\n      rotate: theta,\r\n      translateX: tx,\r\n      translateY: ty,\r\n      originX: cx,\r\n      originY: cy,\r\n\r\n      // Return the matrix parameters\r\n      a: this.a,\r\n      b: this.b,\r\n      c: this.c,\r\n      d: this.d,\r\n      e: this.e,\r\n      f: this.f\r\n    }\r\n  }\r\n\r\n  // Left multiplies by the given matrix\r\n  multiply (matrix) {\r\n    return this.clone().multiplyO(matrix)\r\n  }\r\n\r\n  multiplyO (matrix) {\r\n    // Get the matrices\r\n    var l = this\r\n    var r = matrix instanceof Matrix\r\n      ? matrix\r\n      : new Matrix(matrix)\r\n\r\n    return Matrix.matrixMultiply(l, r, this)\r\n  }\r\n\r\n  lmultiply (matrix) {\r\n    return this.clone().lmultiplyO(matrix)\r\n  }\r\n\r\n  lmultiplyO (matrix) {\r\n    var r = this\r\n    var l = matrix instanceof Matrix\r\n      ? matrix\r\n      : new Matrix(matrix)\r\n\r\n    return Matrix.matrixMultiply(l, r, this)\r\n  }\r\n\r\n  // Inverses matrix\r\n  inverseO () {\r\n    // Get the current parameters out of the matrix\r\n    var a = this.a\r\n    var b = this.b\r\n    var c = this.c\r\n    var d = this.d\r\n    var e = this.e\r\n    var f = this.f\r\n\r\n    // Invert the 2x2 matrix in the top left\r\n    var det = a * d - b * c\r\n    if (!det) throw new Error('Cannot invert ' + this)\r\n\r\n    // Calculate the top 2x2 matrix\r\n    var na = d / det\r\n    var nb = -b / det\r\n    var nc = -c / det\r\n    var nd = a / det\r\n\r\n    // Apply the inverted matrix to the top right\r\n    var ne = -(na * e + nc * f)\r\n    var nf = -(nb * e + nd * f)\r\n\r\n    // Construct the inverted matrix\r\n    this.a = na\r\n    this.b = nb\r\n    this.c = nc\r\n    this.d = nd\r\n    this.e = ne\r\n    this.f = nf\r\n\r\n    return this\r\n  }\r\n\r\n  inverse () {\r\n    return this.clone().inverseO()\r\n  }\r\n\r\n  // Translate matrix\r\n  translate (x, y) {\r\n    return this.clone().translateO(x, y)\r\n  }\r\n\r\n  translateO (x, y) {\r\n    this.e += x || 0\r\n    this.f += y || 0\r\n    return this\r\n  }\r\n\r\n  // Scale matrix\r\n  scale (x, y, cx, cy) {\r\n    return this.clone().scaleO(...arguments)\r\n  }\r\n\r\n  scaleO (x, y = x, cx = 0, cy = 0) {\r\n    // Support uniform scaling\r\n    if (arguments.length === 3) {\r\n      cy = cx\r\n      cx = y\r\n      y = x\r\n    }\r\n\r\n    let { a, b, c, d, e, f } = this\r\n\r\n    this.a = a * x\r\n    this.b = b * y\r\n    this.c = c * x\r\n    this.d = d * y\r\n    this.e = e * x - cx * x + cx\r\n    this.f = f * y - cy * y + cy\r\n\r\n    return this\r\n  }\r\n\r\n  // Rotate matrix\r\n  rotate (r, cx, cy) {\r\n    return this.clone().rotateO(r, cx, cy)\r\n  }\r\n\r\n  rotateO (r, cx = 0, cy = 0) {\r\n    // Convert degrees to radians\r\n    r = radians(r)\r\n\r\n    let cos = Math.cos(r)\r\n    let sin = Math.sin(r)\r\n\r\n    let { a, b, c, d, e, f } = this\r\n\r\n    this.a = a * cos - b * sin\r\n    this.b = b * cos + a * sin\r\n    this.c = c * cos - d * sin\r\n    this.d = d * cos + c * sin\r\n    this.e = e * cos - f * sin + cy * sin - cx * cos + cx\r\n    this.f = f * cos + e * sin - cx * sin - cy * cos + cy\r\n\r\n    return this\r\n  }\r\n\r\n  // Flip matrix on x or y, at a given offset\r\n  flip (axis, around) {\r\n    return this.clone().flipO(axis, around)\r\n  }\r\n\r\n  flipO (axis, around) {\r\n    return axis === 'x' ? this.scaleO(-1, 1, around, 0)\r\n      : axis === 'y' ? this.scaleO(1, -1, 0, around)\r\n      : this.scaleO(-1, -1, axis, around || axis) // Define an x, y flip point\r\n  }\r\n\r\n  // Shear matrix\r\n  shear (a, cx, cy) {\r\n    return this.clone().shearO(a, cx, cy)\r\n  }\r\n\r\n  shearO (lx, cx = 0, cy = 0) {\r\n    let { a, b, c, d, e, f } = this\r\n\r\n    this.a = a + b * lx\r\n    this.c = c + d * lx\r\n    this.e = e + f * lx - cy * lx\r\n\r\n    return this\r\n  }\r\n\r\n  // Skew Matrix\r\n  skew (x, y, cx, cy) {\r\n    return this.clone().skewO(...arguments)\r\n  }\r\n\r\n  skewO (x, y = x, cx = 0, cy = 0) {\r\n    // support uniformal skew\r\n    if (arguments.length === 3) {\r\n      cy = cx\r\n      cx = y\r\n      y = x\r\n    }\r\n\r\n    // Convert degrees to radians\r\n    x = radians(x)\r\n    y = radians(y)\r\n\r\n    let lx = Math.tan(x)\r\n    let ly = Math.tan(y)\r\n\r\n    let { a, b, c, d, e, f } = this\r\n\r\n    this.a = a + b * lx\r\n    this.b = b + a * ly\r\n    this.c = c + d * lx\r\n    this.d = d + c * ly\r\n    this.e = e + f * lx - cy * lx\r\n    this.f = f + e * ly - cx * ly\r\n\r\n    return this\r\n  }\r\n\r\n  // SkewX\r\n  skewX (x, cx, cy) {\r\n    return this.skew(x, 0, cx, cy)\r\n  }\r\n\r\n  skewXO (x, cx, cy) {\r\n    return this.skewO(x, 0, cx, cy)\r\n  }\r\n\r\n  // SkewY\r\n  skewY (y, cx, cy) {\r\n    return this.skew(0, y, cx, cy)\r\n  }\r\n\r\n  skewYO (y, cx, cy) {\r\n    return this.skewO(0, y, cx, cy)\r\n  }\r\n\r\n  // Transform around a center point\r\n  aroundO (cx, cy, matrix) {\r\n    var dx = cx || 0\r\n    var dy = cy || 0\r\n    return this.translateO(-dx, -dy).lmultiplyO(matrix).translateO(dx, dy)\r\n  }\r\n\r\n  around (cx, cy, matrix) {\r\n    return this.clone().aroundO(cx, cy, matrix)\r\n  }\r\n\r\n  // Check if two matrices are equal\r\n  equals (other) {\r\n    var comp = new Matrix(other)\r\n    return closeEnough(this.a, comp.a) && closeEnough(this.b, comp.b)\r\n      && closeEnough(this.c, comp.c) && closeEnough(this.d, comp.d)\r\n      && closeEnough(this.e, comp.e) && closeEnough(this.f, comp.f)\r\n  }\r\n\r\n  // Convert matrix to string\r\n  toString () {\r\n    return 'matrix(' + this.a + ',' + this.b + ',' + this.c + ',' + this.d + ',' + this.e + ',' + this.f + ')'\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.a, this.b, this.c, this.d, this.e, this.f ]\r\n  }\r\n\r\n  valueOf () {\r\n    return {\r\n      a: this.a,\r\n      b: this.b,\r\n      c: this.c,\r\n      d: this.d,\r\n      e: this.e,\r\n      f: this.f\r\n    }\r\n  }\r\n\r\n  static fromArray (a) {\r\n    return { a: a[0], b: a[1], c: a[2], d: a[3], e: a[4], f: a[5] }\r\n  }\r\n\r\n  static isMatrixLike (o) {\r\n    return (\r\n      o.a != null\r\n      || o.b != null\r\n      || o.c != null\r\n      || o.d != null\r\n      || o.e != null\r\n      || o.f != null\r\n    )\r\n  }\r\n\r\n  static formatTransforms (o) {\r\n    // Get all of the parameters required to form the matrix\r\n    var flipBoth = o.flip === 'both' || o.flip === true\r\n    var flipX = o.flip && (flipBoth || o.flip === 'x') ? -1 : 1\r\n    var flipY = o.flip && (flipBoth || o.flip === 'y') ? -1 : 1\r\n    var skewX = o.skew && o.skew.length ? o.skew[0]\r\n      : isFinite(o.skew) ? o.skew\r\n      : isFinite(o.skewX) ? o.skewX\r\n      : 0\r\n    var skewY = o.skew && o.skew.length ? o.skew[1]\r\n      : isFinite(o.skew) ? o.skew\r\n      : isFinite(o.skewY) ? o.skewY\r\n      : 0\r\n    var scaleX = o.scale && o.scale.length ? o.scale[0] * flipX\r\n      : isFinite(o.scale) ? o.scale * flipX\r\n      : isFinite(o.scaleX) ? o.scaleX * flipX\r\n      : flipX\r\n    var scaleY = o.scale && o.scale.length ? o.scale[1] * flipY\r\n      : isFinite(o.scale) ? o.scale * flipY\r\n      : isFinite(o.scaleY) ? o.scaleY * flipY\r\n      : flipY\r\n    var shear = o.shear || 0\r\n    var theta = o.rotate || o.theta || 0\r\n    var origin = new Point(o.origin || o.around || o.ox || o.originX, o.oy || o.originY)\r\n    var ox = origin.x\r\n    var oy = origin.y\r\n    var position = new Point(o.position || o.px || o.positionX, o.py || o.positionY)\r\n    var px = position.x\r\n    var py = position.y\r\n    var translate = new Point(o.translate || o.tx || o.translateX, o.ty || o.translateY)\r\n    var tx = translate.x\r\n    var ty = translate.y\r\n    var relative = new Point(o.relative || o.rx || o.relativeX, o.ry || o.relativeY)\r\n    var rx = relative.x\r\n    var ry = relative.y\r\n\r\n    // Populate all of the values\r\n    return {\r\n      scaleX, scaleY, skewX, skewY, shear, theta, rx, ry, tx, ty, ox, oy, px, py\r\n    }\r\n  }\r\n\r\n  // left matrix, right matrix, target matrix which is overwritten\r\n  static matrixMultiply (l, r, o) {\r\n    // Work out the product directly\r\n    var a = l.a * r.a + l.c * r.b\r\n    var b = l.b * r.a + l.d * r.b\r\n    var c = l.a * r.c + l.c * r.d\r\n    var d = l.b * r.c + l.d * r.d\r\n    var e = l.e + l.a * r.e + l.c * r.f\r\n    var f = l.f + l.b * r.e + l.d * r.f\r\n\r\n    // make sure to use local variables because l/r and o could be the same\r\n    o.a = a\r\n    o.b = b\r\n    o.c = c\r\n    o.d = d\r\n    o.e = e\r\n    o.f = f\r\n\r\n    return o\r\n  }\r\n}\r\n\r\nexport function ctm () {\r\n  return new Matrix(this.node.getCTM())\r\n}\r\n\r\nexport function screenCTM () {\r\n  /* https://bugzilla.mozilla.org/show_bug.cgi?id=1344537\r\n     This is needed because FF does not return the transformation matrix\r\n     for the inner coordinate system when getScreenCTM() is called on nested svgs.\r\n     However all other Browsers do that */\r\n  if (typeof this.isRoot === 'function' && !this.isRoot()) {\r\n    var rect = this.rect(1, 1)\r\n    var m = rect.node.getScreenCTM()\r\n    rect.remove()\r\n    return new Matrix(m)\r\n  }\r\n  return new Matrix(this.node.getScreenCTM())\r\n}\r\n\r\nregister(Matrix, 'Matrix')\r\n","import { globals } from '../../utils/window.js'\r\nimport { makeInstance } from '../../utils/adopter.js'\r\n\r\nexport default function parser () {\r\n  // Reuse cached element if possible\r\n  if (!parser.nodes) {\r\n    let svg = makeInstance().size(2, 0)\r\n    svg.node.style.cssText = [\r\n      'opacity: 0',\r\n      'position: absolute',\r\n      'left: -100%',\r\n      'top: -100%',\r\n      'overflow: hidden'\r\n    ].join(';')\r\n\r\n    svg.attr('focusable', 'false')\r\n\r\n    let path = svg.path().node\r\n\r\n    parser.nodes = { svg, path }\r\n  }\r\n\r\n  if (!parser.nodes.svg.node.parentNode) {\r\n    let b = globals.document.body || globals.document.documentElement\r\n    parser.nodes.svg.addTo(b)\r\n  }\r\n\r\n  return parser.nodes\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { register } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Matrix from './Matrix.js'\r\nimport Point from './Point.js'\r\nimport parser from '../modules/core/parser.js'\r\n\r\nfunction isNulledBox (box) {\r\n  return !box.width && !box.height && !box.x && !box.y\r\n}\r\n\r\nfunction domContains (node) {\r\n  return node === globals.document\r\n    || (globals.document.documentElement.contains || function (node) {\r\n      // This is IE - it does not support contains() for top-level SVGs\r\n      while (node.parentNode) {\r\n        node = node.parentNode\r\n      }\r\n      return node === globals.document\r\n    }).call(globals.document.documentElement, node)\r\n}\r\n\r\nexport default class Box {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (source) {\r\n    var base = [ 0, 0, 0, 0 ]\r\n    source = typeof source === 'string' ? source.split(delimiter).map(parseFloat)\r\n      : Array.isArray(source) ? source\r\n      : typeof source === 'object' ? [ source.left != null ? source.left\r\n      : source.x, source.top != null ? source.top : source.y, source.width, source.height ]\r\n      : arguments.length === 4 ? [].slice.call(arguments)\r\n      : base\r\n\r\n    this.x = source[0] || 0\r\n    this.y = source[1] || 0\r\n    this.width = this.w = source[2] || 0\r\n    this.height = this.h = source[3] || 0\r\n\r\n    // Add more bounding box properties\r\n    this.x2 = this.x + this.w\r\n    this.y2 = this.y + this.h\r\n    this.cx = this.x + this.w / 2\r\n    this.cy = this.y + this.h / 2\r\n\r\n    return this\r\n  }\r\n\r\n  // Merge rect box with another, return a new instance\r\n  merge (box) {\r\n    let x = Math.min(this.x, box.x)\r\n    let y = Math.min(this.y, box.y)\r\n    let width = Math.max(this.x + this.width, box.x + box.width) - x\r\n    let height = Math.max(this.y + this.height, box.y + box.height) - y\r\n\r\n    return new Box(x, y, width, height)\r\n  }\r\n\r\n  transform (m) {\r\n    if (!(m instanceof Matrix)) {\r\n      m = new Matrix(m)\r\n    }\r\n\r\n    let xMin = Infinity\r\n    let xMax = -Infinity\r\n    let yMin = Infinity\r\n    let yMax = -Infinity\r\n\r\n    let pts = [\r\n      new Point(this.x, this.y),\r\n      new Point(this.x2, this.y),\r\n      new Point(this.x, this.y2),\r\n      new Point(this.x2, this.y2)\r\n    ]\r\n\r\n    pts.forEach(function (p) {\r\n      p = p.transform(m)\r\n      xMin = Math.min(xMin, p.x)\r\n      xMax = Math.max(xMax, p.x)\r\n      yMin = Math.min(yMin, p.y)\r\n      yMax = Math.max(yMax, p.y)\r\n    })\r\n\r\n    return new Box(\r\n      xMin, yMin,\r\n      xMax - xMin,\r\n      yMax - yMin\r\n    )\r\n  }\r\n\r\n  addOffset () {\r\n    // offset by window scroll position, because getBoundingClientRect changes when window is scrolled\r\n    this.x += globals.window.pageXOffset\r\n    this.y += globals.window.pageYOffset\r\n    return this\r\n  }\r\n\r\n  toString () {\r\n    return this.x + ' ' + this.y + ' ' + this.width + ' ' + this.height\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.x, this.y, this.width, this.height ]\r\n  }\r\n\r\n  isNulled () {\r\n    return isNulledBox(this)\r\n  }\r\n}\r\n\r\nfunction getBox (cb, retry) {\r\n  let box\r\n\r\n  try {\r\n    box = cb(this.node)\r\n\r\n    if (isNulledBox(box) && !domContains(this.node)) {\r\n      throw new Error('Element not in the dom')\r\n    }\r\n  } catch (e) {\r\n    box = retry(this)\r\n  }\r\n\r\n  return box\r\n}\r\n\r\nexport function bbox () {\r\n  return new Box(getBox.call(this, (node) => node.getBBox(), (el) => {\r\n    try {\r\n      let clone = el.clone().addTo(parser().svg).show()\r\n      let box = clone.node.getBBox()\r\n      clone.remove()\r\n      return box\r\n    } catch (e) {\r\n      throw new Error('Getting bbox of element \"' + el.node.nodeName + '\" is not possible. ' + e.toString())\r\n    }\r\n  }))\r\n}\r\n\r\nexport function rbox (el) {\r\n  let box = new Box(getBox.call(this, (node) => node.getBoundingClientRect(), (el) => {\r\n    throw new Error('Getting rbox of element \"' + el.node.nodeName + '\" is not possible')\r\n  }))\r\n  if (el) return box.transform(el.screenCTM().inverse())\r\n  return box.addOffset()\r\n}\r\n\r\nregisterMethods({\r\n  viewbox: {\r\n    viewbox (x, y, width, height) {\r\n      // act as getter\r\n      if (x == null) return new Box(this.attr('viewBox'))\r\n\r\n      // act as setter\r\n      return this.attr('viewBox', new Box(x, y, width, height))\r\n    },\r\n\r\n    zoom (level, point) {\r\n      let width = this.node.clientWidth\r\n      let height = this.node.clientHeight\r\n      const v = this.viewbox()\r\n\r\n      // Firefox does not support clientHeight and returns 0\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=874811\r\n      if (!width && !height) {\r\n        var style = window.getComputedStyle(this.node)\r\n        width = parseFloat(style.getPropertyValue('width'))\r\n        height = parseFloat(style.getPropertyValue('height'))\r\n      }\r\n\r\n      const zoomX = width / v.width\r\n      const zoomY = height / v.height\r\n      const zoom = Math.min(zoomX, zoomY)\r\n\r\n      if (level == null) {\r\n        return zoom\r\n      }\r\n\r\n      let zoomAmount = zoom / level\r\n      if (zoomAmount === Infinity) zoomAmount = Number.MIN_VALUE\r\n\r\n      point = point || new Point(width / 2 / zoomX + v.x, height / 2 / zoomY + v.y)\r\n\r\n      const box = new Box(v).transform(\r\n        new Matrix({ scale: zoomAmount, origin: point })\r\n      )\r\n\r\n      return this.viewbox(box)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Box, 'Box')\r\n","/* eslint no-new-func: \"off\" */\r\nexport const subClassArray = (function () {\r\n  try {\r\n    // try es6 subclassing\r\n    return Function('name', 'baseClass', '_constructor', [\r\n      'baseClass = baseClass || Array',\r\n      'return {',\r\n      '  [name]: class extends baseClass {',\r\n      '    constructor (...args) {',\r\n      '      super(...args)',\r\n      '      _constructor && _constructor.apply(this, args)',\r\n      '    }',\r\n      '  }',\r\n      '}[name]'\r\n    ].join('\\n'))\r\n  } catch (e) {\r\n    // Use es5 approach\r\n    return (name, baseClass = Array, _constructor) => {\r\n      const Arr = function () {\r\n        baseClass.apply(this, arguments)\r\n        _constructor && _constructor.apply(this, arguments)\r\n      }\r\n\r\n      Arr.prototype = Object.create(baseClass.prototype)\r\n      Arr.prototype.constructor = Arr\r\n\r\n      Arr.prototype.map = function (fn) {\r\n        const arr = new Arr()\r\n        arr.push.apply(arr, Array.prototype.map.call(this, fn))\r\n        return arr\r\n      }\r\n\r\n      return Arr\r\n    }\r\n  }\r\n})()\r\n","import { extend } from '../utils/adopter.js'\r\nimport { subClassArray } from './ArrayPolyfill.js'\r\n\r\nconst List = subClassArray('List', Array, function (arr = []) {\r\n  // This catches the case, that native map tries to create an array with new Array(1)\r\n  if (typeof arr === 'number') return this\r\n  this.length = 0\r\n  this.push(...arr)\r\n})\r\n\r\nexport default List\r\n\r\nextend(List, {\r\n  each (fnOrMethodName, ...args) {\r\n    if (typeof fnOrMethodName === 'function') {\r\n      return this.map((el) => {\r\n        return fnOrMethodName.call(el, el)\r\n      })\r\n    } else {\r\n      return this.map(el => {\r\n        return el[fnOrMethodName](...args)\r\n      })\r\n    }\r\n  },\r\n\r\n  toArray () {\r\n    return Array.prototype.concat.apply([], this)\r\n  }\r\n})\r\n\r\nconst reserved = ['toArray', 'constructor', 'each']\r\n\r\nList.extend = function (methods) {\r\n  methods = methods.reduce((obj, name) => {\r\n    // Don't overwrite own methods\r\n    if (reserved.includes(name)) return obj\r\n\r\n    // Don't add private methods\r\n    if (name[0] === '_') return obj\r\n\r\n    // Relay every call to each()\r\n    obj[name] = function (...attrs) {\r\n      return this.each(name, ...attrs)\r\n    }\r\n    return obj\r\n  }, {})\r\n\r\n  extend(List, methods)\r\n}\r\n","import { adopt } from '../../utils/adopter.js'\r\nimport { globals } from '../../utils/window.js'\r\nimport { map } from '../../utils/utils.js'\r\nimport List from '../../types/List.js'\r\n\r\nexport default function baseFind (query, parent) {\r\n  return new List(map((parent || globals.document).querySelectorAll(query), function (node) {\r\n    return adopt(node)\r\n  }))\r\n}\r\n\r\n// Scoped find method\r\nexport function find (query) {\r\n  return baseFind(query, this.node)\r\n}\r\n\r\nexport function findOne (query) {\r\n  return adopt(this.node.querySelector(query))\r\n}\r\n","import { dispatch, off, on } from '../modules/core/event.js'\nimport { register } from '../utils/adopter.js'\nimport Base from './Base.js'\n\r\nexport default class EventTarget extends Base {\r\n  constructor ({ events = {} } = {}) {\r\n    super()\r\n    this.events = events\r\n  }\r\n\r\n  addEventListener () {}\r\n\r\n  dispatch (event, data) {\r\n    return dispatch(this, event, data)\r\n  }\r\n\r\n  dispatchEvent (event) {\r\n    const bag = this.getEventHolder().events\r\n    if (!bag) return true\r\n\r\n    const events = bag[event.type]\r\n\r\n    for (let i in events) {\r\n      for (let j in events[i]) {\r\n        events[i][j](event)\r\n      }\r\n    }\r\n\r\n    return !event.defaultPrevented\r\n  }\r\n\r\n  // Fire given event\r\n  fire (event, data) {\r\n    this.dispatch(event, data)\r\n    return this\r\n  }\r\n\r\n  getEventHolder () {\r\n    return this\r\n  }\r\n\r\n  getEventTarget () {\r\n    return this\r\n  }\r\n\r\n  // Unbind event from listener\r\n  off (event, listener) {\r\n    off(this, event, listener)\r\n    return this\r\n  }\r\n\r\n  // Bind given event to listener\r\n  on (event, listener, binding, options) {\r\n    on(this, event, listener, binding, options)\r\n    return this\r\n  }\r\n\r\n  removeEventListener () {}\r\n}\r\n\r\nregister(EventTarget, 'EventTarget')\r\n","\r\nexport function noop () {}\r\n\r\n// Default animation values\r\nexport let timeline = {\r\n  duration: 400,\r\n  ease: '>',\r\n  delay: 0\r\n}\r\n\r\n// Default attribute values\r\nexport let attrs = {\r\n\r\n  // fill and stroke\r\n  'fill-opacity': 1,\r\n  'stroke-opacity': 1,\r\n  'stroke-width': 0,\r\n  'stroke-linejoin': 'miter',\r\n  'stroke-linecap': 'butt',\r\n  fill: '#000000',\r\n  stroke: '#000000',\r\n  opacity: 1,\r\n\r\n  // position\r\n  x: 0,\r\n  y: 0,\r\n  cx: 0,\r\n  cy: 0,\r\n\r\n  // size\r\n  width: 0,\r\n  height: 0,\r\n\r\n  // radius\r\n  r: 0,\r\n  rx: 0,\r\n  ry: 0,\r\n\r\n  // gradient\r\n  offset: 0,\r\n  'stop-opacity': 1,\r\n  'stop-color': '#000000',\r\n\r\n  // text\r\n  'text-anchor': 'start'\r\n}\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { extend } from '../utils/adopter.js'\r\nimport { subClassArray } from './ArrayPolyfill.js'\r\n\r\nconst SVGArray = subClassArray('SVGArray', Array, function (arr) {\r\n  this.init(arr)\r\n})\r\n\r\nexport default SVGArray\r\n\r\nextend(SVGArray, {\r\n  init (arr) {\r\n    // This catches the case, that native map tries to create an array with new Array(1)\r\n    if (typeof arr === 'number') return this\r\n    this.length = 0\r\n    this.push(...this.parse(arr))\r\n    return this\r\n  },\r\n\r\n  toArray () {\r\n    return Array.prototype.concat.apply([], this)\r\n  },\r\n\r\n  toString () {\r\n    return this.join(' ')\r\n  },\r\n\r\n  // Flattens the array if needed\r\n  valueOf () {\r\n    const ret = []\r\n    ret.push(...this)\r\n    return ret\r\n  },\r\n\r\n  // Parse whitespace separated string\r\n  parse (array = []) {\r\n    // If already is an array, no need to parse it\r\n    if (array instanceof Array) return array\r\n\r\n    return array.trim().split(delimiter).map(parseFloat)\r\n  },\r\n\r\n  clone () {\r\n    return new this.constructor(this)\r\n  },\r\n\r\n  toSet () {\r\n    return new Set(this)\r\n  }\r\n})\r\n","import { numberAndUnit } from '../modules/core/regex.js'\r\n\r\n// Module for unit convertions\r\nexport default class SVGNumber {\r\n  // Initialize\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (value, unit) {\r\n    unit = Array.isArray(value) ? value[1] : unit\r\n    value = Array.isArray(value) ? value[0] : value\r\n\r\n    // initialize defaults\r\n    this.value = 0\r\n    this.unit = unit || ''\r\n\r\n    // parse value\r\n    if (typeof value === 'number') {\r\n      // ensure a valid numeric value\r\n      this.value = isNaN(value) ? 0 : !isFinite(value) ? (value < 0 ? -3.4e+38 : +3.4e+38) : value\r\n    } else if (typeof value === 'string') {\r\n      unit = value.match(numberAndUnit)\r\n\r\n      if (unit) {\r\n        // make value numeric\r\n        this.value = parseFloat(unit[1])\r\n\r\n        // normalize\r\n        if (unit[5] === '%') {\r\n          this.value /= 100\r\n        } else if (unit[5] === 's') {\r\n          this.value *= 1000\r\n        }\r\n\r\n        // store unit\r\n        this.unit = unit[5]\r\n      }\r\n    } else {\r\n      if (value instanceof SVGNumber) {\r\n        this.value = value.valueOf()\r\n        this.unit = value.unit\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  toString () {\r\n    return (this.unit === '%' ? ~~(this.value * 1e8) / 1e6\r\n      : this.unit === 's' ? this.value / 1e3\r\n      : this.value\r\n    ) + this.unit\r\n  }\r\n\r\n  toJSON () {\r\n    return this.toString()\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.value, this.unit ]\r\n  }\r\n\r\n  valueOf () {\r\n    return this.value\r\n  }\r\n\r\n  // Add number\r\n  plus (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this + number, this.unit || number.unit)\r\n  }\r\n\r\n  // Subtract number\r\n  minus (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this - number, this.unit || number.unit)\r\n  }\r\n\r\n  // Multiply number\r\n  times (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this * number, this.unit || number.unit)\r\n  }\r\n\r\n  // Divide number\r\n  divide (number) {\r\n    number = new SVGNumber(number)\r\n    return new SVGNumber(this / number, this.unit || number.unit)\r\n  }\r\n\r\n  convert (unit) {\r\n    return new SVGNumber(this.value, unit)\r\n  }\r\n}\r\n","import { attrs as defaults } from './defaults.js'\r\nimport { isNumber } from './regex.js'\r\nimport Color from '../../types/Color.js'\r\nimport SVGArray from '../../types/SVGArray.js'\r\nimport SVGNumber from '../../types/SVGNumber.js'\r\n\r\nconst hooks = []\r\nexport function registerAttrHook (fn) {\r\n  hooks.push(fn)\r\n}\r\n\r\n// Set svg element attribute\r\nexport default function attr (attr, val, ns) {\r\n  // act as full getter\r\n  if (attr == null) {\r\n    // get an object of attributes\r\n    attr = {}\r\n    val = this.node.attributes\r\n\r\n    for (let node of val) {\r\n      attr[node.nodeName] = isNumber.test(node.nodeValue)\r\n        ? parseFloat(node.nodeValue)\r\n        : node.nodeValue\r\n    }\r\n\r\n    return attr\r\n  } else if (attr instanceof Array) {\r\n    // loop through array and get all values\r\n    return attr.reduce((last, curr) => {\r\n      last[curr] = this.attr(curr)\r\n      return last\r\n    }, {})\r\n  } else if (typeof attr === 'object' && attr.constructor === Object) {\r\n    // apply every attribute individually if an object is passed\r\n    for (val in attr) this.attr(val, attr[val])\r\n  } else if (val === null) {\r\n    // remove value\r\n    this.node.removeAttribute(attr)\r\n  } else if (val == null) {\r\n    // act as a getter if the first and only argument is not an object\r\n    val = this.node.getAttribute(attr)\r\n    return val == null ? defaults[attr]\r\n      : isNumber.test(val) ? parseFloat(val)\r\n      : val\r\n  } else {\r\n    // Loop through hooks and execute them to convert value\r\n    val = hooks.reduce((_val, hook) => {\r\n      return hook(attr, _val, this)\r\n    }, val)\r\n\r\n    // ensure correct numeric values (also accepts NaN and Infinity)\r\n    if (typeof val === 'number') {\r\n      val = new SVGNumber(val)\r\n    } else if (Color.isColor(val)) {\r\n      // ensure full hex color\r\n      val = new Color(val)\r\n    } else if (val.constructor === Array) {\r\n      // Check for plain arrays and parse array values\r\n      val = new SVGArray(val)\r\n    }\r\n\r\n    // if the passed attribute is leading...\r\n    if (attr === 'leading') {\r\n      // ... call the leading method instead\r\n      if (this.leading) {\r\n        this.leading(val)\r\n      }\r\n    } else {\r\n      // set given attribute on node\r\n      typeof ns === 'string' ? this.node.setAttributeNS(ns, attr, val.toString())\r\n        : this.node.setAttribute(attr, val.toString())\r\n    }\r\n\r\n    // rebuild if required\r\n    if (this.rebuild && (attr === 'font-size' || attr === 'x')) {\r\n      this.rebuild()\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n","import {\r\n  adopt,\r\n  assignNewId,\r\n  eid,\r\n  extend,\r\n  makeInstance,\r\n  create,\r\n  register\r\n} from '../utils/adopter.js'\r\nimport { find, findOne } from '../modules/core/selector.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { map } from '../utils/utils.js'\r\nimport { ns } from '../modules/core/namespaces.js'\r\nimport EventTarget from '../types/EventTarget.js'\r\nimport List from '../types/List.js'\r\nimport attr from '../modules/core/attr.js'\r\n\r\nexport default class Dom extends EventTarget {\r\n  constructor (node, attrs) {\r\n    super(node)\r\n    this.node = node\r\n    this.type = node.nodeName\r\n\r\n    if (attrs && node !== attrs) {\r\n      this.attr(attrs)\r\n    }\r\n  }\r\n\r\n  // Add given element at a position\r\n  add (element, i) {\r\n    element = makeInstance(element)\r\n\r\n    if (i == null) {\r\n      this.node.appendChild(element.node)\r\n    } else if (element.node !== this.node.childNodes[i]) {\r\n      this.node.insertBefore(element.node, this.node.childNodes[i])\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Add element to given container and return self\r\n  addTo (parent) {\r\n    return makeInstance(parent).put(this)\r\n  }\r\n\r\n  // Returns all child elements\r\n  children () {\r\n    return new List(map(this.node.children, function (node) {\r\n      return adopt(node)\r\n    }))\r\n  }\r\n\r\n  // Remove all elements in this container\r\n  clear () {\r\n    // remove children\r\n    while (this.node.hasChildNodes()) {\r\n      this.node.removeChild(this.node.lastChild)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Clone element\r\n  clone () {\r\n    // write dom data to the dom so the clone can pickup the data\r\n    this.writeDataToDom()\r\n\r\n    // clone element and assign new id\r\n    return assignNewId(this.node.cloneNode(true))\r\n  }\r\n\r\n  // Iterates over all children and invokes a given block\r\n  each (block, deep) {\r\n    var children = this.children()\r\n    var i, il\r\n\r\n    for (i = 0, il = children.length; i < il; i++) {\r\n      block.apply(children[i], [ i, children ])\r\n\r\n      if (deep) {\r\n        children[i].each(block, deep)\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  element (nodeName) {\r\n    return this.put(new Dom(create(nodeName)))\r\n  }\r\n\r\n  // Get first child\r\n  first () {\r\n    return adopt(this.node.firstChild)\r\n  }\r\n\r\n  // Get a element at the given index\r\n  get (i) {\r\n    return adopt(this.node.childNodes[i])\r\n  }\r\n\r\n  getEventHolder () {\r\n    return this.node\r\n  }\r\n\r\n  getEventTarget () {\r\n    return this.node\r\n  }\r\n\r\n  // Checks if the given element is a child\r\n  has (element) {\r\n    return this.index(element) >= 0\r\n  }\r\n\r\n  // Get / set id\r\n  id (id) {\r\n    // generate new id if no id set\r\n    if (typeof id === 'undefined' && !this.node.id) {\r\n      this.node.id = eid(this.type)\r\n    }\r\n\r\n    // dont't set directly width this.node.id to make `null` work correctly\r\n    return this.attr('id', id)\r\n  }\r\n\r\n  // Gets index of given element\r\n  index (element) {\r\n    return [].slice.call(this.node.childNodes).indexOf(element.node)\r\n  }\r\n\r\n  // Get the last child\r\n  last () {\r\n    return adopt(this.node.lastChild)\r\n  }\r\n\r\n  // matches the element vs a css selector\r\n  matches (selector) {\r\n    const el = this.node\r\n    return (el.matches || el.matchesSelector || el.msMatchesSelector || el.mozMatchesSelector || el.webkitMatchesSelector || el.oMatchesSelector).call(el, selector)\r\n  }\r\n\r\n  // Returns the parent element instance\r\n  parent (type) {\r\n    var parent = this\r\n\r\n    // check for parent\r\n    if (!parent.node.parentNode) return null\r\n\r\n    // get parent element\r\n    parent = adopt(parent.node.parentNode)\r\n\r\n    if (!type) return parent\r\n\r\n    // loop trough ancestors if type is given\r\n    while (parent) {\r\n      if (typeof type === 'string' ? parent.matches(type) : parent instanceof type) return parent\r\n      if (!parent.node.parentNode || parent.node.parentNode.nodeName === '#document' || parent.node.parentNode.nodeName === '#document-fragment') return null // #759, #720\r\n      parent = adopt(parent.node.parentNode)\r\n    }\r\n  }\r\n\r\n  // Basically does the same as `add()` but returns the added element instead\r\n  put (element, i) {\r\n    this.add(element, i)\r\n    return element\r\n  }\r\n\r\n  // Add element to given container and return container\r\n  putIn (parent) {\r\n    return makeInstance(parent).add(this)\r\n  }\r\n\r\n  // Remove element\r\n  remove () {\r\n    if (this.parent()) {\r\n      this.parent().removeElement(this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Remove a given child\r\n  removeElement (element) {\r\n    this.node.removeChild(element.node)\r\n\r\n    return this\r\n  }\r\n\r\n  // Replace this with element\r\n  replace (element) {\r\n    element = makeInstance(element)\r\n    this.node.parentNode.replaceChild(element.node, this.node)\r\n    return element\r\n  }\r\n\r\n  round (precision = 2, map) {\r\n    const factor = 10 ** precision\r\n    const attrs = this.attr()\r\n\r\n    // If we have no map, build one from attrs\r\n    if (!map) {\r\n      map = Object.keys(attrs)\r\n    }\r\n\r\n    // Holds rounded attributes\r\n    const newAttrs = {}\r\n    map.forEach((key) => {\r\n      newAttrs[key] = Math.round(attrs[key] * factor) / factor\r\n    })\r\n\r\n    this.attr(newAttrs)\r\n    return this\r\n  }\r\n\r\n  // Return id on string conversion\r\n  toString () {\r\n    return this.id()\r\n  }\r\n\r\n  // Import raw svg\r\n  svg (svgOrFn, outerHTML) {\r\n    var well, len, fragment\r\n\r\n    if (svgOrFn === false) {\r\n      outerHTML = false\r\n      svgOrFn = null\r\n    }\r\n\r\n    // act as getter if no svg string is given\r\n    if (svgOrFn == null || typeof svgOrFn === 'function') {\r\n      // The default for exports is, that the outerNode is included\r\n      outerHTML = outerHTML == null ? true : outerHTML\r\n\r\n      // write svgjs data to the dom\r\n      this.writeDataToDom()\r\n      let current = this\r\n\r\n      // An export modifier was passed\r\n      if (svgOrFn != null) {\r\n        current = adopt(current.node.cloneNode(true))\r\n\r\n        // If the user wants outerHTML we need to process this node, too\r\n        if (outerHTML) {\r\n          let result = svgOrFn(current)\r\n          current = result || current\r\n\r\n          // The user does not want this node? Well, then he gets nothing\r\n          if (result === false) return ''\r\n        }\r\n\r\n        // Deep loop through all children and apply modifier\r\n        current.each(function () {\r\n          let result = svgOrFn(this)\r\n          let _this = result || this\r\n\r\n          // If modifier returns false, discard node\r\n          if (result === false) {\r\n            this.remove()\r\n\r\n            // If modifier returns new node, use it\r\n          } else if (result && this !== _this) {\r\n            this.replace(_this)\r\n          }\r\n        }, true)\r\n      }\r\n\r\n      // Return outer or inner content\r\n      return outerHTML\r\n        ? current.node.outerHTML\r\n        : current.node.innerHTML\r\n    }\r\n\r\n    // Act as setter if we got a string\r\n\r\n    // The default for import is, that the current node is not replaced\r\n    outerHTML = outerHTML == null ? false : outerHTML\r\n\r\n    // Create temporary holder\r\n    well = globals.document.createElementNS(ns, 'svg')\r\n    fragment = globals.document.createDocumentFragment()\r\n\r\n    // Dump raw svg\r\n    well.innerHTML = svgOrFn\r\n\r\n    // Transplant nodes into the fragment\r\n    for (len = well.children.length; len--;) {\r\n      fragment.appendChild(well.firstElementChild)\r\n    }\r\n\r\n    let parent = this.parent()\r\n\r\n    // Add the whole fragment at once\r\n    return outerHTML\r\n      ? this.replace(fragment) && parent\r\n      : this.add(fragment)\r\n  }\r\n\r\n  words (text) {\r\n    // This is faster than removing all children and adding a new one\r\n    this.node.textContent = text\r\n    return this\r\n  }\r\n\r\n  // write svgjs data to the dom\r\n  writeDataToDom () {\r\n    // dump variables recursively\r\n    this.each(function () {\r\n      this.writeDataToDom()\r\n    })\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nextend(Dom, { attr, find, findOne })\r\nregister(Dom, 'Dom')\r\n","import { bbox, rbox } from '../types/Box.js'\r\nimport { ctm, screenCTM } from '../types/Matrix.js'\r\nimport {\r\n  extend,\r\n  getClass,\r\n  makeInstance,\r\n  register,\r\n  root\r\n} from '../utils/adopter.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { point } from '../types/Point.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { reference } from '../modules/core/regex.js'\r\nimport Dom from './Dom.js'\r\nimport List from '../types/List.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\n\r\nexport default class Element extends Dom {\r\n  constructor (node, attrs) {\r\n    super(node, attrs)\r\n\r\n    // initialize data object\r\n    this.dom = {}\r\n\r\n    // create circular reference\r\n    this.node.instance = this\r\n\r\n    if (node.hasAttribute('svgjs:data')) {\r\n      // pull svgjs data from the dom (getAttributeNS doesn't work in html5)\r\n      this.setData(JSON.parse(node.getAttribute('svgjs:data')) || {})\r\n    }\r\n  }\r\n\r\n  // Move element by its center\r\n  center (x, y) {\r\n    return this.cx(x).cy(y)\r\n  }\r\n\r\n  // Move by center over x-axis\r\n  cx (x) {\r\n    return x == null ? this.x() + this.width() / 2 : this.x(x - this.width() / 2)\r\n  }\r\n\r\n  // Move by center over y-axis\r\n  cy (y) {\r\n    return y == null\r\n      ? this.y() + this.height() / 2\r\n      : this.y(y - this.height() / 2)\r\n  }\r\n\r\n  // Get defs\r\n  defs () {\r\n    return this.root().defs()\r\n  }\r\n\r\n  // Relative move over x and y axes\r\n  dmove (x, y) {\r\n    return this.dx(x).dy(y)\r\n  }\r\n\r\n  // Relative move over x axis\r\n  dx (x) {\r\n    return this.x(new SVGNumber(x).plus(this.x()))\r\n  }\r\n\r\n  // Relative move over y axis\r\n  dy (y) {\r\n    return this.y(new SVGNumber(y).plus(this.y()))\r\n  }\r\n\r\n  // Get parent document\r\n  root () {\r\n    let p = this.parent(getClass(root))\r\n    return p && p.root()\r\n  }\r\n\r\n  getEventHolder () {\r\n    return this\r\n  }\r\n\r\n  // Set height of element\r\n  height (height) {\r\n    return this.attr('height', height)\r\n  }\r\n\r\n  // Checks whether the given point inside the bounding box of the element\r\n  inside (x, y) {\r\n    let box = this.bbox()\r\n\r\n    return x > box.x\r\n      && y > box.y\r\n      && x < box.x + box.width\r\n      && y < box.y + box.height\r\n  }\r\n\r\n  // Move element to given x and y values\r\n  move (x, y) {\r\n    return this.x(x).y(y)\r\n  }\r\n\r\n  // return array of all ancestors of given type up to the root svg\r\n  parents (until = globals.document) {\r\n    until = makeInstance(until)\r\n    let parents = new List()\r\n    let parent = this\r\n\r\n    while (\r\n      (parent = parent.parent())\r\n      && parent.node !== until.node\r\n      && parent.node !== globals.document\r\n    ) {\r\n      parents.push(parent)\r\n    }\r\n\r\n    return parents\r\n  }\r\n\r\n  // Get referenced element form attribute value\r\n  reference (attr) {\r\n    attr = this.attr(attr)\r\n    if (!attr) return null\r\n\r\n    const m = attr.match(reference)\r\n    return m ? makeInstance(m[1]) : null\r\n  }\r\n\r\n  // set given data to the elements data property\r\n  setData (o) {\r\n    this.dom = o\r\n    return this\r\n  }\r\n\r\n  // Set element size to given width and height\r\n  size (width, height) {\r\n    let p = proportionalSize(this, width, height)\r\n\r\n    return this\r\n      .width(new SVGNumber(p.width))\r\n      .height(new SVGNumber(p.height))\r\n  }\r\n\r\n  // Set width of element\r\n  width (width) {\r\n    return this.attr('width', width)\r\n  }\r\n\r\n  // write svgjs data to the dom\r\n  writeDataToDom () {\r\n    // remove previously set data\r\n    this.node.removeAttribute('svgjs:data')\r\n\r\n    if (Object.keys(this.dom).length) {\r\n      this.node.setAttribute('svgjs:data', JSON.stringify(this.dom)) // see #428\r\n    }\r\n\r\n    return super.writeDataToDom()\r\n  }\r\n\r\n  // Move over x-axis\r\n  x (x) {\r\n    return this.attr('x', x)\r\n  }\r\n\r\n  // Move over y-axis\r\n  y (y) {\r\n    return this.attr('y', y)\r\n  }\r\n}\r\n\r\nextend(Element, {\r\n  bbox, rbox, point, ctm, screenCTM\r\n})\r\n\r\nregister(Element, 'Element')\r\n","import { on, off } from '../core/event.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\nimport Color from '../../types/Color.js'\r\nimport Element from '../../elements/Element.js'\r\nimport Matrix from '../../types/Matrix.js'\r\nimport Point from '../../types/Point.js'\r\nimport SVGNumber from '../../types/SVGNumber.js'\r\n\r\n// Define list of available attributes for stroke and fill\r\nvar sugar = {\r\n  stroke: [ 'color', 'width', 'opacity', 'linecap', 'linejoin', 'miterlimit', 'dasharray', 'dashoffset' ],\r\n  fill: [ 'color', 'opacity', 'rule' ],\r\n  prefix: function (t, a) {\r\n    return a === 'color' ? t : t + '-' + a\r\n  }\r\n}\r\n\r\n// Add sugar for fill and stroke\r\n;[ 'fill', 'stroke' ].forEach(function (m) {\r\n  var extension = {}\r\n  var i\r\n\r\n  extension[m] = function (o) {\r\n    if (typeof o === 'undefined') {\r\n      return this.attr(m)\r\n    }\r\n    if (typeof o === 'string' || o instanceof Color || Color.isRgb(o) || (o instanceof Element)) {\r\n      this.attr(m, o)\r\n    } else {\r\n      // set all attributes from sugar.fill and sugar.stroke list\r\n      for (i = sugar[m].length - 1; i >= 0; i--) {\r\n        if (o[sugar[m][i]] != null) {\r\n          this.attr(sugar.prefix(m, sugar[m][i]), o[sugar[m][i]])\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  registerMethods([ 'Element', 'Runner' ], extension)\r\n})\r\n\r\nregisterMethods([ 'Element', 'Runner' ], {\r\n  // Let the user set the matrix directly\r\n  matrix: function (mat, b, c, d, e, f) {\r\n    // Act as a getter\r\n    if (mat == null) {\r\n      return new Matrix(this)\r\n    }\r\n\r\n    // Act as a setter, the user can pass a matrix or a set of numbers\r\n    return this.attr('transform', new Matrix(mat, b, c, d, e, f))\r\n  },\r\n\r\n  // Map rotation to transform\r\n  rotate: function (angle, cx, cy) {\r\n    return this.transform({ rotate: angle, ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map skew to transform\r\n  skew: function (x, y, cx, cy) {\r\n    return arguments.length === 1 || arguments.length === 3\r\n      ? this.transform({ skew: x, ox: y, oy: cx }, true)\r\n      : this.transform({ skew: [ x, y ], ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  shear: function (lam, cx, cy) {\r\n    return this.transform({ shear: lam, ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map scale to transform\r\n  scale: function (x, y, cx, cy) {\r\n    return arguments.length === 1 || arguments.length === 3\r\n      ? this.transform({ scale: x, ox: y, oy: cx }, true)\r\n      : this.transform({ scale: [ x, y ], ox: cx, oy: cy }, true)\r\n  },\r\n\r\n  // Map translate to transform\r\n  translate: function (x, y) {\r\n    return this.transform({ translate: [ x, y ] }, true)\r\n  },\r\n\r\n  // Map relative translations to transform\r\n  relative: function (x, y) {\r\n    return this.transform({ relative: [ x, y ] }, true)\r\n  },\r\n\r\n  // Map flip to transform\r\n  flip: function (direction, around) {\r\n    var directionString = typeof direction === 'string' ? direction\r\n      : isFinite(direction) ? 'both'\r\n      : 'both'\r\n    var origin = (direction === 'both' && isFinite(around)) ? [ around, around ]\r\n      : (direction === 'x') ? [ around, 0 ]\r\n      : (direction === 'y') ? [ 0, around ]\r\n      : isFinite(direction) ? [ direction, direction ]\r\n      : [ 0, 0 ]\r\n    return this.transform({ flip: directionString, origin: origin }, true)\r\n  },\r\n\r\n  // Opacity\r\n  opacity: function (value) {\r\n    return this.attr('opacity', value)\r\n  }\r\n})\r\n\r\nregisterMethods('radius', {\r\n  // Add x and y radius\r\n  radius: function (x, y) {\r\n    var type = (this._element || this).type\r\n    return type === 'radialGradient' || type === 'radialGradient'\r\n      ? this.attr('r', new SVGNumber(x))\r\n      : this.rx(x).ry(y == null ? x : y)\r\n  }\r\n})\r\n\r\nregisterMethods('Path', {\r\n  // Get path length\r\n  length: function () {\r\n    return this.node.getTotalLength()\r\n  },\r\n  // Get point at length\r\n  pointAt: function (length) {\r\n    return new Point(this.node.getPointAtLength(length))\r\n  }\r\n})\r\n\r\nregisterMethods([ 'Element', 'Runner' ], {\r\n  // Set font\r\n  font: function (a, v) {\r\n    if (typeof a === 'object') {\r\n      for (v in a) this.font(v, a[v])\r\n      return this\r\n    }\r\n\r\n    return a === 'leading'\r\n      ? this.leading(v)\r\n      : a === 'anchor'\r\n        ? this.attr('text-anchor', v)\r\n        : a === 'size' || a === 'family' || a === 'weight' || a === 'stretch' || a === 'variant' || a === 'style'\r\n          ? this.attr('font-' + a, v)\r\n          : this.attr(a, v)\r\n  }\r\n})\r\n\r\nregisterMethods('Text', {\r\n  ax (x) {\r\n    return this.attr('x', x)\r\n  },\r\n  ay (y) {\r\n    return this.attr('y', y)\r\n  },\r\n  amove (x, y) {\r\n    return this.ax(x).ay(y)\r\n  }\r\n})\r\n\r\n// Add events to elements\r\nconst methods = [ 'click',\r\n  'dblclick',\r\n  'mousedown',\r\n  'mouseup',\r\n  'mouseover',\r\n  'mouseout',\r\n  'mousemove',\r\n  'mouseenter',\r\n  'mouseleave',\r\n  'touchstart',\r\n  'touchmove',\r\n  'touchleave',\r\n  'touchend',\r\n  'touchcancel' ].reduce(function (last, event) {\r\n  // add event to Element\r\n  const fn = function (f) {\r\n    if (f === null) {\r\n      off(this, event)\r\n    } else {\r\n      on(this, event, f)\r\n    }\r\n    return this\r\n  }\r\n\r\n  last[event] = fn\r\n  return last\r\n}, {})\r\n\r\nregisterMethods('Element', methods)\r\n","import SVGNumber from '../../types/SVGNumber.js'\r\n\r\n// Radius x value\r\nexport function rx (rx) {\r\n  return this.attr('rx', rx)\r\n}\r\n\r\n// Radius y value\r\nexport function ry (ry) {\r\n  return this.attr('ry', ry)\r\n}\r\n\r\n// Move over x-axis\r\nexport function x (x) {\r\n  return x == null\r\n    ? this.cx() - this.rx()\r\n    : this.cx(x + this.rx())\r\n}\r\n\r\n// Move over y-axis\r\nexport function y (y) {\r\n  return y == null\r\n    ? this.cy() - this.ry()\r\n    : this.cy(y + this.ry())\r\n}\r\n\r\n// Move by center over x-axis\r\nexport function cx (x) {\r\n  return x == null\r\n    ? this.attr('cx')\r\n    : this.attr('cx', x)\r\n}\r\n\r\n// Move by center over y-axis\r\nexport function cy (y) {\r\n  return y == null\r\n    ? this.attr('cy')\r\n    : this.attr('cy', y)\r\n}\r\n\r\n// Set width of element\r\nexport function width (width) {\r\n  return width == null\r\n    ? this.rx() * 2\r\n    : this.rx(new SVGNumber(width).divide(2))\r\n}\r\n\r\n// Set height of element\r\nexport function height (height) {\r\n  return height == null\r\n    ? this.ry() * 2\r\n    : this.ry(new SVGNumber(height).divide(2))\r\n}\r\n","import { getOrigin } from '../../utils/utils.js'\r\nimport { delimiter, transforms } from '../core/regex.js'\r\nimport { registerMethods } from '../../utils/methods.js'\r\nimport Matrix from '../../types/Matrix.js'\r\n\r\n// Reset all transformations\r\nexport function untransform () {\r\n  return this.attr('transform', null)\r\n}\r\n\r\n// merge the whole transformation chain into one matrix and returns it\r\nexport function matrixify () {\r\n  var matrix = (this.attr('transform') || '')\r\n    // split transformations\r\n    .split(transforms).slice(0, -1).map(function (str) {\r\n      // generate key => value pairs\r\n      var kv = str.trim().split('(')\r\n      return [ kv[0],\r\n        kv[1].split(delimiter)\r\n          .map(function (str) {\r\n            return parseFloat(str)\r\n          })\r\n      ]\r\n    })\r\n    .reverse()\r\n    // merge every transformation into one matrix\r\n    .reduce(function (matrix, transform) {\r\n      if (transform[0] === 'matrix') {\r\n        return matrix.lmultiply(Matrix.fromArray(transform[1]))\r\n      }\r\n      return matrix[transform[0]].apply(matrix, transform[1])\r\n    }, new Matrix())\r\n\r\n  return matrix\r\n}\r\n\r\n// add an element to another parent without changing the visual representation on the screen\r\nexport function toParent (parent) {\r\n  if (this === parent) return this\r\n  var ctm = this.screenCTM()\r\n  var pCtm = parent.screenCTM().inverse()\r\n\r\n  this.addTo(parent).untransform().transform(pCtm.multiply(ctm))\r\n\r\n  return this\r\n}\r\n\r\n// same as above with parent equals root-svg\r\nexport function toRoot () {\r\n  return this.toParent(this.root())\r\n}\r\n\r\n// Add transformations\r\nexport function transform (o, relative) {\r\n  // Act as a getter if no object was passed\r\n  if (o == null || typeof o === 'string') {\r\n    var decomposed = new Matrix(this).decompose()\r\n    return o == null ? decomposed : decomposed[o]\r\n  }\r\n\r\n  if (!Matrix.isMatrixLike(o)) {\r\n    // Set the origin according to the defined transform\r\n    o = { ...o, origin: getOrigin(o, this) }\r\n  }\r\n\r\n  // The user can pass a boolean, an Element or an Matrix or nothing\r\n  var cleanRelative = relative === true ? this : (relative || false)\r\n  var result = new Matrix(cleanRelative).transform(o)\r\n  return this.attr('transform', result)\r\n}\r\n\r\nregisterMethods('Element', {\r\n  untransform, matrixify, toParent, toRoot, transform\r\n})\r\n","import { register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\n\r\nexport default class Shape extends Element {}\r\n\r\nregister(Shape, 'Shape')\r\n","import { cx, cy, height, width, x, y } from '../modules/core/circled.js'\r\nimport {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Circle extends Shape {\r\n  constructor (node) {\r\n    super(nodeOrNew('circle', node), node)\r\n  }\r\n\r\n  radius (r) {\r\n    return this.attr('r', r)\r\n  }\r\n\r\n  // Radius x value\r\n  rx (rx) {\r\n    return this.attr('r', rx)\r\n  }\r\n\r\n  // Alias radius x value\r\n  ry (ry) {\r\n    return this.rx(ry)\r\n  }\r\n\r\n  size (size) {\r\n    return this.radius(new SVGNumber(size).divide(2))\r\n  }\r\n}\r\n\r\nextend(Circle, { x, y, cx, cy, width, height })\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create circle element\r\n    circle: wrapWithAttrCheck(function (size) {\r\n      return this.put(new Circle())\r\n        .size(size)\r\n        .move(0, 0)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Circle, 'Circle')\r\n","import { register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\n\r\nexport default class Container extends Element {\r\n  flatten (parent) {\r\n    this.each(function () {\r\n      if (this instanceof Container) return this.flatten(parent).ungroup(parent)\r\n      return this.toParent(parent)\r\n    })\r\n\r\n    // we need this so that the root does not get removed\r\n    this.node.firstElementChild || this.remove()\r\n\r\n    return this\r\n  }\r\n\r\n  ungroup (parent) {\r\n    parent = parent || this.parent()\r\n\r\n    this.each(function () {\r\n      return this.toParent(parent)\r\n    })\r\n\r\n    this.remove()\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nregister(Container, 'Container')\r\n","import { nodeOrNew, register } from '../utils/adopter.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Defs extends Container {\r\n  constructor (node) {\r\n    super(nodeOrNew('defs', node), node)\r\n  }\r\n\r\n  flatten () {\r\n    return this\r\n  }\r\n  ungroup () {\r\n    return this\r\n  }\r\n}\r\n\r\nregister(Defs, 'Defs')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\nimport * as circled from '../modules/core/circled.js'\r\n\r\nexport default class Ellipse extends Shape {\r\n  constructor (node) {\r\n    super(nodeOrNew('ellipse', node), node)\r\n  }\r\n\r\n  size (width, height) {\r\n    var p = proportionalSize(this, width, height)\r\n\r\n    return this\r\n      .rx(new SVGNumber(p.width).divide(2))\r\n      .ry(new SVGNumber(p.height).divide(2))\r\n  }\r\n}\r\n\r\nextend(Ellipse, circled)\r\n\r\nregisterMethods('Container', {\r\n  // Create an ellipse\r\n  ellipse: wrapWithAttrCheck(function (width = 0, height = width) {\r\n    return this.put(new Ellipse()).size(width, height).move(0, 0)\r\n  })\r\n})\r\n\r\nregister(Ellipse, 'Ellipse')\r\n","import { nodeOrNew, register } from '../utils/adopter.js'\r\nimport Element from './Element.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\n\r\nexport default class Stop extends Element {\r\n  constructor (node) {\r\n    super(nodeOrNew('stop', node), node)\r\n  }\r\n\r\n  // add color stops\r\n  update (o) {\r\n    if (typeof o === 'number' || o instanceof SVGNumber) {\r\n      o = {\r\n        offset: arguments[0],\r\n        color: arguments[1],\r\n        opacity: arguments[2]\r\n      }\r\n    }\r\n\r\n    // set attributes\r\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n    if (o.color != null) this.attr('stop-color', o.color)\r\n    if (o.offset != null) this.attr('offset', new SVGNumber(o.offset))\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nregister(Stop, 'Stop')\r\n","import SVGNumber from '../../types/SVGNumber.js'\r\n\r\nexport function from (x, y) {\r\n  return (this._element || this).type === 'radialGradient'\r\n    ? this.attr({ fx: new SVGNumber(x), fy: new SVGNumber(y) })\r\n    : this.attr({ x1: new SVGNumber(x), y1: new SVGNumber(y) })\r\n}\r\n\r\nexport function to (x, y) {\r\n  return (this._element || this).type === 'radialGradient'\r\n    ? this.attr({ cx: new SVGNumber(x), cy: new SVGNumber(y) })\r\n    : this.attr({ x2: new SVGNumber(x), y2: new SVGNumber(y) })\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Box from '../types/Box.js'\r\nimport Container from './Container.js'\r\nimport Stop from './Stop.js'\r\nimport baseFind from '../modules/core/selector.js'\r\nimport * as gradiented from '../modules/core/gradiented.js'\r\n\r\nexport default class Gradient extends Container {\r\n  constructor (type, attrs) {\r\n    super(\r\n      nodeOrNew(type + 'Gradient', typeof type === 'string' ? null : type),\r\n      attrs\r\n    )\r\n  }\r\n\r\n  // Add a color stop\r\n  stop (offset, color, opacity) {\r\n    return this.put(new Stop()).update(offset, color, opacity)\r\n  }\r\n\r\n  // Update gradient\r\n  update (block) {\r\n    // remove all stops\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Return the fill id\r\n  url () {\r\n    return 'url(#' + this.id() + ')'\r\n  }\r\n\r\n  // Alias string convertion to fill\r\n  toString () {\r\n    return this.url()\r\n  }\r\n\r\n  // custom attr to handle transform\r\n  attr (a, b, c) {\r\n    if (a === 'transform') a = 'gradientTransform'\r\n    return super.attr(a, b, c)\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [fill*=\"' + this.id() + '\"]')\r\n  }\r\n\r\n  bbox () {\r\n    return new Box()\r\n  }\r\n}\r\n\r\nextend(Gradient, gradiented)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create gradient element in defs\r\n    gradient: wrapWithAttrCheck(function (type, block) {\r\n      return this.defs().gradient(type, block)\r\n    })\r\n  },\r\n  // define gradient\r\n  Defs: {\r\n    gradient: wrapWithAttrCheck(function (type, block) {\r\n      return this.put(new Gradient(type)).update(block)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Gradient, 'Gradient')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Box from '../types/Box.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class Pattern extends Container {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('pattern', node), node)\r\n  }\r\n\r\n  // Return the fill id\r\n  url () {\r\n    return 'url(#' + this.id() + ')'\r\n  }\r\n\r\n  // Update pattern by rebuilding\r\n  update (block) {\r\n    // remove content\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Alias string convertion to fill\r\n  toString () {\r\n    return this.url()\r\n  }\r\n\r\n  // custom attr to handle transform\r\n  attr (a, b, c) {\r\n    if (a === 'transform') a = 'patternTransform'\r\n    return super.attr(a, b, c)\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [fill*=\"' + this.id() + '\"]')\r\n  }\r\n\r\n  bbox () {\r\n    return new Box()\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create pattern element in defs\r\n    pattern (...args) {\r\n      return this.defs().pattern(...args)\r\n    }\r\n  },\r\n  Defs: {\r\n    pattern: wrapWithAttrCheck(function (width, height, block) {\r\n      return this.put(new Pattern()).update(block).attr({\r\n        x: 0,\r\n        y: 0,\r\n        width: width,\r\n        height: height,\r\n        patternUnits: 'userSpaceOnUse'\r\n      })\r\n    })\r\n  }\r\n})\r\n\r\nregister(Pattern, 'Pattern')\r\n","import { isImage } from '../modules/core/regex.js'\r\nimport { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { off, on } from '../modules/core/event.js'\r\nimport { registerAttrHook } from '../modules/core/attr.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Pattern from './Pattern.js'\r\nimport Shape from './Shape.js'\r\nimport { globals } from '../utils/window.js'\r\n\r\nexport default class Image extends Shape {\r\n  constructor (node) {\r\n    super(nodeOrNew('image', node), node)\r\n  }\r\n\r\n  // (re)load image\r\n  load (url, callback) {\r\n    if (!url) return this\r\n\r\n    var img = new globals.window.Image()\r\n\r\n    on(img, 'load', function (e) {\r\n      var p = this.parent(Pattern)\r\n\r\n      // ensure image size\r\n      if (this.width() === 0 && this.height() === 0) {\r\n        this.size(img.width, img.height)\r\n      }\r\n\r\n      if (p instanceof Pattern) {\r\n        // ensure pattern size if not set\r\n        if (p.width() === 0 && p.height() === 0) {\r\n          p.size(this.width(), this.height())\r\n        }\r\n      }\r\n\r\n      if (typeof callback === 'function') {\r\n        callback.call(this, e)\r\n      }\r\n    }, this)\r\n\r\n    on(img, 'load error', function () {\r\n      // dont forget to unbind memory leaking events\r\n      off(img)\r\n    })\r\n\r\n    return this.attr('href', (img.src = url), xlink)\r\n  }\r\n}\r\n\r\nregisterAttrHook(function (attr, val, _this) {\r\n  // convert image fill and stroke to patterns\r\n  if (attr === 'fill' || attr === 'stroke') {\r\n    if (isImage.test(val)) {\r\n      val = _this.root().defs().image(val)\r\n    }\r\n  }\r\n\r\n  if (val instanceof Image) {\r\n    val = _this.root().defs().pattern(0, 0, (pattern) => {\r\n      pattern.add(val)\r\n    })\r\n  }\r\n\r\n  return val\r\n})\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // create image element, load image and set its size\r\n    image: wrapWithAttrCheck(function (source, callback) {\r\n      return this.put(new Image()).size(0, 0).load(source, callback)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Image, 'Image')\r\n","import { delimiter } from '../modules/core/regex.js'\r\nimport { extend } from '../utils/adopter.js'\r\nimport { subClassArray } from './ArrayPolyfill.js'\r\nimport SVGArray from './SVGArray.js'\r\n\r\nconst PointArray = subClassArray('PointArray', SVGArray)\r\n\r\nexport default PointArray\r\n\r\nextend(PointArray, {\r\n  // Convert array to string\r\n  toString () {\r\n    // convert to a poly point string\r\n    for (var i = 0, il = this.length, array = []; i < il; i++) {\r\n      array.push(this[i].join(','))\r\n    }\r\n\r\n    return array.join(' ')\r\n  },\r\n\r\n  // Convert array to line object\r\n  toLine () {\r\n    return {\r\n      x1: this[0][0],\r\n      y1: this[0][1],\r\n      x2: this[1][0],\r\n      y2: this[1][1]\r\n    }\r\n  },\r\n\r\n  // Get morphed array at given position\r\n  at (pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    // generate morphed point string\r\n    for (var i = 0, il = this.length, array = []; i < il; i++) {\r\n      array.push([\r\n        this[i][0] + (this.destination[i][0] - this[i][0]) * pos,\r\n        this[i][1] + (this.destination[i][1] - this[i][1]) * pos\r\n      ])\r\n    }\r\n\r\n    return new PointArray(array)\r\n  },\r\n\r\n  // Parse point string and flat array\r\n  parse (array = [ [ 0, 0 ] ]) {\r\n    var points = []\r\n\r\n    // if it is an array\r\n    if (array instanceof Array) {\r\n      // and it is not flat, there is no need to parse it\r\n      if (array[0] instanceof Array) {\r\n        return array\r\n      }\r\n    } else { // Else, it is considered as a string\r\n      // parse points\r\n      array = array.trim().split(delimiter).map(parseFloat)\r\n    }\r\n\r\n    // validate points - https://svgwg.org/svg2-draft/shapes.html#DataTypePoints\r\n    // Odd number of coordinates is an error. In such cases, drop the last odd coordinate.\r\n    if (array.length % 2 !== 0) array.pop()\r\n\r\n    // wrap points in two-tuples\r\n    for (var i = 0, len = array.length; i < len; i = i + 2) {\r\n      points.push([ array[i], array[i + 1] ])\r\n    }\r\n\r\n    return points\r\n  },\r\n\r\n  // transform points with matrix (similar to Point.transform)\r\n  transform (m) {\r\n    const points = []\r\n\r\n    for (let i = 0; i < this.length; i++) {\r\n      const point = this[i]\r\n      // Perform the matrix multiplication\r\n      points.push([\r\n        m.a * point[0] + m.c * point[1] + m.e,\r\n        m.b * point[0] + m.d * point[1] + m.f\r\n      ])\r\n    }\r\n\r\n    // Return the required point\r\n    return new PointArray(points)\r\n  },\r\n\r\n  // Move point string\r\n  move (x, y) {\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    // move every point\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      for (var i = this.length - 1; i >= 0; i--) {\r\n        this[i] = [ this[i][0] + x, this[i][1] + y ]\r\n      }\r\n    }\r\n\r\n    return this\r\n  },\r\n\r\n  // Resize poly string\r\n  size (width, height) {\r\n    var i\r\n    var box = this.bbox()\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.length - 1; i >= 0; i--) {\r\n      if (box.width) this[i][0] = ((this[i][0] - box.x) * width) / box.width + box.x\r\n      if (box.height) this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\r\n    }\r\n\r\n    return this\r\n  },\r\n\r\n  // Get bounding box of points\r\n  bbox () {\r\n    var maxX = -Infinity\r\n    var maxY = -Infinity\r\n    var minX = Infinity\r\n    var minY = Infinity\r\n    this.forEach(function (el) {\r\n      maxX = Math.max(el[0], maxX)\r\n      maxY = Math.max(el[1], maxY)\r\n      minX = Math.min(el[0], minX)\r\n      minY = Math.min(el[1], minY)\r\n    })\r\n    return { x: minX, y: minY, width: maxX - minX, height: maxY - minY }\r\n  }\r\n})\r\n","import PointArray from '../../types/PointArray.js'\r\n\r\nexport let MorphArray = PointArray\r\n\r\n// Move by left top corner over x-axis\r\nexport function x (x) {\r\n  return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n}\r\n\r\n// Move by left top corner over y-axis\r\nexport function y (y) {\r\n  return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n}\r\n\r\n// Set width of element\r\nexport function width (width) {\r\n  let b = this.bbox()\r\n  return width == null ? b.width : this.size(width, b.height)\r\n}\r\n\r\n// Set height of element\r\nexport function height (height) {\r\n  let b = this.bbox()\r\n  return height == null ? b.height : this.size(b.width, height)\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\n\r\nexport default class Line extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('line', node), node)\r\n  }\r\n\r\n  // Get array\r\n  array () {\r\n    return new PointArray([\r\n      [ this.attr('x1'), this.attr('y1') ],\r\n      [ this.attr('x2'), this.attr('y2') ]\r\n    ])\r\n  }\r\n\r\n  // Overwrite native plot() method\r\n  plot (x1, y1, x2, y2) {\r\n    if (x1 == null) {\r\n      return this.array()\r\n    } else if (typeof y1 !== 'undefined') {\r\n      x1 = { x1: x1, y1: y1, x2: x2, y2: y2 }\r\n    } else {\r\n      x1 = new PointArray(x1).toLine()\r\n    }\r\n\r\n    return this.attr(x1)\r\n  }\r\n\r\n  // Move by left top corner\r\n  move (x, y) {\r\n    return this.attr(this.array().move(x, y).toLine())\r\n  }\r\n\r\n  // Set element size to given width and height\r\n  size (width, height) {\r\n    var p = proportionalSize(this, width, height)\r\n    return this.attr(this.array().size(p.width, p.height).toLine())\r\n  }\r\n}\r\n\r\nextend(Line, pointed)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a line element\r\n    line: wrapWithAttrCheck(function (...args) {\r\n      // make sure plot is called as a setter\r\n      // x1 is not necessarily a number, it can also be an array, a string and a PointArray\r\n      return Line.prototype.plot.apply(\r\n        this.put(new Line())\r\n        , args[0] != null ? args : [ 0, 0, 0, 0 ]\r\n      )\r\n    })\r\n  }\r\n})\r\n\r\nregister(Line, 'Line')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Marker extends Container {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('marker', node), node)\r\n  }\r\n\r\n  // Set width of element\r\n  width (width) {\r\n    return this.attr('markerWidth', width)\r\n  }\r\n\r\n  // Set height of element\r\n  height (height) {\r\n    return this.attr('markerHeight', height)\r\n  }\r\n\r\n  // Set marker refX and refY\r\n  ref (x, y) {\r\n    return this.attr('refX', x).attr('refY', y)\r\n  }\r\n\r\n  // Update marker\r\n  update (block) {\r\n    // remove all content\r\n    this.clear()\r\n\r\n    // invoke passed block\r\n    if (typeof block === 'function') {\r\n      block.call(this, this)\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Return the fill id\r\n  toString () {\r\n    return 'url(#' + this.id() + ')'\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    marker (...args) {\r\n      // Create marker element in defs\r\n      return this.defs().marker(...args)\r\n    }\r\n  },\r\n  Defs: {\r\n    // Create marker\r\n    marker: wrapWithAttrCheck(function (width, height, block) {\r\n      // Set default viewbox to match the width and height, set ref to cx and cy and set orient to auto\r\n      return this.put(new Marker())\r\n        .size(width, height)\r\n        .ref(width / 2, height / 2)\r\n        .viewbox(0, 0, width, height)\r\n        .attr('orient', 'auto')\r\n        .update(block)\r\n    })\r\n  },\r\n  marker: {\r\n    // Create and attach markers\r\n    marker (marker, width, height, block) {\r\n      var attr = [ 'marker' ]\r\n\r\n      // Build attribute name\r\n      if (marker !== 'all') attr.push(marker)\r\n      attr = attr.join('-')\r\n\r\n      // Set marker attribute\r\n      marker = arguments[1] instanceof Marker\r\n        ? arguments[1]\r\n        : this.defs().marker(width, height, block)\r\n\r\n      return this.attr(attr, marker)\r\n    }\r\n  }\r\n})\r\n\r\nregister(Marker, 'Marker')\r\n","import { timeline } from '../modules/core/defaults.js'\r\nimport { extend } from '../utils/adopter.js'\r\n\r\n/***\r\nBase Class\r\n==========\r\nThe base stepper class that will be\r\n***/\r\n\r\nfunction makeSetterGetter (k, f) {\r\n  return function (v) {\r\n    if (v == null) return this[v]\r\n    this[k] = v\r\n    if (f) f.call(this)\r\n    return this\r\n  }\r\n}\r\n\r\nexport let easing = {\r\n  '-': function (pos) {\r\n    return pos\r\n  },\r\n  '<>': function (pos) {\r\n    return -Math.cos(pos * Math.PI) / 2 + 0.5\r\n  },\r\n  '>': function (pos) {\r\n    return Math.sin(pos * Math.PI / 2)\r\n  },\r\n  '<': function (pos) {\r\n    return -Math.cos(pos * Math.PI / 2) + 1\r\n  },\r\n  bezier: function (x1, y1, x2, y2) {\r\n    // see https://www.w3.org/TR/css-easing-1/#cubic-bezier-algo\r\n    return function (t) {\r\n      if (t < 0) {\r\n        if (x1 > 0) {\r\n          return y1 / x1 * t\r\n        } else if (x2 > 0) {\r\n          return y2 / x2 * t\r\n        } else {\r\n          return 0\r\n        }\r\n      } else if (t > 1) {\r\n        if (x2 < 1) {\r\n          return (1 - y2) / (1 - x2) * t + (y2 - x2) / (1 - x2)\r\n        } else if (x1 < 1) {\r\n          return (1 - y1) / (1 - x1) * t + (y1 - x1) / (1 - x1)\r\n        } else {\r\n          return 1\r\n        }\r\n      } else {\r\n        return 3 * t * (1 - t) ** 2 * y1 + 3 * t ** 2 * (1 - t) * y2 + t ** 3\r\n      }\r\n    }\r\n  },\r\n  // see https://www.w3.org/TR/css-easing-1/#step-timing-function-algo\r\n  steps: function (steps, stepPosition = 'end') {\r\n    // deal with \"jump-\" prefix\r\n    stepPosition = stepPosition.split('-').reverse()[0]\r\n\r\n    let jumps = steps\r\n    if (stepPosition === 'none') {\r\n      --jumps\r\n    } else if (stepPosition === 'both') {\r\n      ++jumps\r\n    }\r\n\r\n    // The beforeFlag is essentially useless\r\n    return (t, beforeFlag = false) => {\r\n      // Step is called currentStep in referenced url\r\n      let step = Math.floor(t * steps)\r\n      const jumping = (t * step) % 1 === 0\r\n\r\n      if (stepPosition === 'start' || stepPosition === 'both') {\r\n        ++step\r\n      }\r\n\r\n      if (beforeFlag && jumping) {\r\n        --step\r\n      }\r\n\r\n      if (t >= 0 && step < 0) {\r\n        step = 0\r\n      }\r\n\r\n      if (t <= 1 && step > jumps) {\r\n        step = jumps\r\n      }\r\n\r\n      return step / jumps\r\n    }\r\n  }\r\n}\r\n\r\nexport class Stepper {\r\n  done () {\r\n    return false\r\n  }\r\n}\r\n\r\n/***\r\nEasing Functions\r\n================\r\n***/\r\n\r\nexport class Ease extends Stepper {\r\n  constructor (fn) {\r\n    super()\r\n    this.ease = easing[fn || timeline.ease] || fn\r\n  }\r\n\r\n  step (from, to, pos) {\r\n    if (typeof from !== 'number') {\r\n      return pos < 1 ? from : to\r\n    }\r\n    return from + (to - from) * this.ease(pos)\r\n  }\r\n}\r\n\r\n/***\r\nController Types\r\n================\r\n***/\r\n\r\nexport class Controller extends Stepper {\r\n  constructor (fn) {\r\n    super()\r\n    this.stepper = fn\r\n  }\r\n\r\n  step (current, target, dt, c) {\r\n    return this.stepper(current, target, dt, c)\r\n  }\r\n\r\n  done (c) {\r\n    return c.done\r\n  }\r\n}\r\n\r\nfunction recalculate () {\r\n  // Apply the default parameters\r\n  var duration = (this._duration || 500) / 1000\r\n  var overshoot = this._overshoot || 0\r\n\r\n  // Calculate the PID natural response\r\n  var eps = 1e-10\r\n  var pi = Math.PI\r\n  var os = Math.log(overshoot / 100 + eps)\r\n  var zeta = -os / Math.sqrt(pi * pi + os * os)\r\n  var wn = 3.9 / (zeta * duration)\r\n\r\n  // Calculate the Spring values\r\n  this.d = 2 * zeta * wn\r\n  this.k = wn * wn\r\n}\r\n\r\nexport class Spring extends Controller {\r\n  constructor (duration, overshoot) {\r\n    super()\r\n    this.duration(duration || 500)\r\n      .overshoot(overshoot || 0)\r\n  }\r\n\r\n  step (current, target, dt, c) {\r\n    if (typeof current === 'string') return current\r\n    c.done = dt === Infinity\r\n    if (dt === Infinity) return target\r\n    if (dt === 0) return current\r\n\r\n    if (dt > 100) dt = 16\r\n\r\n    dt /= 1000\r\n\r\n    // Get the previous velocity\r\n    var velocity = c.velocity || 0\r\n\r\n    // Apply the control to get the new position and store it\r\n    var acceleration = -this.d * velocity - this.k * (current - target)\r\n    var newPosition = current\r\n      + velocity * dt\r\n      + acceleration * dt * dt / 2\r\n\r\n    // Store the velocity\r\n    c.velocity = velocity + acceleration * dt\r\n\r\n    // Figure out if we have converged, and if so, pass the value\r\n    c.done = Math.abs(target - newPosition) + Math.abs(velocity) < 0.002\r\n    return c.done ? target : newPosition\r\n  }\r\n}\r\n\r\nextend(Spring, {\r\n  duration: makeSetterGetter('_duration', recalculate),\r\n  overshoot: makeSetterGetter('_overshoot', recalculate)\r\n})\r\n\r\nexport class PID extends Controller {\r\n  constructor (p, i, d, windup) {\r\n    super()\r\n\r\n    p = p == null ? 0.1 : p\r\n    i = i == null ? 0.01 : i\r\n    d = d == null ? 0 : d\r\n    windup = windup == null ? 1000 : windup\r\n    this.p(p).i(i).d(d).windup(windup)\r\n  }\r\n\r\n  step (current, target, dt, c) {\r\n    if (typeof current === 'string') return current\r\n    c.done = dt === Infinity\r\n\r\n    if (dt === Infinity) return target\r\n    if (dt === 0) return current\r\n\r\n    var p = target - current\r\n    var i = (c.integral || 0) + p * dt\r\n    var d = (p - (c.error || 0)) / dt\r\n    var windup = this.windup\r\n\r\n    // antiwindup\r\n    if (windup !== false) {\r\n      i = Math.max(-windup, Math.min(i, windup))\r\n    }\r\n\r\n    c.error = p\r\n    c.integral = i\r\n\r\n    c.done = Math.abs(p) < 0.001\r\n\r\n    return c.done ? target : current + (this.P * p + this.I * i + this.D * d)\r\n  }\r\n}\r\n\r\nextend(PID, {\r\n  windup: makeSetterGetter('windup'),\r\n  p: makeSetterGetter('P'),\r\n  i: makeSetterGetter('I'),\r\n  d: makeSetterGetter('D')\r\n})\r\n","import {\r\n  delimiter,\r\n  dots,\r\n  hyphen,\r\n  isPathLetter,\r\n  numbersWithDots,\r\n  pathLetters\r\n} from '../modules/core/regex.js'\r\nimport { extend } from '../utils/adopter.js'\r\nimport { subClassArray } from './ArrayPolyfill.js'\r\nimport Point from './Point.js'\r\nimport SVGArray from './SVGArray.js'\r\nimport parser from '../modules/core/parser.js'\r\n\r\nconst PathArray = subClassArray('PathArray', SVGArray)\r\n\r\nexport default PathArray\r\n\r\nexport function pathRegReplace (a, b, c, d) {\r\n  return c + d.replace(dots, ' .')\r\n}\r\n\r\nfunction arrayToString (a) {\r\n  for (var i = 0, il = a.length, s = ''; i < il; i++) {\r\n    s += a[i][0]\r\n\r\n    if (a[i][1] != null) {\r\n      s += a[i][1]\r\n\r\n      if (a[i][2] != null) {\r\n        s += ' '\r\n        s += a[i][2]\r\n\r\n        if (a[i][3] != null) {\r\n          s += ' '\r\n          s += a[i][3]\r\n          s += ' '\r\n          s += a[i][4]\r\n\r\n          if (a[i][5] != null) {\r\n            s += ' '\r\n            s += a[i][5]\r\n            s += ' '\r\n            s += a[i][6]\r\n\r\n            if (a[i][7] != null) {\r\n              s += ' '\r\n              s += a[i][7]\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return s + ' '\r\n}\r\n\r\nconst pathHandlers = {\r\n  M: function (c, p, p0) {\r\n    p.x = p0.x = c[0]\r\n    p.y = p0.y = c[1]\r\n\r\n    return [ 'M', p.x, p.y ]\r\n  },\r\n  L: function (c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return [ 'L', c[0], c[1] ]\r\n  },\r\n  H: function (c, p) {\r\n    p.x = c[0]\r\n    return [ 'H', c[0] ]\r\n  },\r\n  V: function (c, p) {\r\n    p.y = c[0]\r\n    return [ 'V', c[0] ]\r\n  },\r\n  C: function (c, p) {\r\n    p.x = c[4]\r\n    p.y = c[5]\r\n    return [ 'C', c[0], c[1], c[2], c[3], c[4], c[5] ]\r\n  },\r\n  S: function (c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return [ 'S', c[0], c[1], c[2], c[3] ]\r\n  },\r\n  Q: function (c, p) {\r\n    p.x = c[2]\r\n    p.y = c[3]\r\n    return [ 'Q', c[0], c[1], c[2], c[3] ]\r\n  },\r\n  T: function (c, p) {\r\n    p.x = c[0]\r\n    p.y = c[1]\r\n    return [ 'T', c[0], c[1] ]\r\n  },\r\n  Z: function (c, p, p0) {\r\n    p.x = p0.x\r\n    p.y = p0.y\r\n    return [ 'Z' ]\r\n  },\r\n  A: function (c, p) {\r\n    p.x = c[5]\r\n    p.y = c[6]\r\n    return [ 'A', c[0], c[1], c[2], c[3], c[4], c[5], c[6] ]\r\n  }\r\n}\r\n\r\nlet mlhvqtcsaz = 'mlhvqtcsaz'.split('')\r\n\r\nfor (var i = 0, il = mlhvqtcsaz.length; i < il; ++i) {\r\n  pathHandlers[mlhvqtcsaz[i]] = (function (i) {\r\n    return function (c, p, p0) {\r\n      if (i === 'H') c[0] = c[0] + p.x\r\n      else if (i === 'V') c[0] = c[0] + p.y\r\n      else if (i === 'A') {\r\n        c[5] = c[5] + p.x\r\n        c[6] = c[6] + p.y\r\n      } else {\r\n        for (var j = 0, jl = c.length; j < jl; ++j) {\r\n          c[j] = c[j] + (j % 2 ? p.y : p.x)\r\n        }\r\n      }\r\n\r\n      return pathHandlers[i](c, p, p0)\r\n    }\r\n  })(mlhvqtcsaz[i].toUpperCase())\r\n}\r\n\r\nextend(PathArray, {\r\n  // Convert array to string\r\n  toString () {\r\n    return arrayToString(this)\r\n  },\r\n\r\n  // Move path string\r\n  move (x, y) {\r\n    // get bounding box of current situation\r\n    var box = this.bbox()\r\n\r\n    // get relative offset\r\n    x -= box.x\r\n    y -= box.y\r\n\r\n    if (!isNaN(x) && !isNaN(y)) {\r\n      // move every point\r\n      for (var l, i = this.length - 1; i >= 0; i--) {\r\n        l = this[i][0]\r\n\r\n        if (l === 'M' || l === 'L' || l === 'T') {\r\n          this[i][1] += x\r\n          this[i][2] += y\r\n        } else if (l === 'H') {\r\n          this[i][1] += x\r\n        } else if (l === 'V') {\r\n          this[i][1] += y\r\n        } else if (l === 'C' || l === 'S' || l === 'Q') {\r\n          this[i][1] += x\r\n          this[i][2] += y\r\n          this[i][3] += x\r\n          this[i][4] += y\r\n\r\n          if (l === 'C') {\r\n            this[i][5] += x\r\n            this[i][6] += y\r\n          }\r\n        } else if (l === 'A') {\r\n          this[i][6] += x\r\n          this[i][7] += y\r\n        }\r\n      }\r\n    }\r\n\r\n    return this\r\n  },\r\n\r\n  // Resize path string\r\n  size (width, height) {\r\n    // get bounding box of current situation\r\n    var box = this.bbox()\r\n    var i, l\r\n\r\n    // If the box width or height is 0 then we ignore\r\n    // transformations on the respective axis\r\n    box.width = box.width === 0 ? 1 : box.width\r\n    box.height = box.height === 0 ? 1 : box.height\r\n\r\n    // recalculate position of all points according to new size\r\n    for (i = this.length - 1; i >= 0; i--) {\r\n      l = this[i][0]\r\n\r\n      if (l === 'M' || l === 'L' || l === 'T') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\r\n      } else if (l === 'H') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n      } else if (l === 'V') {\r\n        this[i][1] = ((this[i][1] - box.y) * height) / box.height + box.y\r\n      } else if (l === 'C' || l === 'S' || l === 'Q') {\r\n        this[i][1] = ((this[i][1] - box.x) * width) / box.width + box.x\r\n        this[i][2] = ((this[i][2] - box.y) * height) / box.height + box.y\r\n        this[i][3] = ((this[i][3] - box.x) * width) / box.width + box.x\r\n        this[i][4] = ((this[i][4] - box.y) * height) / box.height + box.y\r\n\r\n        if (l === 'C') {\r\n          this[i][5] = ((this[i][5] - box.x) * width) / box.width + box.x\r\n          this[i][6] = ((this[i][6] - box.y) * height) / box.height + box.y\r\n        }\r\n      } else if (l === 'A') {\r\n        // resize radii\r\n        this[i][1] = (this[i][1] * width) / box.width\r\n        this[i][2] = (this[i][2] * height) / box.height\r\n\r\n        // move position values\r\n        this[i][6] = ((this[i][6] - box.x) * width) / box.width + box.x\r\n        this[i][7] = ((this[i][7] - box.y) * height) / box.height + box.y\r\n      }\r\n    }\r\n\r\n    return this\r\n  },\r\n\r\n  // Test if the passed path array use the same path data commands as this path array\r\n  equalCommands (pathArray) {\r\n    var i, il, equalCommands\r\n\r\n    pathArray = new PathArray(pathArray)\r\n\r\n    equalCommands = this.length === pathArray.length\r\n    for (i = 0, il = this.length; equalCommands && i < il; i++) {\r\n      equalCommands = this[i][0] === pathArray[i][0]\r\n    }\r\n\r\n    return equalCommands\r\n  },\r\n\r\n  // Make path array morphable\r\n  morph (pathArray) {\r\n    pathArray = new PathArray(pathArray)\r\n\r\n    if (this.equalCommands(pathArray)) {\r\n      this.destination = pathArray\r\n    } else {\r\n      this.destination = null\r\n    }\r\n\r\n    return this\r\n  },\r\n\r\n  // Get morphed path array at given position\r\n  at (pos) {\r\n    // make sure a destination is defined\r\n    if (!this.destination) return this\r\n\r\n    var sourceArray = this\r\n    var destinationArray = this.destination.value\r\n    var array = []\r\n    var pathArray = new PathArray()\r\n    var i, il, j, jl\r\n\r\n    // Animate has specified in the SVG spec\r\n    // See: https://www.w3.org/TR/SVG11/paths.html#PathElement\r\n    for (i = 0, il = sourceArray.length; i < il; i++) {\r\n      array[i] = [ sourceArray[i][0] ]\r\n      for (j = 1, jl = sourceArray[i].length; j < jl; j++) {\r\n        array[i][j] = sourceArray[i][j] + (destinationArray[i][j] - sourceArray[i][j]) * pos\r\n      }\r\n      // For the two flags of the elliptical arc command, the SVG spec say:\r\n      // Flags and booleans are interpolated as fractions between zero and one, with any non-zero value considered to be a value of one/true\r\n      // Elliptical arc command as an array followed by corresponding indexes:\r\n      // ['A', rx, ry, x-axis-rotation, large-arc-flag, sweep-flag, x, y]\r\n      //   0    1   2        3                 4             5      6  7\r\n      if (array[i][0] === 'A') {\r\n        array[i][4] = +(array[i][4] !== 0)\r\n        array[i][5] = +(array[i][5] !== 0)\r\n      }\r\n    }\r\n\r\n    // Directly modify the value of a path array, this is done this way for performance\r\n    pathArray.value = array\r\n    return pathArray\r\n  },\r\n\r\n  // Absolutize and parse path to array\r\n  parse (array = [ [ 'M', 0, 0 ] ]) {\r\n    // if it's already a patharray, no need to parse it\r\n    if (array instanceof PathArray) return array\r\n\r\n    // prepare for parsing\r\n    var s\r\n    var paramCnt = { 'M': 2, 'L': 2, 'H': 1, 'V': 1, 'C': 6, 'S': 4, 'Q': 4, 'T': 2, 'A': 7, 'Z': 0 }\r\n\r\n    if (typeof array === 'string') {\r\n      array = array\r\n        .replace(numbersWithDots, pathRegReplace) // convert 45.123.123 to 45.123 .123\r\n        .replace(pathLetters, ' $& ') // put some room between letters and numbers\r\n        .replace(hyphen, '$1 -') // add space before hyphen\r\n        .trim() // trim\r\n        .split(delimiter) // split into array\r\n    } else {\r\n      array = array.reduce(function (prev, curr) {\r\n        return [].concat.call(prev, curr)\r\n      }, [])\r\n    }\r\n\r\n    // array now is an array containing all parts of a path e.g. ['M', '0', '0', 'L', '30', '30' ...]\r\n    var result = []\r\n    var p = new Point()\r\n    var p0 = new Point()\r\n    var index = 0\r\n    var len = array.length\r\n\r\n    do {\r\n      // Test if we have a path letter\r\n      if (isPathLetter.test(array[index])) {\r\n        s = array[index]\r\n        ++index\r\n        // If last letter was a move command and we got no new, it defaults to [L]ine\r\n      } else if (s === 'M') {\r\n        s = 'L'\r\n      } else if (s === 'm') {\r\n        s = 'l'\r\n      }\r\n\r\n      result.push(pathHandlers[s].call(null,\r\n        array.slice(index, (index = index + paramCnt[s.toUpperCase()])).map(parseFloat),\r\n        p, p0\r\n      )\r\n      )\r\n    } while (len > index)\r\n\r\n    return result\r\n  },\r\n\r\n  // Get bounding box of path\r\n  bbox () {\r\n    parser().path.setAttribute('d', this.toString())\r\n    return parser.nodes.path.getBBox()\r\n  }\r\n})\r\n","import { Ease } from './Controller.js'\r\nimport {\r\n  delimiter,\r\n  numberAndUnit,\r\n  pathLetters\r\n} from '../modules/core/regex.js'\r\nimport { extend } from '../utils/adopter.js'\r\nimport Color from '../types/Color.js'\r\nimport PathArray from '../types/PathArray.js'\r\nimport SVGArray from '../types/SVGArray.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\n\r\nexport default class Morphable {\r\n  constructor (stepper) {\r\n    this._stepper = stepper || new Ease('-')\r\n\r\n    this._from = null\r\n    this._to = null\r\n    this._type = null\r\n    this._context = null\r\n    this._morphObj = null\r\n  }\r\n\r\n  from (val) {\r\n    if (val == null) {\r\n      return this._from\r\n    }\r\n\r\n    this._from = this._set(val)\r\n    return this\r\n  }\r\n\r\n  to (val) {\r\n    if (val == null) {\r\n      return this._to\r\n    }\r\n\r\n    this._to = this._set(val)\r\n    return this\r\n  }\r\n\r\n  type (type) {\r\n    // getter\r\n    if (type == null) {\r\n      return this._type\r\n    }\r\n\r\n    // setter\r\n    this._type = type\r\n    return this\r\n  }\r\n\r\n  _set (value) {\r\n    if (!this._type) {\r\n      var type = typeof value\r\n\r\n      if (type === 'number') {\r\n        this.type(SVGNumber)\r\n      } else if (type === 'string') {\r\n        if (Color.isColor(value)) {\r\n          this.type(Color)\r\n        } else if (delimiter.test(value)) {\r\n          this.type(pathLetters.test(value)\r\n            ? PathArray\r\n            : SVGArray\r\n          )\r\n        } else if (numberAndUnit.test(value)) {\r\n          this.type(SVGNumber)\r\n        } else {\r\n          this.type(NonMorphable)\r\n        }\r\n      } else if (morphableTypes.indexOf(value.constructor) > -1) {\r\n        this.type(value.constructor)\r\n      } else if (Array.isArray(value)) {\r\n        this.type(SVGArray)\r\n      } else if (type === 'object') {\r\n        this.type(ObjectBag)\r\n      } else {\r\n        this.type(NonMorphable)\r\n      }\r\n    }\r\n\r\n    var result = (new this._type(value))\r\n    if (this._type === Color) {\r\n      result = this._to ? result[this._to[4]]()\r\n        : this._from ? result[this._from[4]]()\r\n        : result\r\n    }\r\n    result = result.toArray()\r\n\r\n    this._morphObj = this._morphObj || new this._type()\r\n    this._context = this._context\r\n      || Array.apply(null, Array(result.length))\r\n        .map(Object)\r\n        .map(function (o) {\r\n          o.done = true\r\n          return o\r\n        })\r\n    return result\r\n  }\r\n\r\n  stepper (stepper) {\r\n    if (stepper == null) return this._stepper\r\n    this._stepper = stepper\r\n    return this\r\n  }\r\n\r\n  done () {\r\n    var complete = this._context\r\n      .map(this._stepper.done)\r\n      .reduce(function (last, curr) {\r\n        return last && curr\r\n      }, true)\r\n    return complete\r\n  }\r\n\r\n  at (pos) {\r\n    var _this = this\r\n\r\n    return this._morphObj.fromArray(\r\n      this._from.map(function (i, index) {\r\n        return _this._stepper.step(i, _this._to[index], pos, _this._context[index], _this._context)\r\n      })\r\n    )\r\n  }\r\n}\r\n\r\nexport class NonMorphable {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (val) {\r\n    val = Array.isArray(val) ? val[0] : val\r\n    this.value = val\r\n    return this\r\n  }\r\n\r\n  valueOf () {\r\n    return this.value\r\n  }\r\n\r\n  toArray () {\r\n    return [ this.value ]\r\n  }\r\n}\r\n\r\nexport class TransformBag {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (obj) {\r\n    if (Array.isArray(obj)) {\r\n      obj = {\r\n        scaleX: obj[0],\r\n        scaleY: obj[1],\r\n        shear: obj[2],\r\n        rotate: obj[3],\r\n        translateX: obj[4],\r\n        translateY: obj[5],\r\n        originX: obj[6],\r\n        originY: obj[7]\r\n      }\r\n    }\r\n\r\n    Object.assign(this, TransformBag.defaults, obj)\r\n    return this\r\n  }\r\n\r\n  toArray () {\r\n    var v = this\r\n\r\n    return [\r\n      v.scaleX,\r\n      v.scaleY,\r\n      v.shear,\r\n      v.rotate,\r\n      v.translateX,\r\n      v.translateY,\r\n      v.originX,\r\n      v.originY\r\n    ]\r\n  }\r\n}\r\n\r\nTransformBag.defaults = {\r\n  scaleX: 1,\r\n  scaleY: 1,\r\n  shear: 0,\r\n  rotate: 0,\r\n  translateX: 0,\r\n  translateY: 0,\r\n  originX: 0,\r\n  originY: 0\r\n}\r\n\r\nexport class ObjectBag {\r\n  constructor (...args) {\r\n    this.init(...args)\r\n  }\r\n\r\n  init (objOrArr) {\r\n    this.values = []\r\n\r\n    if (Array.isArray(objOrArr)) {\r\n      this.values = objOrArr\r\n      return\r\n    }\r\n\r\n    objOrArr = objOrArr || {}\r\n    var entries = []\r\n\r\n    for (let i in objOrArr) {\r\n      entries.push([i, objOrArr[i]])\r\n    }\r\n\r\n    entries.sort((a, b) => {\r\n      return a[0] - b[0]\r\n    })\r\n\r\n    this.values = entries.reduce((last, curr) => last.concat(curr), [])\r\n    return this\r\n  }\r\n\r\n  valueOf () {\r\n    var obj = {}\r\n    var arr = this.values\r\n\r\n    for (var i = 0, len = arr.length; i < len; i += 2) {\r\n      obj[arr[i]] = arr[i + 1]\r\n    }\r\n\r\n    return obj\r\n  }\r\n\r\n  toArray () {\r\n    return this.values\r\n  }\r\n}\r\n\r\nconst morphableTypes = [\r\n  NonMorphable,\r\n  TransformBag,\r\n  ObjectBag\r\n]\r\n\r\nexport function registerMorphableType (type = []) {\r\n  morphableTypes.push(...[].concat(type))\r\n}\r\n\r\nexport function makeMorphable () {\r\n  extend(morphableTypes, {\r\n    to (val) {\r\n      return new Morphable()\r\n        .type(this.constructor)\r\n        .from(this.valueOf())\r\n        .to(val)\r\n    },\r\n    fromArray (arr) {\r\n      this.init(arr)\r\n      return this\r\n    }\r\n  })\r\n}\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PathArray from '../types/PathArray.js'\r\nimport Shape from './Shape.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class Path extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('path', node), node)\r\n  }\r\n\r\n  // Get array\r\n  array () {\r\n    return this._array || (this._array = new PathArray(this.attr('d')))\r\n  }\r\n\r\n  // Plot new path\r\n  plot (d) {\r\n    return (d == null) ? this.array()\r\n      : this.clear().attr('d', typeof d === 'string' ? d : (this._array = new PathArray(d)))\r\n  }\r\n\r\n  // Clear array cache\r\n  clear () {\r\n    delete this._array\r\n    return this\r\n  }\r\n\r\n  // Move by left top corner\r\n  move (x, y) {\r\n    return this.attr('d', this.array().move(x, y))\r\n  }\r\n\r\n  // Move by left top corner over x-axis\r\n  x (x) {\r\n    return x == null ? this.bbox().x : this.move(x, this.bbox().y)\r\n  }\r\n\r\n  // Move by left top corner over y-axis\r\n  y (y) {\r\n    return y == null ? this.bbox().y : this.move(this.bbox().x, y)\r\n  }\r\n\r\n  // Set element size to given width and height\r\n  size (width, height) {\r\n    var p = proportionalSize(this, width, height)\r\n    return this.attr('d', this.array().size(p.width, p.height))\r\n  }\r\n\r\n  // Set width of element\r\n  width (width) {\r\n    return width == null ? this.bbox().width : this.size(width, this.bbox().height)\r\n  }\r\n\r\n  // Set height of element\r\n  height (height) {\r\n    return height == null ? this.bbox().height : this.size(this.bbox().width, height)\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg textpath [href*=\"' + this.id() + '\"]')\r\n  }\r\n}\r\n\r\n// Define morphable array\r\nPath.prototype.MorphArray = PathArray\r\n\r\n// Add parent method\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped path element\r\n    path: wrapWithAttrCheck(function (d) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Path()).plot(d || new PathArray())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Path, 'Path')\r\n","import { proportionalSize } from '../../utils/utils.js'\r\nimport PointArray from '../../types/PointArray.js'\r\n\r\n// Get array\r\nexport function array () {\r\n  return this._array || (this._array = new PointArray(this.attr('points')))\r\n}\r\n\r\n// Plot new path\r\nexport function plot (p) {\r\n  return (p == null) ? this.array()\r\n    : this.clear().attr('points', typeof p === 'string' ? p\r\n    : (this._array = new PointArray(p)))\r\n}\r\n\r\n// Clear array cache\r\nexport function clear () {\r\n  delete this._array\r\n  return this\r\n}\r\n\r\n// Move by left top corner\r\nexport function move (x, y) {\r\n  return this.attr('points', this.array().move(x, y))\r\n}\r\n\r\n// Set element size to given width and height\r\nexport function size (width, height) {\r\n  let p = proportionalSize(this, width, height)\r\n  return this.attr('points', this.array().size(p.width, p.height))\r\n}\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\nimport * as poly from '../modules/core/poly.js'\r\n\r\nexport default class Polygon extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('polygon', node), node)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped polygon element\r\n    polygon: wrapWithAttrCheck(function (p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Polygon()).plot(p || new PointArray())\r\n    })\r\n  }\r\n})\r\n\r\nextend(Polygon, pointed)\r\nextend(Polygon, poly)\r\nregister(Polygon, 'Polygon')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport PointArray from '../types/PointArray.js'\r\nimport Shape from './Shape.js'\r\nimport * as pointed from '../modules/core/pointed.js'\r\nimport * as poly from '../modules/core/poly.js'\r\n\r\nexport default class Polyline extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('polyline', node), node)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a wrapped polygon element\r\n    polyline: wrapWithAttrCheck(function (p) {\r\n      // make sure plot is called as a setter\r\n      return this.put(new Polyline()).plot(p || new PointArray())\r\n    })\r\n  }\r\n})\r\n\r\nextend(Polyline, pointed)\r\nextend(Polyline, poly)\r\nregister(Polyline, 'Polyline')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { rx, ry } from '../modules/core/circled.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Rect extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('rect', node), node)\r\n  }\r\n}\r\n\r\nextend(Rect, { rx, ry })\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a rect element\r\n    rect: wrapWithAttrCheck(function (width, height) {\r\n      return this.put(new Rect()).size(width, height)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Rect, 'Rect')\r\n","export default class Queue {\r\n  constructor () {\r\n    this._first = null\r\n    this._last = null\r\n  }\r\n\r\n  push (value) {\r\n    // An item stores an id and the provided value\r\n    var item = value.next ? value : { value: value, next: null, prev: null }\r\n\r\n    // Deal with the queue being empty or populated\r\n    if (this._last) {\r\n      item.prev = this._last\r\n      this._last.next = item\r\n      this._last = item\r\n    } else {\r\n      this._last = item\r\n      this._first = item\r\n    }\r\n\r\n    // Return the current item\r\n    return item\r\n  }\r\n\r\n  shift () {\r\n    // Check if we have a value\r\n    var remove = this._first\r\n    if (!remove) return null\r\n\r\n    // If we do, remove it and relink things\r\n    this._first = remove.next\r\n    if (this._first) this._first.prev = null\r\n    this._last = this._first ? this._last : null\r\n    return remove.value\r\n  }\r\n\r\n  // Shows us the first item in the list\r\n  first () {\r\n    return this._first && this._first.value\r\n  }\r\n\r\n  // Shows us the last item in the list\r\n  last () {\r\n    return this._last && this._last.value\r\n  }\r\n\r\n  // Removes the item that was returned from the push\r\n  remove (item) {\r\n    // Relink the previous item\r\n    if (item.prev) item.prev.next = item.next\r\n    if (item.next) item.next.prev = item.prev\r\n    if (item === this._last) this._last = item.prev\r\n    if (item === this._first) this._first = item.next\r\n\r\n    // Invalidate item\r\n    item.prev = null\r\n    item.next = null\r\n  }\r\n}\r\n","import { globals } from '../utils/window.js'\r\nimport Queue from './Queue.js'\r\n\r\nconst Animator = {\r\n  nextDraw: null,\r\n  frames: new Queue(),\r\n  timeouts: new Queue(),\r\n  immediates: new Queue(),\r\n  timer: () => globals.window.performance || globals.window.Date,\r\n  transforms: [],\r\n\r\n  frame (fn) {\r\n    // Store the node\r\n    var node = Animator.frames.push({ run: fn })\r\n\r\n    // Request an animation frame if we don't have one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    // Return the node so we can remove it easily\r\n    return node\r\n  },\r\n\r\n  timeout (fn, delay) {\r\n    delay = delay || 0\r\n\r\n    // Work out when the event should fire\r\n    var time = Animator.timer().now() + delay\r\n\r\n    // Add the timeout to the end of the queue\r\n    var node = Animator.timeouts.push({ run: fn, time: time })\r\n\r\n    // Request another animation frame if we need one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    return node\r\n  },\r\n\r\n  immediate (fn) {\r\n    // Add the immediate fn to the end of the queue\r\n    var node = Animator.immediates.push(fn)\r\n    // Request another animation frame if we need one\r\n    if (Animator.nextDraw === null) {\r\n      Animator.nextDraw = globals.window.requestAnimationFrame(Animator._draw)\r\n    }\r\n\r\n    return node\r\n  },\r\n\r\n  cancelFrame (node) {\r\n    node != null && Animator.frames.remove(node)\r\n  },\r\n\r\n  clearTimeout (node) {\r\n    node != null && Animator.timeouts.remove(node)\r\n  },\r\n\r\n  cancelImmediate (node) {\r\n    node != null && Animator.immediates.remove(node)\r\n  },\r\n\r\n  _draw (now) {\r\n    // Run all the timeouts we can run, if they are not ready yet, add them\r\n    // to the end of the queue immediately! (bad timeouts!!! [sarcasm])\r\n    var nextTimeout = null\r\n    var lastTimeout = Animator.timeouts.last()\r\n    while ((nextTimeout = Animator.timeouts.shift())) {\r\n      // Run the timeout if its time, or push it to the end\r\n      if (now >= nextTimeout.time) {\r\n        nextTimeout.run()\r\n      } else {\r\n        Animator.timeouts.push(nextTimeout)\r\n      }\r\n\r\n      // If we hit the last item, we should stop shifting out more items\r\n      if (nextTimeout === lastTimeout) break\r\n    }\r\n\r\n    // Run all of the animation frames\r\n    var nextFrame = null\r\n    var lastFrame = Animator.frames.last()\r\n    while ((nextFrame !== lastFrame) && (nextFrame = Animator.frames.shift())) {\r\n      nextFrame.run(now)\r\n    }\r\n\r\n    var nextImmediate = null\r\n    while ((nextImmediate = Animator.immediates.shift())) {\r\n      nextImmediate()\r\n    }\r\n\r\n    // If we have remaining timeouts or frames, draw until we don't anymore\r\n    Animator.nextDraw = Animator.timeouts.first() || Animator.frames.first()\r\n      ? globals.window.requestAnimationFrame(Animator._draw)\r\n      : null\r\n  }\r\n}\r\n\r\nexport default Animator\r\n","import { globals } from '../utils/window.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Animator from './Animator.js'\r\nimport EventTarget from '../types/EventTarget.js'\r\n\r\nvar makeSchedule = function (runnerInfo) {\r\n  var start = runnerInfo.start\r\n  var duration = runnerInfo.runner.duration()\r\n  var end = start + duration\r\n  return { start: start, duration: duration, end: end, runner: runnerInfo.runner }\r\n}\r\n\r\nconst defaultSource = function () {\r\n  let w = globals.window\r\n  return (w.performance || w.Date).now()\r\n}\r\n\r\nexport default class Timeline extends EventTarget {\r\n  // Construct a new timeline on the given element\r\n  constructor (timeSource = defaultSource) {\r\n    super()\r\n\r\n    this._timeSource = timeSource\r\n\r\n    // Store the timing variables\r\n    this._startTime = 0\r\n    this._speed = 1.0\r\n\r\n    // Determines how long a runner is hold in memory. Can be a dt or true/false\r\n    this._persist = 0\r\n\r\n    // Keep track of the running animations and their starting parameters\r\n    this._nextFrame = null\r\n    this._paused = true\r\n    this._runners = []\r\n    this._runnerIds = []\r\n    this._lastRunnerId = -1\r\n    this._time = 0\r\n    this._lastSourceTime = 0\r\n    this._lastStepTime = 0\r\n\r\n    // Make sure that step is always called in class context\r\n    this._step = this._stepFn.bind(this, false)\r\n    this._stepImmediate = this._stepFn.bind(this, true)\r\n  }\r\n\r\n  // schedules a runner on the timeline\r\n  schedule (runner, delay, when) {\r\n    if (runner == null) {\r\n      return this._runners.map(makeSchedule)\r\n    }\r\n\r\n    // The start time for the next animation can either be given explicitly,\r\n    // derived from the current timeline time or it can be relative to the\r\n    // last start time to chain animations direclty\r\n\r\n    var absoluteStartTime = 0\r\n    var endTime = this.getEndTime()\r\n    delay = delay || 0\r\n\r\n    // Work out when to start the animation\r\n    if (when == null || when === 'last' || when === 'after') {\r\n      // Take the last time and increment\r\n      absoluteStartTime = endTime\r\n    } else if (when === 'absolute' || when === 'start') {\r\n      absoluteStartTime = delay\r\n      delay = 0\r\n    } else if (when === 'now') {\r\n      absoluteStartTime = this._time\r\n    } else if (when === 'relative') {\r\n      let runnerInfo = this._runners[runner.id]\r\n      if (runnerInfo) {\r\n        absoluteStartTime = runnerInfo.start + delay\r\n        delay = 0\r\n      }\r\n    } else {\r\n      throw new Error('Invalid value for the \"when\" parameter')\r\n    }\r\n\r\n    // Manage runner\r\n    runner.unschedule()\r\n    runner.timeline(this)\r\n\r\n    const persist = runner.persist()\r\n    const runnerInfo = {\r\n      persist: persist === null ? this._persist : persist,\r\n      start: absoluteStartTime + delay,\r\n      runner\r\n    }\r\n\r\n    this._lastRunnerId = runner.id\r\n\r\n    this._runners.push(runnerInfo)\r\n    this._runners.sort((a, b) => a.start - b.start)\r\n    this._runnerIds = this._runners.map(info => info.runner.id)\r\n\r\n    this.updateTime()._continue()\r\n    return this\r\n  }\r\n\r\n  // Remove the runner from this timeline\r\n  unschedule (runner) {\r\n    var index = this._runnerIds.indexOf(runner.id)\r\n    if (index < 0) return this\r\n\r\n    this._runners.splice(index, 1)\r\n    this._runnerIds.splice(index, 1)\r\n\r\n    runner.timeline(null)\r\n    return this\r\n  }\r\n\r\n  // Calculates the end of the timeline\r\n  getEndTime () {\r\n    var lastRunnerInfo = this._runners[this._runnerIds.indexOf(this._lastRunnerId)]\r\n    var lastDuration = lastRunnerInfo ? lastRunnerInfo.runner.duration() : 0\r\n    var lastStartTime = lastRunnerInfo ? lastRunnerInfo.start : 0\r\n    return lastStartTime + lastDuration\r\n  }\r\n\r\n  getEndTimeOfTimeline () {\r\n    let lastEndTime = 0\r\n    for (var i = 0; i < this._runners.length; i++) {\r\n      let runnerInfo = this._runners[i]\r\n      var duration = runnerInfo ? runnerInfo.runner.duration() : 0\r\n      var startTime = runnerInfo ? runnerInfo.start : 0\r\n      let endTime = startTime + duration\r\n      if (endTime > lastEndTime) {\r\n        lastEndTime = endTime\r\n      }\r\n    }\r\n    return lastEndTime\r\n  }\r\n\r\n  // Makes sure, that after pausing the time doesn't jump\r\n  updateTime () {\r\n    if (!this.active()) {\r\n      this._lastSourceTime = this._timeSource()\r\n    }\r\n    return this\r\n  }\r\n\r\n  play () {\r\n    // Now make sure we are not paused and continue the animation\r\n    this._paused = false\r\n    return this.updateTime()._continue()\r\n  }\r\n\r\n  pause () {\r\n    this._paused = true\r\n    return this._continue()\r\n  }\r\n\r\n  stop () {\r\n    // Go to start and pause\r\n    this.time(0)\r\n    return this.pause()\r\n  }\r\n\r\n  finish () {\r\n    // Go to end and pause\r\n    this.time(this.getEndTimeOfTimeline() + 1)\r\n    return this.pause()\r\n  }\r\n\r\n  speed (speed) {\r\n    if (speed == null) return this._speed\r\n    this._speed = speed\r\n    return this\r\n  }\r\n\r\n  reverse (yes) {\r\n    var currentSpeed = this.speed()\r\n    if (yes == null) return this.speed(-currentSpeed)\r\n\r\n    var positive = Math.abs(currentSpeed)\r\n    return this.speed(yes ? positive : -positive)\r\n  }\r\n\r\n  seek (dt) {\r\n    return this.time(this._time + dt)\r\n  }\r\n\r\n  time (time) {\r\n    if (time == null) return this._time\r\n    this._time = time\r\n    return this._continue(true)\r\n  }\r\n\r\n  persist (dtOrForever) {\r\n    if (dtOrForever == null) return this._persist\r\n    this._persist = dtOrForever\r\n    return this\r\n  }\r\n\r\n  source (fn) {\r\n    if (fn == null) return this._timeSource\r\n    this._timeSource = fn\r\n    return this\r\n  }\r\n\r\n  _stepFn (immediateStep = false) {\r\n    // Get the time delta from the last time and update the time\r\n    var time = this._timeSource()\r\n    var dtSource = time - this._lastSourceTime\r\n\r\n    if (immediateStep) dtSource = 0\r\n\r\n    var dtTime = this._speed * dtSource + (this._time - this._lastStepTime)\r\n    this._lastSourceTime = time\r\n\r\n    // Only update the time if we use the timeSource.\r\n    // Otherwise use the current time\r\n    if (!immediateStep) {\r\n      // Update the time\r\n      this._time += dtTime\r\n      this._time = this._time < 0 ? 0 : this._time\r\n    }\r\n    this._lastStepTime = this._time\r\n    this.fire('time', this._time)\r\n\r\n    // This is for the case that the timeline was seeked so that the time\r\n    // is now before the startTime of the runner. Thats why we need to set\r\n    // the runner to position 0\r\n\r\n    // FIXME:\r\n    // However, reseting in insertion order leads to bugs. Considering the case,\r\n    // where 2 runners change the same attriute but in different times,\r\n    // reseting both of them will lead to the case where the later defined\r\n    // runner always wins the reset even if the other runner started earlier\r\n    // and therefore should win the attribute battle\r\n    // this can be solved by reseting them backwards\r\n    for (var k = this._runners.length; k--;) {\r\n      // Get and run the current runner and ignore it if its inactive\r\n      let runnerInfo = this._runners[k]\r\n      let runner = runnerInfo.runner\r\n\r\n      // Make sure that we give the actual difference\r\n      // between runner start time and now\r\n      let dtToStart = this._time - runnerInfo.start\r\n\r\n      // Dont run runner if not started yet\r\n      // and try to reset it\r\n      if (dtToStart <= 0) {\r\n        runner.reset()\r\n      }\r\n    }\r\n\r\n    // Run all of the runners directly\r\n    var runnersLeft = false\r\n    for (var i = 0, len = this._runners.length; i < len; i++) {\r\n      // Get and run the current runner and ignore it if its inactive\r\n      let runnerInfo = this._runners[i]\r\n      let runner = runnerInfo.runner\r\n      let dt = dtTime\r\n\r\n      // Make sure that we give the actual difference\r\n      // between runner start time and now\r\n      let dtToStart = this._time - runnerInfo.start\r\n\r\n      // Dont run runner if not started yet\r\n      if (dtToStart <= 0) {\r\n        runnersLeft = true\r\n        continue\r\n      } else if (dtToStart < dt) {\r\n        // Adjust dt to make sure that animation is on point\r\n        dt = dtToStart\r\n      }\r\n\r\n      if (!runner.active()) continue\r\n\r\n      // If this runner is still going, signal that we need another animation\r\n      // frame, otherwise, remove the completed runner\r\n      var finished = runner.step(dt).done\r\n      if (!finished) {\r\n        runnersLeft = true\r\n        // continue\r\n      } else if (runnerInfo.persist !== true) {\r\n        // runner is finished. And runner might get removed\r\n        var endTime = runner.duration() - runner.time() + this._time\r\n\r\n        if (endTime + runnerInfo.persist < this._time) {\r\n          // Delete runner and correct index\r\n          runner.unschedule()\r\n          --i\r\n          --len\r\n        }\r\n      }\r\n    }\r\n\r\n    // Basically: we continue when there are runners right from us in time\r\n    // when -->, and when runners are left from us when <--\r\n    if ((runnersLeft && !(this._speed < 0 && this._time === 0)) || (this._runnerIds.length && this._speed < 0 && this._time > 0)) {\r\n      this._continue()\r\n    } else {\r\n      this.pause()\r\n      this.fire('finished')\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Checks if we are running and continues the animation\r\n  _continue (immediateStep = false) {\r\n    Animator.cancelFrame(this._nextFrame)\r\n    this._nextFrame = null\r\n\r\n    if (immediateStep) return this._stepImmediate()\r\n    if (this._paused) return this\r\n\r\n    this._nextFrame = Animator.frame(this._step)\r\n    return this\r\n  }\r\n\r\n  active () {\r\n    return !!this._nextFrame\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Element: {\r\n    timeline: function (timeline) {\r\n      if (timeline == null) {\r\n        this._timeline = (this._timeline || new Timeline())\r\n        return this._timeline\r\n      } else {\r\n        this._timeline = timeline\r\n        return this\r\n      }\r\n    }\r\n  }\r\n})\r\n","import { Controller, Ease, Stepper } from './Controller.js'\nimport { extend, register } from '../utils/adopter.js'\nimport { from, to } from '../modules/core/gradiented.js'\nimport { getOrigin } from '../utils/utils.js'\nimport { noop, timeline } from '../modules/core/defaults.js'\nimport { registerMethods } from '../utils/methods.js'\nimport { rx, ry } from '../modules/core/circled.js'\nimport Animator from './Animator.js'\nimport Box from '../types/Box.js'\nimport EventTarget from '../types/EventTarget.js'\nimport Matrix from '../types/Matrix.js'\nimport Morphable, { TransformBag } from './Morphable.js'\nimport Point from '../types/Point.js'\nimport SVGNumber from '../types/SVGNumber.js'\nimport Timeline from './Timeline.js'\n\r\nexport default class Runner extends EventTarget {\r\n  constructor (options) {\r\n    super()\r\n\r\n    // Store a unique id on the runner, so that we can identify it later\r\n    this.id = Runner.id++\r\n\r\n    // Ensure a default value\r\n    options = options == null\r\n      ? timeline.duration\r\n      : options\r\n\r\n    // Ensure that we get a controller\r\n    options = typeof options === 'function'\r\n      ? new Controller(options)\r\n      : options\r\n\r\n    // Declare all of the variables\r\n    this._element = null\r\n    this._timeline = null\r\n    this.done = false\r\n    this._queue = []\r\n\r\n    // Work out the stepper and the duration\r\n    this._duration = typeof options === 'number' && options\r\n    this._isDeclarative = options instanceof Controller\r\n    this._stepper = this._isDeclarative ? options : new Ease()\r\n\r\n    // We copy the current values from the timeline because they can change\r\n    this._history = {}\r\n\r\n    // Store the state of the runner\r\n    this.enabled = true\r\n    this._time = 0\r\n    this._lastTime = 0\r\n\r\n    // At creation, the runner is in reseted state\r\n    this._reseted = true\r\n\r\n    // Save transforms applied to this runner\r\n    this.transforms = new Matrix()\r\n    this.transformId = 1\r\n\r\n    // Looping variables\r\n    this._haveReversed = false\r\n    this._reverse = false\r\n    this._loopsDone = 0\r\n    this._swing = false\r\n    this._wait = 0\r\n    this._times = 1\r\n\r\n    this._frameId = null\r\n\r\n    // Stores how long a runner is stored after beeing done\r\n    this._persist = this._isDeclarative ? true : null\r\n  }\r\n\r\n  /*\r\n  Runner Definitions\r\n  ==================\r\n  These methods help us define the runtime behaviour of the Runner or they\r\n  help us make new runners from the current runner\r\n  */\r\n\r\n  element (element) {\r\n    if (element == null) return this._element\r\n    this._element = element\r\n    element._prepareRunner()\r\n    return this\r\n  }\r\n\r\n  timeline (timeline) {\r\n    // check explicitly for undefined so we can set the timeline to null\r\n    if (typeof timeline === 'undefined') return this._timeline\r\n    this._timeline = timeline\r\n    return this\r\n  }\r\n\r\n  animate (duration, delay, when) {\r\n    var o = Runner.sanitise(duration, delay, when)\r\n    var runner = new Runner(o.duration)\r\n    if (this._timeline) runner.timeline(this._timeline)\r\n    if (this._element) runner.element(this._element)\r\n    return runner.loop(o).schedule(delay, when)\r\n  }\r\n\r\n  schedule (timeline, delay, when) {\r\n    // The user doesn't need to pass a timeline if we already have one\r\n    if (!(timeline instanceof Timeline)) {\r\n      when = delay\r\n      delay = timeline\r\n      timeline = this.timeline()\r\n    }\r\n\r\n    // If there is no timeline, yell at the user...\r\n    if (!timeline) {\r\n      throw Error('Runner cannot be scheduled without timeline')\r\n    }\r\n\r\n    // Schedule the runner on the timeline provided\r\n    timeline.schedule(this, delay, when)\r\n    return this\r\n  }\r\n\r\n  unschedule () {\r\n    var timeline = this.timeline()\r\n    timeline && timeline.unschedule(this)\r\n    return this\r\n  }\r\n\r\n  loop (times, swing, wait) {\r\n    // Deal with the user passing in an object\r\n    if (typeof times === 'object') {\r\n      swing = times.swing\r\n      wait = times.wait\r\n      times = times.times\r\n    }\r\n\r\n    // Sanitise the values and store them\r\n    this._times = times || Infinity\r\n    this._swing = swing || false\r\n    this._wait = wait || 0\r\n\r\n    // Allow true to be passed\r\n    if (this._times === true) { this._times = Infinity }\r\n\r\n    return this\r\n  }\r\n\r\n  delay (delay) {\r\n    return this.animate(0, delay)\r\n  }\r\n\r\n  /*\r\n  Basic Functionality\r\n  ===================\r\n  These methods allow us to attach basic functions to the runner directly\r\n  */\r\n\r\n  queue (initFn, runFn, retargetFn, isTransform) {\r\n    this._queue.push({\r\n      initialiser: initFn || noop,\r\n      runner: runFn || noop,\r\n      retarget: retargetFn,\r\n      isTransform: isTransform,\r\n      initialised: false,\r\n      finished: false\r\n    })\r\n    var timeline = this.timeline()\r\n    timeline && this.timeline()._continue()\r\n    return this\r\n  }\r\n\r\n  during (fn) {\r\n    return this.queue(null, fn)\r\n  }\r\n\r\n  after (fn) {\r\n    return this.on('finished', fn)\r\n  }\r\n\r\n  /*\r\n  Runner animation methods\r\n  ========================\r\n  Control how the animation plays\r\n  */\r\n\r\n  time (time) {\r\n    if (time == null) {\r\n      return this._time\r\n    }\r\n    let dt = time - this._time\r\n    this.step(dt)\r\n    return this\r\n  }\r\n\r\n  duration () {\r\n    return this._times * (this._wait + this._duration) - this._wait\r\n  }\r\n\r\n  loops (p) {\r\n    var loopDuration = this._duration + this._wait\r\n    if (p == null) {\r\n      var loopsDone = Math.floor(this._time / loopDuration)\r\n      var relativeTime = (this._time - loopsDone * loopDuration)\r\n      var position = relativeTime / this._duration\r\n      return Math.min(loopsDone + position, this._times)\r\n    }\r\n    var whole = Math.floor(p)\r\n    var partial = p % 1\r\n    var time = loopDuration * whole + this._duration * partial\r\n    return this.time(time)\r\n  }\r\n\r\n  persist (dtOrForever) {\r\n    if (dtOrForever == null) return this._persist\r\n    this._persist = dtOrForever\r\n    return this\r\n  }\r\n\r\n  position (p) {\r\n    // Get all of the variables we need\r\n    var x = this._time\r\n    var d = this._duration\r\n    var w = this._wait\r\n    var t = this._times\r\n    var s = this._swing\r\n    var r = this._reverse\r\n    var position\r\n\r\n    if (p == null) {\r\n      /*\r\n      This function converts a time to a position in the range [0, 1]\r\n      The full explanation can be found in this desmos demonstration\r\n        https://www.desmos.com/calculator/u4fbavgche\r\n      The logic is slightly simplified here because we can use booleans\r\n      */\r\n\r\n      // Figure out the value without thinking about the start or end time\r\n      const f = function (x) {\r\n        var swinging = s * Math.floor(x % (2 * (w + d)) / (w + d))\r\n        var backwards = (swinging && !r) || (!swinging && r)\r\n        var uncliped = Math.pow(-1, backwards) * (x % (w + d)) / d + backwards\r\n        var clipped = Math.max(Math.min(uncliped, 1), 0)\r\n        return clipped\r\n      }\r\n\r\n      // Figure out the value by incorporating the start time\r\n      var endTime = t * (w + d) - w\r\n      position = x <= 0 ? Math.round(f(1e-5))\r\n        : x < endTime ? f(x)\r\n        : Math.round(f(endTime - 1e-5))\r\n      return position\r\n    }\r\n\r\n    // Work out the loops done and add the position to the loops done\r\n    var loopsDone = Math.floor(this.loops())\r\n    var swingForward = s && (loopsDone % 2 === 0)\r\n    var forwards = (swingForward && !r) || (r && swingForward)\r\n    position = loopsDone + (forwards ? p : 1 - p)\r\n    return this.loops(position)\r\n  }\r\n\r\n  progress (p) {\r\n    if (p == null) {\r\n      return Math.min(1, this._time / this.duration())\r\n    }\r\n    return this.time(p * this.duration())\r\n  }\r\n\r\n  step (dt) {\r\n    // If we are inactive, this stepper just gets skipped\r\n    if (!this.enabled) return this\r\n\r\n    // Update the time and get the new position\r\n    dt = dt == null ? 16 : dt\r\n    this._time += dt\r\n    var position = this.position()\r\n\r\n    // Figure out if we need to run the stepper in this frame\r\n    var running = this._lastPosition !== position && this._time >= 0\r\n    this._lastPosition = position\r\n\r\n    // Figure out if we just started\r\n    var duration = this.duration()\r\n    var justStarted = this._lastTime <= 0 && this._time > 0\r\n    var justFinished = this._lastTime < duration && this._time >= duration\r\n\r\n    this._lastTime = this._time\r\n    if (justStarted) {\r\n      this.fire('start', this)\r\n    }\r\n\r\n    // Work out if the runner is finished set the done flag here so animations\r\n    // know, that they are running in the last step (this is good for\r\n    // transformations which can be merged)\r\n    var declarative = this._isDeclarative\r\n    this.done = !declarative && !justFinished && this._time >= duration\r\n\r\n    // Runner is running. So its not in reseted state anymore\r\n    this._reseted = false\r\n\r\n    // Call initialise and the run function\r\n    if (running || declarative) {\r\n      this._initialise(running)\r\n\r\n      // clear the transforms on this runner so they dont get added again and again\r\n      this.transforms = new Matrix()\r\n      var converged = this._run(declarative ? dt : position)\r\n\r\n      this.fire('step', this)\r\n    }\r\n    // correct the done flag here\r\n    // declaritive animations itself know when they converged\r\n    this.done = this.done || (converged && declarative)\r\n    if (justFinished) {\r\n      this.fire('finished', this)\r\n    }\r\n    return this\r\n  }\r\n\r\n  reset () {\r\n    if (this._reseted) return this\r\n    this.time(0)\r\n    this._reseted = true\r\n    return this\r\n  }\r\n\r\n  finish () {\r\n    return this.step(Infinity)\r\n  }\r\n\r\n  reverse (reverse) {\r\n    this._reverse = reverse == null ? !this._reverse : reverse\r\n    return this\r\n  }\r\n\r\n  ease (fn) {\r\n    this._stepper = new Ease(fn)\r\n    return this\r\n  }\r\n\r\n  active (enabled) {\r\n    if (enabled == null) return this.enabled\r\n    this.enabled = enabled\r\n    return this\r\n  }\r\n\r\n  /*\r\n  Private Methods\r\n  ===============\r\n  Methods that shouldn't be used externally\r\n  */\r\n\r\n  // Save a morpher to the morpher list so that we can retarget it later\r\n  _rememberMorpher (method, morpher) {\r\n    this._history[method] = {\r\n      morpher: morpher,\r\n      caller: this._queue[this._queue.length - 1]\r\n    }\r\n\r\n    // We have to resume the timeline in case a controller\r\n    // is already done without beeing ever run\r\n    // This can happen when e.g. this is done:\r\n    //    anim = el.animate(new SVG.Spring)\r\n    // and later\r\n    //    anim.move(...)\r\n    if (this._isDeclarative) {\r\n      var timeline = this.timeline()\r\n      timeline && timeline.play()\r\n    }\r\n  }\r\n\r\n  // Try to set the target for a morpher if the morpher exists, otherwise\r\n  // do nothing and return false\r\n  _tryRetarget (method, target, extra) {\r\n    if (this._history[method]) {\r\n      // if the last method wasnt even initialised, throw it away\r\n      if (!this._history[method].caller.initialised) {\r\n        let index = this._queue.indexOf(this._history[method].caller)\r\n        this._queue.splice(index, 1)\r\n        return false\r\n      }\r\n\r\n      // for the case of transformations, we use the special retarget function\r\n      // which has access to the outer scope\r\n      if (this._history[method].caller.retarget) {\r\n        this._history[method].caller.retarget(target, extra)\r\n        // for everything else a simple morpher change is sufficient\r\n      } else {\r\n        this._history[method].morpher.to(target)\r\n      }\r\n\r\n      this._history[method].caller.finished = false\r\n      var timeline = this.timeline()\r\n      timeline && timeline.play()\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n\r\n  // Run each initialise function in the runner if required\r\n  _initialise (running) {\r\n    // If we aren't running, we shouldn't initialise when not declarative\r\n    if (!running && !this._isDeclarative) return\r\n\r\n    // Loop through all of the initialisers\r\n    for (var i = 0, len = this._queue.length; i < len; ++i) {\r\n      // Get the current initialiser\r\n      var current = this._queue[i]\r\n\r\n      // Determine whether we need to initialise\r\n      var needsIt = this._isDeclarative || (!current.initialised && running)\r\n      running = !current.finished\r\n\r\n      // Call the initialiser if we need to\r\n      if (needsIt && running) {\r\n        current.initialiser.call(this)\r\n        current.initialised = true\r\n      }\r\n    }\r\n  }\r\n\r\n  // Run each run function for the position or dt given\r\n  _run (positionOrDt) {\r\n    // Run all of the _queue directly\r\n    var allfinished = true\r\n    for (var i = 0, len = this._queue.length; i < len; ++i) {\r\n      // Get the current function to run\r\n      var current = this._queue[i]\r\n\r\n      // Run the function if its not finished, we keep track of the finished\r\n      // flag for the sake of declarative _queue\r\n      var converged = current.runner.call(this, positionOrDt)\r\n      current.finished = current.finished || (converged === true)\r\n      allfinished = allfinished && current.finished\r\n    }\r\n\r\n    // We report when all of the constructors are finished\r\n    return allfinished\r\n  }\r\n\r\n  addTransform (transform, index) {\r\n    this.transforms.lmultiplyO(transform)\r\n    return this\r\n  }\r\n\r\n  clearTransform () {\r\n    this.transforms = new Matrix()\r\n    return this\r\n  }\r\n\r\n  // TODO: Keep track of all transformations so that deletion is faster\r\n  clearTransformsFromQueue () {\r\n    if (!this.done || !this._timeline || !this._timeline._runnerIds.includes(this.id)) {\r\n      this._queue = this._queue.filter((item) => {\r\n        return !item.isTransform\r\n      })\r\n    }\r\n  }\r\n\r\n  static sanitise (duration, delay, when) {\r\n    // Initialise the default parameters\r\n    var times = 1\r\n    var swing = false\r\n    var wait = 0\r\n    duration = duration || timeline.duration\r\n    delay = delay || timeline.delay\r\n    when = when || 'last'\r\n\r\n    // If we have an object, unpack the values\r\n    if (typeof duration === 'object' && !(duration instanceof Stepper)) {\r\n      delay = duration.delay || delay\r\n      when = duration.when || when\r\n      swing = duration.swing || swing\r\n      times = duration.times || times\r\n      wait = duration.wait || wait\r\n      duration = duration.duration || timeline.duration\r\n    }\r\n\r\n    return {\r\n      duration: duration,\r\n      delay: delay,\r\n      swing: swing,\r\n      times: times,\r\n      wait: wait,\r\n      when: when\r\n    }\r\n  }\r\n}\r\n\r\nRunner.id = 0\r\n\r\nclass FakeRunner {\r\n  constructor (transforms = new Matrix(), id = -1, done = true) {\r\n    this.transforms = transforms\r\n    this.id = id\r\n    this.done = done\r\n  }\r\n\r\n  clearTransformsFromQueue () { }\r\n}\r\n\r\nextend([ Runner, FakeRunner ], {\r\n  mergeWith (runner) {\r\n    return new FakeRunner(\r\n      runner.transforms.lmultiply(this.transforms),\r\n      runner.id\r\n    )\r\n  }\r\n})\r\n\r\n// FakeRunner.emptyRunner = new FakeRunner()\r\n\r\nconst lmultiply = (last, curr) => last.lmultiplyO(curr)\r\nconst getRunnerTransform = (runner) => runner.transforms\r\n\r\nfunction mergeTransforms () {\r\n  // Find the matrix to apply to the element and apply it\r\n  let runners = this._transformationRunners.runners\r\n  let netTransform = runners\r\n    .map(getRunnerTransform)\r\n    .reduce(lmultiply, new Matrix())\r\n\r\n  this.transform(netTransform)\r\n\r\n  this._transformationRunners.merge()\r\n\r\n  if (this._transformationRunners.length() === 1) {\r\n    this._frameId = null\r\n  }\r\n}\r\n\r\nclass RunnerArray {\r\n  constructor () {\r\n    this.runners = []\r\n    this.ids = []\r\n  }\r\n\r\n  add (runner) {\r\n    if (this.runners.includes(runner)) return\r\n    let id = runner.id + 1\r\n\r\n    this.runners.push(runner)\r\n    this.ids.push(id)\r\n\r\n    return this\r\n  }\r\n\r\n  getByID (id) {\r\n    return this.runners[this.ids.indexOf(id + 1)]\r\n  }\r\n\r\n  remove (id) {\r\n    let index = this.ids.indexOf(id + 1)\r\n    this.ids.splice(index, 1)\r\n    this.runners.splice(index, 1)\r\n    return this\r\n  }\r\n\r\n  merge () {\r\n    let lastRunner = null\r\n    this.runners.forEach((runner, i) => {\r\n\r\n      const condition = lastRunner\r\n        && runner.done && lastRunner.done\r\n        // don't merge runner when persisted on timeline\r\n        && (!runner._timeline || !runner._timeline._runnerIds.includes(runner.id))\r\n        && (!lastRunner._timeline || !lastRunner._timeline._runnerIds.includes(lastRunner.id))\r\n\r\n      if (condition) {\r\n        // the +1 happens in the function\r\n        this.remove(runner.id)\r\n        this.edit(lastRunner.id, runner.mergeWith(lastRunner))\r\n      }\r\n\r\n      lastRunner = runner\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  edit (id, newRunner) {\r\n    let index = this.ids.indexOf(id + 1)\r\n    this.ids.splice(index, 1, id + 1)\r\n    this.runners.splice(index, 1, newRunner)\r\n    return this\r\n  }\r\n\r\n  length () {\r\n    return this.ids.length\r\n  }\r\n\r\n  clearBefore (id) {\r\n    let deleteCnt = this.ids.indexOf(id + 1) || 1\r\n    this.ids.splice(0, deleteCnt, 0)\r\n    this.runners.splice(0, deleteCnt, new FakeRunner())\r\n      .forEach((r) => r.clearTransformsFromQueue())\r\n    return this\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Element: {\r\n    animate (duration, delay, when) {\r\n      var o = Runner.sanitise(duration, delay, when)\r\n      var timeline = this.timeline()\r\n      return new Runner(o.duration)\r\n        .loop(o)\r\n        .element(this)\r\n        .timeline(timeline.play())\r\n        .schedule(delay, when)\r\n    },\r\n\r\n    delay (by, when) {\r\n      return this.animate(0, by, when)\r\n    },\r\n\r\n    // this function searches for all runners on the element and deletes the ones\r\n    // which run before the current one. This is because absolute transformations\r\n    // overwfrite anything anyway so there is no need to waste time computing\r\n    // other runners\r\n    _clearTransformRunnersBefore (currentRunner) {\r\n      this._transformationRunners.clearBefore(currentRunner.id)\r\n    },\r\n\r\n    _currentTransform (current) {\r\n      return this._transformationRunners.runners\r\n        // we need the equal sign here to make sure, that also transformations\r\n        // on the same runner which execute before the current transformation are\r\n        // taken into account\r\n        .filter((runner) => runner.id <= current.id)\r\n        .map(getRunnerTransform)\r\n        .reduce(lmultiply, new Matrix())\r\n    },\r\n\r\n    _addRunner (runner) {\r\n      this._transformationRunners.add(runner)\r\n\r\n      // Make sure that the runner merge is executed at the very end of\r\n      // all Animator functions. Thats why we use immediate here to execute\r\n      // the merge right after all frames are run\r\n      Animator.cancelImmediate(this._frameId)\r\n      this._frameId = Animator.immediate(mergeTransforms.bind(this))\r\n    },\r\n\r\n    _prepareRunner () {\r\n      if (this._frameId == null) {\r\n        this._transformationRunners = new RunnerArray()\r\n          .add(new FakeRunner(new Matrix(this)))\r\n      }\r\n    }\r\n  }\r\n})\r\n\r\nextend(Runner, {\r\n  attr (a, v) {\r\n    return this.styleAttr('attr', a, v)\r\n  },\r\n\r\n  // Add animatable styles\r\n  css (s, v) {\r\n    return this.styleAttr('css', s, v)\r\n  },\r\n\r\n  styleAttr (type, name, val) {\r\n    // apply attributes individually\r\n    if (typeof name === 'object') {\r\n      for (var key in name) {\r\n        this.styleAttr(type, key, name[key])\r\n      }\r\n      return this\r\n    }\r\n\r\n    var morpher = new Morphable(this._stepper).to(val)\r\n\r\n    this.queue(function () {\r\n      morpher = morpher.from(this.element()[type](name))\r\n    }, function (pos) {\r\n      this.element()[type](name, morpher.at(pos))\r\n      return morpher.done()\r\n    })\r\n\r\n    return this\r\n  },\r\n\r\n  zoom (level, point) {\r\n    if (this._tryRetarget('zoom', to, point)) return this\r\n\r\n    var morpher = new Morphable(this._stepper).to(new SVGNumber(level))\r\n\r\n    this.queue(function () {\r\n      morpher = morpher.from(this.element().zoom())\r\n    }, function (pos) {\r\n      this.element().zoom(morpher.at(pos), point)\r\n      return morpher.done()\r\n    }, function (newLevel, newPoint) {\r\n      point = newPoint\r\n      morpher.to(newLevel)\r\n    })\r\n\r\n    this._rememberMorpher('zoom', morpher)\r\n    return this\r\n  },\r\n\r\n  /**\r\n   ** absolute transformations\r\n   **/\r\n\r\n  //\r\n  // M v -----|-----(D M v = F v)------|----->  T v\r\n  //\r\n  // 1. define the final state (T) and decompose it (once)\r\n  //    t = [tx, ty, the, lam, sy, sx]\r\n  // 2. on every frame: pull the current state of all previous transforms\r\n  //    (M - m can change)\r\n  //   and then write this as m = [tx0, ty0, the0, lam0, sy0, sx0]\r\n  // 3. Find the interpolated matrix F(pos) = m + pos * (t - m)\r\n  //   - Note F(0) = M\r\n  //   - Note F(1) = T\r\n  // 4. Now you get the delta matrix as a result: D = F * inv(M)\r\n\r\n  transform (transforms, relative, affine) {\r\n    // If we have a declarative function, we should retarget it if possible\r\n    relative = transforms.relative || relative\r\n    if (this._isDeclarative && !relative && this._tryRetarget('transform', transforms)) {\r\n      return this\r\n    }\r\n\r\n    // Parse the parameters\r\n    var isMatrix = Matrix.isMatrixLike(transforms)\r\n    affine = transforms.affine != null\r\n      ? transforms.affine\r\n      : (affine != null ? affine : !isMatrix)\r\n\r\n    // Create a morepher and set its type\r\n    const morpher = new Morphable(this._stepper)\r\n      .type(affine ? TransformBag : Matrix)\r\n\r\n    let origin\r\n    let element\r\n    let current\r\n    let currentAngle\r\n    let startTransform\r\n\r\n    function setup () {\r\n      // make sure element and origin is defined\r\n      element = element || this.element()\r\n      origin = origin || getOrigin(transforms, element)\r\n\r\n      startTransform = new Matrix(relative ? undefined : element)\r\n\r\n      // add the runner to the element so it can merge transformations\r\n      element._addRunner(this)\r\n\r\n      // Deactivate all transforms that have run so far if we are absolute\r\n      if (!relative) {\r\n        element._clearTransformRunnersBefore(this)\r\n      }\r\n    }\r\n\r\n    function run (pos) {\r\n      // clear all other transforms before this in case something is saved\r\n      // on this runner. We are absolute. We dont need these!\r\n      if (!relative) this.clearTransform()\r\n\r\n      let { x, y } = new Point(origin).transform(element._currentTransform(this))\r\n\r\n      let target = new Matrix({ ...transforms, origin: [ x, y ] })\r\n      let start = this._isDeclarative && current\r\n        ? current\r\n        : startTransform\r\n\r\n      if (affine) {\r\n        target = target.decompose(x, y)\r\n        start = start.decompose(x, y)\r\n\r\n        // Get the current and target angle as it was set\r\n        const rTarget = target.rotate\r\n        const rCurrent = start.rotate\r\n\r\n        // Figure out the shortest path to rotate directly\r\n        const possibilities = [ rTarget - 360, rTarget, rTarget + 360 ]\r\n        const distances = possibilities.map(a => Math.abs(a - rCurrent))\r\n        const shortest = Math.min(...distances)\r\n        const index = distances.indexOf(shortest)\r\n        target.rotate = possibilities[index]\r\n      }\r\n\r\n      if (relative) {\r\n        // we have to be careful here not to overwrite the rotation\r\n        // with the rotate method of Matrix\r\n        if (!isMatrix) {\r\n          target.rotate = transforms.rotate || 0\r\n        }\r\n        if (this._isDeclarative && currentAngle) {\r\n          start.rotate = currentAngle\r\n        }\r\n      }\r\n\r\n      morpher.from(start)\r\n      morpher.to(target)\r\n\r\n      let affineParameters = morpher.at(pos)\r\n      currentAngle = affineParameters.rotate\r\n      current = new Matrix(affineParameters)\r\n\r\n      this.addTransform(current)\r\n      element._addRunner(this)\r\n      return morpher.done()\r\n    }\r\n\r\n    function retarget (newTransforms) {\r\n      // only get a new origin if it changed since the last call\r\n      if (\r\n        (newTransforms.origin || 'center').toString()\r\n        !== (transforms.origin || 'center').toString()\r\n      ) {\r\n        origin = getOrigin(transforms, element)\r\n      }\r\n\r\n      // overwrite the old transformations with the new ones\r\n      transforms = { ...newTransforms, origin }\r\n    }\r\n\r\n    this.queue(setup, run, retarget, true)\r\n    this._isDeclarative && this._rememberMorpher('transform', morpher)\r\n    return this\r\n  },\r\n\r\n  // Animatable x-axis\r\n  x (x, relative) {\r\n    return this._queueNumber('x', x)\r\n  },\r\n\r\n  // Animatable y-axis\r\n  y (y) {\r\n    return this._queueNumber('y', y)\r\n  },\r\n\r\n  dx (x) {\r\n    return this._queueNumberDelta('x', x)\r\n  },\r\n\r\n  dy (y) {\r\n    return this._queueNumberDelta('y', y)\r\n  },\r\n\r\n  _queueNumberDelta (method, to) {\r\n    to = new SVGNumber(to)\r\n\r\n    // Try to change the target if we have this method already registerd\r\n    if (this._tryRetarget(method, to)) return this\r\n\r\n    // Make a morpher and queue the animation\r\n    var morpher = new Morphable(this._stepper).to(to)\r\n    var from = null\r\n    this.queue(function () {\r\n      from = this.element()[method]()\r\n      morpher.from(from)\r\n      morpher.to(from + to)\r\n    }, function (pos) {\r\n      this.element()[method](morpher.at(pos))\r\n      return morpher.done()\r\n    }, function (newTo) {\r\n      morpher.to(from + new SVGNumber(newTo))\r\n    })\r\n\r\n    // Register the morpher so that if it is changed again, we can retarget it\r\n    this._rememberMorpher(method, morpher)\r\n    return this\r\n  },\r\n\r\n  _queueObject (method, to) {\r\n    // Try to change the target if we have this method already registerd\r\n    if (this._tryRetarget(method, to)) return this\r\n\r\n    // Make a morpher and queue the animation\r\n    var morpher = new Morphable(this._stepper).to(to)\r\n    this.queue(function () {\r\n      morpher.from(this.element()[method]())\r\n    }, function (pos) {\r\n      this.element()[method](morpher.at(pos))\r\n      return morpher.done()\r\n    })\r\n\r\n    // Register the morpher so that if it is changed again, we can retarget it\r\n    this._rememberMorpher(method, morpher)\r\n    return this\r\n  },\r\n\r\n  _queueNumber (method, value) {\r\n    return this._queueObject(method, new SVGNumber(value))\r\n  },\r\n\r\n  // Animatable center x-axis\r\n  cx (x) {\r\n    return this._queueNumber('cx', x)\r\n  },\r\n\r\n  // Animatable center y-axis\r\n  cy (y) {\r\n    return this._queueNumber('cy', y)\r\n  },\r\n\r\n  // Add animatable move\r\n  move (x, y) {\r\n    return this.x(x).y(y)\r\n  },\r\n\r\n  // Add animatable center\r\n  center (x, y) {\r\n    return this.cx(x).cy(y)\r\n  },\r\n\r\n  // Add animatable size\r\n  size (width, height) {\r\n    // animate bbox based size for all other elements\r\n    var box\r\n\r\n    if (!width || !height) {\r\n      box = this._element.bbox()\r\n    }\r\n\r\n    if (!width) {\r\n      width = box.width / box.height * height\r\n    }\r\n\r\n    if (!height) {\r\n      height = box.height / box.width * width\r\n    }\r\n\r\n    return this\r\n      .width(width)\r\n      .height(height)\r\n  },\r\n\r\n  // Add animatable width\r\n  width (width) {\r\n    return this._queueNumber('width', width)\r\n  },\r\n\r\n  // Add animatable height\r\n  height (height) {\r\n    return this._queueNumber('height', height)\r\n  },\r\n\r\n  // Add animatable plot\r\n  plot (a, b, c, d) {\r\n    // Lines can be plotted with 4 arguments\r\n    if (arguments.length === 4) {\r\n      return this.plot([ a, b, c, d ])\r\n    }\r\n\r\n    if (this._tryRetarget('plot', a)) return this\r\n\r\n    var morpher = new Morphable(this._stepper)\r\n      .type(this._element.MorphArray).to(a)\r\n\r\n    this.queue(function () {\r\n      morpher.from(this._element.array())\r\n    }, function (pos) {\r\n      this._element.plot(morpher.at(pos))\r\n      return morpher.done()\r\n    })\r\n\r\n    this._rememberMorpher('plot', morpher)\r\n    return this\r\n  },\r\n\r\n  // Add leading method\r\n  leading (value) {\r\n    return this._queueNumber('leading', value)\r\n  },\r\n\r\n  // Add animatable viewbox\r\n  viewbox (x, y, width, height) {\r\n    return this._queueObject('viewbox', new Box(x, y, width, height))\r\n  },\r\n\r\n  update (o) {\r\n    if (typeof o !== 'object') {\r\n      return this.update({\r\n        offset: arguments[0],\r\n        color: arguments[1],\r\n        opacity: arguments[2]\r\n      })\r\n    }\r\n\r\n    if (o.opacity != null) this.attr('stop-opacity', o.opacity)\r\n    if (o.color != null) this.attr('stop-color', o.color)\r\n    if (o.offset != null) this.attr('offset', o.offset)\r\n\r\n    return this\r\n  }\r\n})\r\n\r\nextend(Runner, { rx, ry, from, to })\r\nregister(Runner, 'Runner')\r\n","import {\r\n  adopt,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { ns, svgjs, xlink, xmlns } from '../modules/core/namespaces.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport Defs from './Defs.js'\r\nimport { globals } from '../utils/window.js'\r\n\r\nexport default class Svg extends Container {\r\n  constructor (node) {\r\n    super(nodeOrNew('svg', node), node)\r\n    this.namespace()\r\n  }\r\n\r\n  isRoot () {\r\n    return !this.node.parentNode\r\n      || !(this.node.parentNode instanceof globals.window.SVGElement)\r\n      || this.node.parentNode.nodeName === '#document'\r\n  }\r\n\r\n  // Check if this is a root svg\r\n  // If not, call docs from this element\r\n  root () {\r\n    if (this.isRoot()) return this\r\n    return super.root()\r\n  }\r\n\r\n  // Add namespaces\r\n  namespace () {\r\n    if (!this.isRoot()) return this.root().namespace()\r\n    return this\r\n      .attr({ xmlns: ns, version: '1.1' })\r\n      .attr('xmlns:xlink', xlink, xmlns)\r\n      .attr('xmlns:svgjs', svgjs, xmlns)\r\n  }\r\n\r\n  // Creates and returns defs element\r\n  defs () {\r\n    if (!this.isRoot()) return this.root().defs()\r\n\r\n    return adopt(this.node.querySelector('defs'))\r\n      || this.put(new Defs())\r\n  }\r\n\r\n  // custom parent method\r\n  parent (type) {\r\n    if (this.isRoot()) {\r\n      return this.node.parentNode.nodeName === '#document'\r\n        ? null\r\n        : adopt(this.node.parentNode)\r\n    }\r\n\r\n    return super.parent(type)\r\n  }\r\n\r\n  clear () {\r\n    // remove children\r\n    while (this.node.hasChildNodes()) {\r\n      this.node.removeChild(this.node.lastChild)\r\n    }\r\n\r\n    // remove defs reference\r\n    delete this._defs\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create nested svg document\r\n    nested: wrapWithAttrCheck(function () {\r\n      return this.put(new Svg())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Svg, 'Svg', true)\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class Symbol extends Container {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('symbol', node), node)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    symbol: wrapWithAttrCheck(function () {\r\n      return this.put(new Symbol())\r\n    })\r\n  }\r\n})\r\n\r\nregister(Symbol, 'Symbol')\r\n","import { globals } from '../../utils/window.js'\r\n\r\n// Create plain text node\r\nexport function plain (text) {\r\n  // clear if build mode is disabled\r\n  if (this._build === false) {\r\n    this.clear()\r\n  }\r\n\r\n  // create text node\r\n  this.node.appendChild(globals.document.createTextNode(text))\r\n\r\n  return this\r\n}\r\n\r\n// Get length of text element\r\nexport function length () {\r\n  return this.node.getComputedTextLength()\r\n}\r\n","import {\r\n  adopt,\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Shape from './Shape.js'\r\nimport { globals } from '../utils/window.js'\r\nimport * as textable from '../modules/core/textable.js'\r\n\r\nexport default class Text extends Shape {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('text', node), node)\r\n\r\n    this.dom.leading = new SVGNumber(1.3) // store leading value for rebuilding\r\n    this._rebuild = true // enable automatic updating of dy values\r\n    this._build = false // disable build mode for adding multiple lines\r\n  }\r\n\r\n  // Move over x-axis\r\n  // Text is moved its bounding box\r\n  // text-anchor does NOT matter\r\n  x (x, box = this.bbox()) {\r\n    if (x == null) {\r\n      return box.x\r\n    }\r\n\r\n    return this.attr('x', this.attr('x') + x - box.x)\r\n  }\r\n\r\n  // Move over y-axis\r\n  y (y, box = this.bbox()) {\r\n    if (y == null) {\r\n      return box.y\r\n    }\r\n\r\n    return this.attr('y', this.attr('y') + y - box.y)\r\n  }\r\n\r\n  move (x, y, box = this.bbox()) {\r\n    return this.x(x, box).y(y, box)\r\n  }\r\n\r\n  // Move center over x-axis\r\n  cx (x, box = this.bbox()) {\r\n    if (x == null) {\r\n      return box.cx\r\n    }\r\n\r\n    return this.attr('x', this.attr('x') + x - box.cx)\r\n  }\r\n\r\n  // Move center over y-axis\r\n  cy (y, box = this.bbox()) {\r\n    if (y == null) {\r\n      return box.cy\r\n    }\r\n\r\n    return this.attr('y', this.attr('y') + y - box.cy)\r\n  }\r\n\r\n  center (x, y, box = this.bbox()) {\r\n    return this.cx(x, box).cy(y, box)\r\n  }\r\n\r\n  // Set the text content\r\n  text (text) {\r\n    // act as getter\r\n    if (text === undefined) {\r\n      var children = this.node.childNodes\r\n      var firstLine = 0\r\n      text = ''\r\n\r\n      for (var i = 0, len = children.length; i < len; ++i) {\r\n        // skip textPaths - they are no lines\r\n        if (children[i].nodeName === 'textPath') {\r\n          if (i === 0) firstLine = 1\r\n          continue\r\n        }\r\n\r\n        // add newline if its not the first child and newLined is set to true\r\n        if (i !== firstLine && children[i].nodeType !== 3 && adopt(children[i]).dom.newLined === true) {\r\n          text += '\\n'\r\n        }\r\n\r\n        // add content of this node\r\n        text += children[i].textContent\r\n      }\r\n\r\n      return text\r\n    }\r\n\r\n    // remove existing content\r\n    this.clear().build(true)\r\n\r\n    if (typeof text === 'function') {\r\n      // call block\r\n      text.call(this, this)\r\n    } else {\r\n      // store text and make sure text is not blank\r\n      text = text.split('\\n')\r\n\r\n      // build new lines\r\n      for (var j = 0, jl = text.length; j < jl; j++) {\r\n        this.tspan(text[j]).newLine()\r\n      }\r\n    }\r\n\r\n    // disable build mode and rebuild lines\r\n    return this.build(false).rebuild()\r\n  }\r\n\r\n  // Set / get leading\r\n  leading (value) {\r\n    // act as getter\r\n    if (value == null) {\r\n      return this.dom.leading\r\n    }\r\n\r\n    // act as setter\r\n    this.dom.leading = new SVGNumber(value)\r\n\r\n    return this.rebuild()\r\n  }\r\n\r\n  // Rebuild appearance type\r\n  rebuild (rebuild) {\r\n    // store new rebuild flag if given\r\n    if (typeof rebuild === 'boolean') {\r\n      this._rebuild = rebuild\r\n    }\r\n\r\n    // define position of all lines\r\n    if (this._rebuild) {\r\n      var self = this\r\n      var blankLineOffset = 0\r\n      var leading = this.dom.leading\r\n\r\n      this.each(function () {\r\n        var fontSize = globals.window.getComputedStyle(this.node)\r\n          .getPropertyValue('font-size')\r\n        var dy = leading * new SVGNumber(fontSize)\r\n\r\n        if (this.dom.newLined) {\r\n          this.attr('x', self.attr('x'))\r\n\r\n          if (this.text() === '\\n') {\r\n            blankLineOffset += dy\r\n          } else {\r\n            this.attr('dy', dy + blankLineOffset)\r\n            blankLineOffset = 0\r\n          }\r\n        }\r\n      })\r\n\r\n      this.fire('rebuild')\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  // Enable / disable build mode\r\n  build (build) {\r\n    this._build = !!build\r\n    return this\r\n  }\r\n\r\n  // overwrite method from parent to set data properly\r\n  setData (o) {\r\n    this.dom = o\r\n    this.dom.leading = new SVGNumber(o.leading || 1.3)\r\n    return this\r\n  }\r\n}\r\n\r\nextend(Text, textable)\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create text element\r\n    text: wrapWithAttrCheck(function (text) {\r\n      return this.put(new Text()).text(text)\r\n    }),\r\n\r\n    // Create plain text element\r\n    plain: wrapWithAttrCheck(function (text) {\r\n      return this.put(new Text()).plain(text)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Text, 'Text')\r\n","import {\r\n  extend,\r\n  nodeOrNew,\r\n  register,\r\n  wrapWithAttrCheck\r\n} from '../utils/adopter.js'\r\nimport { globals } from '../utils/window.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport SVGNumber from '../types/SVGNumber.js'\r\nimport Text from './Text.js'\r\nimport * as textable from '../modules/core/textable.js'\r\n\r\nexport default class Tspan extends Text {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('tspan', node), node)\r\n  }\r\n\r\n  // Set text content\r\n  text (text) {\r\n    if (text == null) return this.node.textContent + (this.dom.newLined ? '\\n' : '')\r\n\r\n    typeof text === 'function' ? text.call(this, this) : this.plain(text)\r\n\r\n    return this\r\n  }\r\n\r\n  // Shortcut dx\r\n  dx (dx) {\r\n    return this.attr('dx', dx)\r\n  }\r\n\r\n  // Shortcut dy\r\n  dy (dy) {\r\n    return this.attr('dy', dy)\r\n  }\r\n\r\n  x (x) {\r\n    return this.attr('x', x)\r\n  }\r\n\r\n  y (y) {\r\n    return this.attr('x', y)\r\n  }\r\n\r\n  move (x, y) {\r\n    return this.x(x).y(y)\r\n  }\r\n\r\n  // Create new line\r\n  newLine () {\r\n    // fetch text parent\r\n    var t = this.parent(Text)\r\n\r\n    // mark new line\r\n    this.dom.newLined = true\r\n\r\n    var fontSize = globals.window.getComputedStyle(this.node)\r\n      .getPropertyValue('font-size')\r\n    var dy = t.dom.leading * new SVGNumber(fontSize)\r\n\r\n    // apply new position\r\n    return this.dy(dy).attr('x', t.x())\r\n  }\r\n}\r\n\r\nextend(Tspan, textable)\r\n\r\nregisterMethods({\r\n  Tspan: {\r\n    tspan: wrapWithAttrCheck(function (text) {\r\n      var tspan = new Tspan()\r\n\r\n      // clear if build mode is disabled\r\n      if (!this._build) {\r\n        this.clear()\r\n      }\r\n\r\n      // add new tspan\r\n      this.node.appendChild(tspan.node)\r\n\r\n      return tspan.text(text)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Tspan, 'Tspan')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class ClipPath extends Container {\r\n  constructor (node) {\r\n    super(nodeOrNew('clipPath', node), node)\r\n  }\r\n\r\n  // Unclip all clipped elements and remove itself\r\n  remove () {\r\n    // unclip all targets\r\n    this.targets().forEach(function (el) {\r\n      el.unclip()\r\n    })\r\n\r\n    // remove clipPath from parent\r\n    return super.remove()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [clip-path*=\"' + this.id() + '\"]')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create clipping element\r\n    clip: wrapWithAttrCheck(function () {\r\n      return this.defs().put(new ClipPath())\r\n    })\r\n  },\r\n  Element: {\r\n    // Distribute clipPath to svg element\r\n    clipWith (element) {\r\n      // use given clip or create a new one\r\n      let clipper = element instanceof ClipPath\r\n        ? element\r\n        : this.parent().clip().add(element)\r\n\r\n      // apply mask\r\n      return this.attr('clip-path', 'url(\"#' + clipper.id() + '\")')\r\n    },\r\n\r\n    // Unclip element\r\n    unclip () {\r\n      return this.attr('clip-path', null)\r\n    },\r\n\r\n    clipper () {\r\n      return this.reference('clip-path')\r\n    }\r\n  }\r\n})\r\n\r\nregister(ClipPath, 'ClipPath')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\nimport { registerMethods } from '../utils/methods.js'\nimport Element from './Element.js'\n\nexport default class ForeignObject extends Element {\r\n  constructor (node) {\r\n    super(nodeOrNew('foreignObject', node), node)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    foreignObject: wrapWithAttrCheck(function (width, height) {\r\n      return this.put(new ForeignObject()).size(width, height)\r\n    })\r\n  }\r\n})\r\n\r\nregister(ForeignObject, 'ForeignObject')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { proportionalSize } from '../utils/utils.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport Matrix from '../types/Matrix.js'\r\nimport Point from '../types/Point.js'\r\n\r\nexport default class G extends Container {\r\n  constructor (node) {\r\n    super(nodeOrNew('g', node), node)\r\n  }\r\n\r\n  x (x, box = this.bbox()) {\r\n    if (x == null) return box.x\r\n    return this.move(x, box.y, box)\r\n  }\r\n\r\n  y (y, box = this.bbox()) {\r\n    if (y == null) return box.y\r\n    return this.move(box.x, y, box)\r\n  }\r\n\r\n  move (x = 0, y = 0, box = this.bbox()) {\r\n    const dx = x - box.x\r\n    const dy = y - box.y\r\n\r\n    return this.dmove(dx, dy)\r\n  }\r\n\r\n  dx (dx) {\r\n    return this.dmove(dx, 0)\r\n  }\r\n\r\n  dy (dy) {\r\n    return this.dmove(0, dy)\r\n  }\r\n\r\n  dmove (dx, dy) {\r\n    this.children().forEach((child, i) => {\r\n      // Get the childs bbox\r\n      const bbox = child.bbox()\r\n      // Get childs matrix\r\n      const m = new Matrix(child)\r\n      // Translate childs matrix by amount and\r\n      // transform it back into parents space\r\n      const matrix = m.translate(dx, dy).transform(m.inverse())\r\n      // Calculate new x and y from old box\r\n      const p = new Point(bbox.x, bbox.y).transform(matrix)\r\n      // Move element\r\n      child.move(p.x, p.y)\r\n    })\r\n\r\n    return this\r\n  }\r\n\r\n  width (width, box = this.bbox()) {\r\n    if (width == null) return box.width\r\n    return this.size(width, box.height, box)\r\n  }\r\n\r\n  height (height, box = this.bbox()) {\r\n    if (height == null) return box.height\r\n    return this.size(box.width, height, box)\r\n  }\r\n\r\n  size (width, height, box = this.bbox()) {\r\n    const p = proportionalSize(this, width, height, box)\r\n    const scaleX = p.width / box.width\r\n    const scaleY = p.height / box.height\r\n\r\n    this.children().forEach((child, i) => {\r\n      const o = new Point(box).transform(new Matrix(child).inverse())\r\n      child.scale(scaleX, scaleY, o.x, o.y)\r\n    })\r\n\r\n    return this\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a group element\r\n    group: wrapWithAttrCheck(function () {\r\n      return this.put(new G())\r\n    })\r\n  }\r\n})\r\n\r\nregister(G, 'G')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Container from './Container.js'\r\n\r\nexport default class A extends Container {\r\n  constructor (node) {\r\n    super(nodeOrNew('a', node), node)\r\n  }\r\n\r\n  // Link url\r\n  to (url) {\r\n    return this.attr('href', url, xlink)\r\n  }\r\n\r\n  // Link target attribute\r\n  target (target) {\r\n    return this.attr('target', target)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a hyperlink element\r\n    link: wrapWithAttrCheck(function (url) {\r\n      return this.put(new A()).to(url)\r\n    })\r\n  },\r\n  Element: {\r\n    // Create a hyperlink element\r\n    linkTo: function (url) {\r\n      var link = new A()\r\n\r\n      if (typeof url === 'function') {\r\n        url.call(link, link)\r\n      } else {\r\n        link.to(url)\r\n      }\r\n\r\n      return this.parent().put(link).put(this)\r\n    }\r\n  }\r\n})\r\n\r\nregister(A, 'A')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport Container from './Container.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class Mask extends Container {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('mask', node), node)\r\n  }\r\n\r\n  // Unmask all masked elements and remove itself\r\n  remove () {\r\n    // unmask all targets\r\n    this.targets().forEach(function (el) {\r\n      el.unmask()\r\n    })\r\n\r\n    // remove mask from parent\r\n    return super.remove()\r\n  }\r\n\r\n  targets () {\r\n    return baseFind('svg [mask*=\"' + this.id() + '\"]')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    mask: wrapWithAttrCheck(function () {\r\n      return this.defs().put(new Mask())\r\n    })\r\n  },\r\n  Element: {\r\n    // Distribute mask to svg element\r\n    maskWith (element) {\r\n      // use given mask or create a new one\r\n      var masker = element instanceof Mask\r\n        ? element\r\n        : this.parent().mask().add(element)\r\n\r\n      // apply mask\r\n      return this.attr('mask', 'url(\"#' + masker.id() + '\")')\r\n    },\r\n\r\n    // Unmask element\r\n    unmask () {\r\n      return this.attr('mask', null)\r\n    },\r\n\r\n    masker () {\r\n      return this.reference('mask')\r\n    }\r\n  }\r\n})\r\n\r\nregister(Mask, 'Mask')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { unCamelCase } from '../utils/utils.js'\r\nimport Element from './Element.js'\r\n\r\nfunction cssRule (selector, rule) {\r\n  if (!selector) return ''\r\n  if (!rule) return selector\r\n\r\n  var ret = selector + '{'\r\n\r\n  for (var i in rule) {\r\n    ret += unCamelCase(i) + ':' + rule[i] + ';'\r\n  }\r\n\r\n  ret += '}'\r\n\r\n  return ret\r\n}\r\n\r\nexport default class Style extends Element {\r\n  constructor (node) {\r\n    super(nodeOrNew('style', node), node)\r\n  }\r\n\r\n  addText (w = '') {\r\n    this.node.textContent += w\r\n    return this\r\n  }\r\n\r\n  font (name, src, params = {}) {\r\n    return this.rule('@font-face', {\r\n      fontFamily: name,\r\n      src: src,\r\n      ...params\r\n    })\r\n  }\r\n\r\n  rule (selector, obj) {\r\n    return this.addText(cssRule(selector, obj))\r\n  }\r\n}\r\n\r\nregisterMethods('Dom', {\r\n  style: wrapWithAttrCheck(function (selector, obj) {\r\n    return this.put(new Style()).rule(selector, obj)\r\n  }),\r\n  fontface: wrapWithAttrCheck(function (name, src, params) {\r\n    return this.put(new Style()).font(name, src, params)\r\n  })\r\n})\r\n\r\nregister(Style, 'Style')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Path from './Path.js'\r\nimport PathArray from '../types/PathArray.js'\r\nimport Text from './Text.js'\r\nimport baseFind from '../modules/core/selector.js'\r\n\r\nexport default class TextPath extends Text {\r\n  // Initialize node\r\n  constructor (node) {\r\n    super(nodeOrNew('textPath', node), node)\r\n  }\r\n\r\n  // return the array of the path track element\r\n  array () {\r\n    var track = this.track()\r\n\r\n    return track ? track.array() : null\r\n  }\r\n\r\n  // Plot path if any\r\n  plot (d) {\r\n    var track = this.track()\r\n    var pathArray = null\r\n\r\n    if (track) {\r\n      pathArray = track.plot(d)\r\n    }\r\n\r\n    return (d == null) ? pathArray : this\r\n  }\r\n\r\n  // Get the path element\r\n  track () {\r\n    return this.reference('href')\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    textPath: wrapWithAttrCheck(function (text, path) {\r\n      // Convert text to instance if needed\r\n      if (!(text instanceof Text)) {\r\n        text = this.text(text)\r\n      }\r\n\r\n      return text.path(path)\r\n    })\r\n  },\r\n  Text: {\r\n    // Create path for text to run on\r\n    path: wrapWithAttrCheck(function (track, importNodes = true) {\r\n      var textPath = new TextPath()\r\n\r\n      // if track is a path, reuse it\r\n      if (!(track instanceof Path)) {\r\n        // create path element\r\n        track = this.defs().path(track)\r\n      }\r\n\r\n      // link textPath to path and add content\r\n      textPath.attr('href', '#' + track, xlink)\r\n\r\n      // Transplant all nodes from text to textPath\r\n      let node\r\n      if (importNodes) {\r\n        while ((node = this.node.firstChild)) {\r\n          textPath.node.appendChild(node)\r\n        }\r\n      }\r\n\r\n      // add textPath element as child node and return textPath\r\n      return this.put(textPath)\r\n    }),\r\n\r\n    // Get the textPath children\r\n    textPath () {\r\n      return this.findOne('textPath')\r\n    }\r\n  },\r\n  Path: {\r\n    // creates a textPath from this path\r\n    text: wrapWithAttrCheck(function (text) {\r\n      // Convert text to instance if needed\r\n      if (!(text instanceof Text)) {\r\n        text = new Text().addTo(this.parent()).text(text)\r\n      }\r\n\r\n      // Create textPath from text and path and return\r\n      return text.path(this)\r\n    }),\r\n\r\n    targets () {\r\n      return baseFind('svg [href*=\"' + this.id() + '\"]')\r\n    }\r\n  }\r\n})\r\n\r\nTextPath.prototype.MorphArray = PathArray\r\nregister(TextPath, 'TextPath')\r\n","import { nodeOrNew, register, wrapWithAttrCheck } from '../utils/adopter.js'\r\nimport { registerMethods } from '../utils/methods.js'\r\nimport { xlink } from '../modules/core/namespaces.js'\r\nimport Shape from './Shape.js'\r\n\r\nexport default class Use extends Shape {\r\n  constructor (node) {\r\n    super(nodeOrNew('use', node), node)\r\n  }\r\n\r\n  // Use element as a reference\r\n  element (element, file) {\r\n    // Set lined element\r\n    return this.attr('href', (file || '') + '#' + element, xlink)\r\n  }\r\n}\r\n\r\nregisterMethods({\r\n  Container: {\r\n    // Create a use element\r\n    use: wrapWithAttrCheck(function (element, file) {\r\n      return this.put(new Use()).element(element, file)\r\n    })\r\n  }\r\n})\r\n\r\nregister(Use, 'Use')\r\n","/* Optional Modules */\r\nimport './modules/optional/arrange.js'\r\nimport './modules/optional/class.js'\r\nimport './modules/optional/css.js'\r\nimport './modules/optional/data.js'\r\nimport './modules/optional/memory.js'\r\nimport './modules/optional/sugar.js'\r\nimport './modules/optional/transform.js'\r\n\r\nimport { extend, makeInstance } from './utils/adopter.js'\r\nimport { getMethodNames, getMethodsFor } from './utils/methods.js'\r\nimport Box from './types/Box.js'\r\nimport Circle from './elements/Circle.js'\r\nimport Color from './types/Color.js'\r\nimport Container from './elements/Container.js'\r\nimport Defs from './elements/Defs.js'\r\nimport Dom from './elements/Dom.js'\r\nimport Element from './elements/Element.js'\r\nimport Ellipse from './elements/Ellipse.js'\r\nimport EventTarget from './types/EventTarget.js'\r\nimport Gradient from './elements/Gradient.js'\r\nimport Image from './elements/Image.js'\r\nimport Line from './elements/Line.js'\r\nimport List from './types/List.js'\r\nimport Marker from './elements/Marker.js'\r\nimport Matrix from './types/Matrix.js'\r\nimport Morphable, {\r\n  NonMorphable,\r\n  ObjectBag,\r\n  TransformBag,\r\n  makeMorphable,\r\n  registerMorphableType\r\n} from './animation/Morphable.js'\r\nimport Path from './elements/Path.js'\r\nimport PathArray from './types/PathArray.js'\r\nimport Pattern from './elements/Pattern.js'\r\nimport PointArray from './types/PointArray.js'\r\nimport Polygon from './elements/Polygon.js'\r\nimport Polyline from './elements/Polyline.js'\r\nimport Rect from './elements/Rect.js'\r\nimport Runner from './animation/Runner.js'\r\nimport SVGArray from './types/SVGArray.js'\r\nimport SVGNumber from './types/SVGNumber.js'\r\nimport Shape from './elements/Shape.js'\r\nimport Svg from './elements/Svg.js'\r\nimport Symbol from './elements/Symbol.js'\r\nimport Text from './elements/Text.js'\r\nimport Tspan from './elements/Tspan.js'\r\nimport * as defaults from './modules/core/defaults.js'\r\nimport * as utils from './utils/utils.js'\r\nimport * as namespaces from './modules/core/namespaces.js'\r\nimport * as regex from './modules/core/regex.js'\r\n\r\nexport {\r\n  Morphable,\r\n  registerMorphableType,\r\n  makeMorphable,\r\n  TransformBag,\r\n  ObjectBag,\r\n  NonMorphable\r\n}\r\n\r\nexport { defaults, utils, namespaces, regex }\r\nexport const SVG = makeInstance\r\nexport { default as parser } from './modules/core/parser.js'\r\nexport { default as find } from './modules/core/selector.js'\r\nexport * from './modules/core/event.js'\r\nexport * from './utils/adopter.js'\r\nexport { registerWindow } from './utils/window.js'\r\n\r\n/* Animation Modules */\r\nexport { default as Animator } from './animation/Animator.js'\r\nexport { Controller, Ease, PID, Spring, easing } from './animation/Controller.js'\r\nexport { default as Queue } from './animation/Queue.js'\r\nexport { default as Runner } from './animation/Runner.js'\r\nexport { default as Timeline } from './animation/Timeline.js'\r\n\r\n/* Types */\r\nexport { default as Array } from './types/SVGArray.js'\r\nexport { default as Box } from './types/Box.js'\r\nexport { default as Color } from './types/Color.js'\r\nexport { default as EventTarget } from './types/EventTarget.js'\r\nexport { default as Matrix } from './types/Matrix.js'\r\nexport { default as Number } from './types/SVGNumber.js'\r\nexport { default as PathArray } from './types/PathArray.js'\r\nexport { default as Point } from './types/Point.js'\r\nexport { default as PointArray } from './types/PointArray.js'\r\nexport { default as List } from './types/List.js'\r\n\r\n/* Elements */\r\nexport { default as Circle } from './elements/Circle.js'\r\nexport { default as ClipPath } from './elements/ClipPath.js'\r\nexport { default as Container } from './elements/Container.js'\r\nexport { default as Defs } from './elements/Defs.js'\r\nexport { default as Dom } from './elements/Dom.js'\r\nexport { default as Element } from './elements/Element.js'\r\nexport { default as Ellipse } from './elements/Ellipse.js'\r\nexport { default as ForeignObject } from './elements/ForeignObject.js'\r\nexport { default as Gradient } from './elements/Gradient.js'\r\nexport { default as G } from './elements/G.js'\r\nexport { default as A } from './elements/A.js'\r\nexport { default as Image } from './elements/Image.js'\r\nexport { default as Line } from './elements/Line.js'\r\nexport { default as Marker } from './elements/Marker.js'\r\nexport { default as Mask } from './elements/Mask.js'\r\nexport { default as Path } from './elements/Path.js'\r\nexport { default as Pattern } from './elements/Pattern.js'\r\nexport { default as Polygon } from './elements/Polygon.js'\r\nexport { default as Polyline } from './elements/Polyline.js'\r\nexport { default as Rect } from './elements/Rect.js'\r\nexport { default as Shape } from './elements/Shape.js'\r\nexport { default as Stop } from './elements/Stop.js'\r\nexport { default as Style } from './elements/Style.js'\r\nexport { default as Svg } from './elements/Svg.js'\r\nexport { default as Symbol } from './elements/Symbol.js'\r\nexport { default as Text } from './elements/Text.js'\r\nexport { default as TextPath } from './elements/TextPath.js'\r\nexport { default as Tspan } from './elements/Tspan.js'\r\nexport { default as Use } from './elements/Use.js'\r\n\r\nextend([\r\n  Svg,\r\n  Symbol,\r\n  Image,\r\n  Pattern,\r\n  Marker\r\n], getMethodsFor('viewbox'))\r\n\r\nextend([\r\n  Line,\r\n  Polyline,\r\n  Polygon,\r\n  Path\r\n], getMethodsFor('marker'))\r\n\r\nextend(Text, getMethodsFor('Text'))\r\nextend(Path, getMethodsFor('Path'))\r\n\r\nextend(Defs, getMethodsFor('Defs'))\r\n\r\nextend([\r\n  Text,\r\n  Tspan\r\n], getMethodsFor('Tspan'))\r\n\r\nextend([\r\n  Rect,\r\n  Ellipse,\r\n  Circle,\r\n  Gradient\r\n], getMethodsFor('radius'))\r\n\r\nextend(EventTarget, getMethodsFor('EventTarget'))\r\nextend(Dom, getMethodsFor('Dom'))\r\nextend(Element, getMethodsFor('Element'))\r\nextend(Shape, getMethodsFor('Shape'))\r\n// extend(Element, getConstructor('Memory'))\r\nextend(Container, getMethodsFor('Container'))\r\n\r\nextend(Runner, getMethodsFor('Runner'))\r\n\r\nList.extend(getMethodNames())\r\n\r\nregisterMorphableType([\r\n  SVGNumber,\r\n  Color,\r\n  Box,\r\n  Matrix,\r\n  SVGArray,\r\n  PointArray,\r\n  PathArray\r\n])\r\n\r\nmakeMorphable()\r\n"],"sourceRoot":""}